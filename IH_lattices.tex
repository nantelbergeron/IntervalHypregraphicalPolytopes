\documentclass[reqno]{amsart}

\usepackage{enumerate, amsmath, amsfonts, amssymb, amsthm, wasysym, graphics, graphicx, xcolor, url, hyperref, hypcap, a4wide, pdflscape, multido, xargs, colortbl, multicol, multirow, calc, shuffle, hvfloat}
\hypersetup{colorlinks=true, citecolor=PineGreen, linkcolor=PineGreen}
%\usepackage[all]{xy}
\usepackage{tikz}\usetikzlibrary{trees,snakes,shapes,arrows,matrix,calc,arrows.meta}
\usepackage{comment}
\usepackage{etex}
\usepackage{ulem}\normalem % to strike through a word
\usepackage[noabbrev,capitalise]{cleveref}
\setlength{\abovecaptionskip}{10pt}
\setlength{\belowcaptionskip}{5pt}

%\reserveinserts{50}
\graphicspath{{figures/}}
\makeatletter
\def\input@path{{figures/}}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\title{Interval hypergraphic lattices}

\author[N.~Bergeron]{Nantel Bergeron} 
\address[N.~Bergeron]{Department of Mathematics and Statistics, York University, Toronto}
\email{bergeron@yorku.ca}
\urladdr{http://bergeron.mathstats.yorku.ca}

\author{Vincent Pilaud}
\address{Universitat de Barcelona}
\email{vincent.pilaud@ub.edu}
\urladdr{\url{https://www.ub.edu/comb/vincentpilaud/}}

\thanks{
NB was supported by NSERC and York Research Chair in Applied Algebra.
VP was partially supported by the Spanish grant PID2022-137283NB-C21 of MCIN/AEI/10.13039/501100011033 / FEDER, UE, by Departament de Recerca i Universitats de la Generalitat de Catalunya (2021 SGR 00697), by the French grant CHARMS (ANR-19-CE40-0017), and by the French--Austrian projects PAGCAP (ANR-21-CE48-0020 \& FWF I 5788).
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% theorems
\newtheorem{theorem}{Theorem}[section]
\newtheorem{theoremA}{Theorem}
\renewcommand{\thetheoremA}{\Alph{theoremA}}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{conjecture}[theorem]{Conjecture}
\crefname{conjecture}{Conjecture}{Conjectures}
\newtheorem{conjectureA}{Conjecture}
\renewcommand{\theconjectureA}{\Alph{conjectureA}}
\crefname{conjectureA}{Conjecture}{Conjectures}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{question}[theorem]{Question}
\newtheorem{notation}[theorem]{Notation}
\newtheorem{openproblem}[theorem]{Open problem}


% newcommands
% math special letters
\newcommand{\R}{\mathbb{R}} % reals
\newcommand{\N}{\mathbb{N}} % naturals
\newcommand{\Z}{\mathbb{Z}} % integers
\newcommand{\I}{\mathbb{I}} % set of integers
\newcommand{\C}{\mathbb{C}} % set of summands
\renewcommand{\b}[1]{\boldsymbol{#1}} % bold
\newcommand{\cal}[1]{\mathcal{#1}} % cal

% math commands
\newcommand{\set}[2]{\left\{ #1 \;\middle|\; #2 \right\}} % set notation
\newcommand{\bigset}[2]{\big\{ #1 \;|\; #2 \big\}} % big set notation
\newcommand{\biggset}[2]{\bigg\{ #1 \;\bigg|\; #2 \bigg\}} % big set notation
\newcommand{\multiset}[2]{\left\{\!\!\left\{ #1 \;\middle|\; #2 \right\}\!\!\right\}} % multiset notation
\newcommand{\bigmultiset}[2]{\big\{\!\!\big\{ #1 \;|\; #2 \big\}\!\!\big\}} % big multiset notation
\newcommand{\ssm}{\smallsetminus} % small set minus
\newcommand{\dotprod}[2]{\langle #1 | #2 \rangle} % dot product
\newcommand{\symdif}{\triangle} % symmetric difference
\newcommand{\one}{{1\!\!1}} % the all one vector
\newcommand{\eqdef}{\mbox{\,\raisebox{0.2ex}{\scriptsize\ensuremath{\mathrm:}}\ensuremath{=}\,}} % :=
\newcommand{\defeq}{\mbox{~\ensuremath{=}\raisebox{0.2ex}{\scriptsize\ensuremath{\mathrm:}} }} % =:
\newcommand{\polar}{^\diamond} % polar
\newcommand{\simplex}{\triangle} % simplex

% operators
\DeclareMathOperator{\conv}{conv} % convex hull
\DeclareMathOperator{\cone}{cone} % cone hull
\DeclareMathOperator{\arr}{Arr} % arrangements
\DeclareMathOperator{\Inv}{Inv} % inversion set
\DeclareMathOperator{\Ninv}{Ninv} % non-inversion set
\DeclareMathOperator{\DemazureProduct}{Dem} % non-inversion set

% others
\newcommand{\fix}[1]{{\bf FIXME: }#1} % emphasis of a problem to FIX
\newcommand{\ie}{\textit{i.e.}~} % id est
\newcommand{\eg}{\textit{e.g.}~} % exempli gratia
\newcommand{\Eg}{\textit{E.g.}~} % exempli gratia
\newcommand{\aka}{\textit{aka.}~} % also known as
\newcommand{\viceversa}{\textit{vice versa}} % vice versa
\newcommand{\ordinal}{\textsuperscript{th}} % th for ordinals
\newcommand{\ex}[1]{^{\textrm{ex#1}}} % example
\newcommand{\para}[1]{\medskip\noindent\textbf{#1}} % paragraph
\newcommand{\subpara}[1]{\smallskip\noindent\textit{#1.}} % paragraph
\definecolor{PineGreen}{RGB}{2,120,120} % pinegreen color
\definecolor{darkgreen}{RGB}{57,181,74} % darkgreen color
\newcommand{\blue}[1]{{\color{blue} #1}} % blue
\newcommand{\red}[1]{{\color{red} #1}} % red
\newcommand{\green}[1]{{\color{darkgreen} #1}} % green
\newcommand{\defn}[1]{\textbf{\textsf{\color{PineGreen} #1}}} % emphasis of a definition
\usepackage{todonotes}
\newcommand{\nantel}[1]{\todo[color=red!30]{#1 \\ \hfill --- N.}}
\newcommand{\Nantel}[1]{\todo[inline,color=red!30]{#1 \\ \hfill --- N.}}
\newcommand{\vincent}[1]{\todo[color=blue!30]{#1 \\ \hfill --- V.}}
\newcommand{\Vincent}[1]{\todo[inline,color=blue!30]{#1 \\ \hfill --- V.}}

% permutations
\newcommand{\fS}{\mathfrak{S}} % symmetric group
\newcommand{\fR}{\mathfrak{R}} % subset symmetric group


% lattices
\newcommand{\meet}{\wedge} % meet
\newcommand{\join}{\vee} % join
\newcommand{\less}{\vartriangleleft} % smaller WOIP
\newcommand{\lesseq}{\trianglelefteq} % smaller WOIP
\newcommand{\more}{\vartriangleright} % larger WOIP
\newcommand{\contactLess}[1]{\less_{#1}} % smaller contact graph
\newcommand{\contactMore}[1]{\more_{#1}} % larger contact graph
\newcommand{\projDown}{\pi^\downarrow} % Down projection
\newcommand{\projUp}{\pi^\uparrow} % Down projection

% Orientation, Hypergraph and Intervals
\newcommand{\Or}{\mathcal O}  % The map S_n --> acyclic orientation corresponding to vertices
\newcommand{\HH}{\mathbb H}  % general hypergraph
\newcommand{\II}{\mathbb I} % interval hypergraph
\newcommand{\cJ}{\cal{J}} % basic irreducibles index set
\newcommand{\cX}{\cal{X}}
\newcommand{\cY}{\cal{Y}}
\newcommand{\cA}{\cal{A}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\begin{abstract}
For a hypergraph~$\HH$ on~$[n]$, the hypergraphic poset~$P_\HH$ is the transitive closure of the oriented skeleton of the hypergraphic polytope~$\simplex_\HH$ (the Minkowski sum of the standard simplices~$\simplex_H$ for all~$H \in \HH$).
Hypergraphic posets include the weak order for the permutahedron (when~$\HH$ is the complete graph on~$[n]$) and the Tamari lattice for the associahedron (when~$\HH$ is the set of all intervals of~$[n]$), and it is natural to study lattice properties of hypergraphic posets.
In this paper, we focus on interval hypergraphs, where all hyperedges are intervals of~$[n]$.
We characterize the interval hypergraphs~$\II$ for which~$P_\II$ is a lattice, a distributive lattice, a semidistributive lattice, and a lattice quotient of the weak order.
When~$P_\II$ is lattice, we describe the join irreducibles of~$P_\II$.
\end{abstract}

\maketitle

\tableofcontents

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Introduction}
\label{sec:introduction}

The \defn{hypergraphic polytope} of a hypergraph~$\HH$ on~$[n]$ is the Minkowski sum
\(
\simplex_\HH \eqdef \sum_{H\in \HH} \simplex_H\,,
\)
where $\simplex_H$ is the simplex given by the convex hull of the points $\set{\b{e}_h}{h \in H}$ of~$\R^n$.
The \defn{hypergraphic poset}~$P_\HH$ is the transitive closure of the skeleton of~$\simplex_\HH$ oriented in the direction~$\b{\omega} \eqdef (n, n-1, \dots, 2, 1) - (1, 2, \dots, n-1, n) = (n-1, n-3, \dots, 3-n, 1-n)$.
For instance, 
\begin{itemize}
\item if~$\HH = \binom{[n]}{2}$ is the complete graph on~$[n]$ (or any hypergraph containing it), then~$\simplex_\HH$ is the permutahedron and $P_\HH$ is the weak order on permutations,
\item if~$\HH = \set{[a,b]}{1 \le a \le b \le n}$ is the complete interval hypergraph, then~$\simplex_\HH$ is \mbox{J.-L.~Loday's} associahedron~\cite{ShniderSternberg,Loday} and~$P_\HH$ is the Tamari lattice~\cite{Tamari}.
\end{itemize}
In view of these two examples, we consider the following general questions:
\begin{itemize}
\item characterize the hypergraphs~$\HH$ for which $P_\HH$ is a lattice, a distributive lattice, a semidistributive lattice, a congruence-uniform lattice, a (semi-)lattice quotient of the weak order on permutations,
\item when~$P_\HH$ is a semidistributive lattice, describe the lattice quotients of~$P_\HH$ and realize them geometrically.
\end{itemize}
These questions were settled in~\cite{Pilaud-acyclicReorientationLattices} for graphical zonotopes (\ie when~$\HH \subseteq \binom{[n]}{2}$), and also partially studied in~\cite{BarnardMcConville} for graph associahedra~\cite{CarrDevadoss} (\ie when~$\HH$ is the set of all subsets of vertices that induce a connected subgraph of a fixed graph on~$[n]$).

In this paper, we study the case of \defn{interval hypergraphs}~$\II$, \ie when all hyperedges of~$\II$ are intervals of~$[n]$.
Note that this family does not contain the permutahedron, but it contains
\begin{itemize}
\item the classical associahedron of~\cite{ShniderSternberg,Loday} when~$\II$ contains all intervals of~$[n]$,
\item the Pitman--Stanley polytope of~\cite{PitmanStanley} when~$\II$ is the set of all singletons~$\{i\}$ and all initial intervals~$[i]$~for~${i \in [n]}$,
\item the freehedron of~\cite{Saneblidze-freehedron} when~$\II$ is the set of all singletons~$\{i\}$, all initial intervals~$[i]$~for~${i \in [n]}$, and all final intervals~$[n] \ssm [i]$~for~${i \in [n-1]}$,
\item the fertilotopes of~\cite{Defant-fertilitopes} when any two intervals of~$\II$ are either nested or disjoint.
\end{itemize}
We first characterize the interval hypergraphs~$\II$ for which~$P_\II$ is a lattice.

\begin{theoremA}
\label{thm:latticeI}
For an interval hypergraph $\II$, the poset $P_\II$ is a lattice if and only if $\II$ is closed under intersection (\ie $I, J \in \II \Rightarrow I \cap J \in \II \cup \{\varnothing\}$).
\end{theoremA}

\vincent{In progress}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Hypergraphic posets}
\label{sec:HP}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Hypergraphic polytopes}
\label{subsec:D_H}

A \defn{hypergraph} $\HH$ on $[n] \eqdef \{1, \dots, n\}$ is a collection of  subsets of~$[n]$.
By convention, we always assume that~$\HH$ contains all singletons~$\{i\}$ for~$i\in [n]$.
%Following~\cite[Def 2.11]{BenedettiBergeronMachacek}, given an hypergraph $\HH$, we define 
The \defn{hypergraphic polytope}~$\simplex_\HH$ is the Minkowski sum
\[
\simplex_\HH \eqdef \sum_{H\in \HH} \simplex_H\,,
\]
where $\simplex_H$ is the simplex given by the convex hull of the points $\set{\b{e}_h}{h \in H}$ of~$\R^n$.

\begin{example}
\label{ex:DH}
\vincent{This example is taken from~\cite{BenedettiBergeronMachacek}, and does not really illustrates Minkowski sums... we should change it.}
For the hypergraph
%$\HH=\big\{\{1\},\{2\},\{3\},\{4\},\{3,4\},\{1,2,3\}\big\}$,
$\HH=\{ 1, 2, 3, 4, 34, 123 \}$,
we  have
\[
\begin{array}{ccc}
 \begin{tikzpicture}[scale=1,baseline=.5cm]
	\node (1) at (0.6,1.0) {$\scriptstyle e_1$};
	\node (2) at (-.2,-.2) {$\scriptstyle e_2$};
	\node (3) at (1.5,-.2) {$\scriptstyle e_3$};
	\draw [fill=blue!40] (0,0) -- (.6,.75) -- (1.2,0) --(0,0) ; 
\end{tikzpicture} \quad &
 \begin{tikzpicture}[scale=1,baseline=.5cm]
	\node at (-.2,0) {$\scriptstyle e_3$};
	\node at (1.2,.5) {$\scriptstyle e_4$};
	\draw [thick,color=red] (0,0) -- (1,.5 ); 
\end{tikzpicture} \quad &
\begin{tikzpicture}[scale=1,baseline=.5cm]
	\draw [fill=gray!10] (0,0) -- (.6,.75)-- (1.6,1.25) -- (2.2,.5) -- (1.2,0) --(0,0) ; 
	\draw [color=gray!10,fill=blue!20] (0,0) -- (.6,.75) -- (1.2,0) --(0,0) ; 
	\draw [dotted,color=red] (0,0)--(1,.5);
	\draw [dotted,color=blue] (1.6,1.25)--(1,.5)--(2.2,.5);
	\draw (0,0) -- (.6,.75)-- (1.6,1.25) -- (2.2,.5) -- (1.2,0) -- (0,0) ; 
	\draw [thick,color=red!80] (1.2,0) -- (2.2,0.5); 
\end{tikzpicture}\\
\blue{\simplex_{123}}& \red{\simplex_{34}} & \simplex_\HH=\simplex_1+\simplex_2+\simplex_3+\simplex_4+\blue{\simplex_{123}}+ \red{\simplex_{34}}\\
\end{array}
\]
which is a 3-dimensional polytope sitting in $\R^4$.
Note that as~$n \le 9$ in all our examples, we simplify notations and write~$123$ for the set~$\{1,2,3\}$.
\end{example}

\begin{remark}
\label{rem:single}
In~\cite{BenedettiBergeronMachacek}, the authors always assume that for all $i\in[n]$ we have $\{i\}\not\in\HH$ whereas here we took the opposite convention.
When quoting results from~\cite{BenedettiBergeronMachacek}, the reader will have to be mindful of this difference.
As illustrated in \cref{ex:DH}, we point out that $\simplex_{\{i\}}$ is a single point and in the definition of $\simplex_\HH$ it simply translate the polytope in the direction~$\b{e}_i$ but does not affect the  face structure of the polytope.
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Acyclic orientations, increasing flips, and hypergraphic posets} 
\label{subsec:P_H}

We now recall from \cite[Thm.~2.18]{BenedettiBergeronMachacek} a combinatorial model for the graph~$(V_\HH, E_\HH)$ of~$\simplex_\HH$.

\begin{definition}
\label{def:acyclicOrientation}
An \defn{orientation} of~$\HH$ is a map~$O$ from~$\HH$ to~$[n]$ such that~$O(H) \in H$ for all~${H \in \HH}$.
Equivalently, we often represent the orientation~$O$ as the set of pairs~$\set{(O(H),H)}{H \in \HH, \, |H| > 1}$.
The orientation~$O$ is \defn{acyclic} if there is no~$H_1, \dots, H_k$ with~$k \ge 2$ such that~$O(H_{i+1}) \in H_i \ssm \{O(H_i)\}$ for~$i \in [k-1]$ and~$O(H_1) \in H_k \ssm \{O(H_k)\}$.
\end{definition}

\begin{definition}
\label{def:flip}
Two orientations~$O \ne O'$ of~$\HH$ are related by an \defn{increasing flip} if there exist~${1 \le i < j \le n}$ such that for all~$H \in \HH$, 
\begin{itemize}
\item if~$O(H) \ne O'(H)$, then~$O(H) = i$ and~$O'(H) = j$, and
\item if~$\{i,j\} \subseteq H$, then~$O(H) = i \iff O'(H) = j$.
\end{itemize}
\end{definition}

The following correspondance was already observed in~\cite[Thm.~2.18]{BenedettiBergeronMachacek} (it even extends to all faces of~$\simplex_\HH$, but we do not need this level of generality in this paper).
We provide an alternative short proof for convenience.

\begin{proposition}[{\cite[Thm.~2.18]{BenedettiBergeronMachacek}}]
\label{prop:Hgraph}
The graph of~$\simplex_\HH$ oriented in the direction~$\b{\omega}$ is isomorphic to the increasing flip graph on acyclic orientations of~$\HH$.
\end{proposition}

\begin{proof}
Recall that the face of a Minkowski sum~$\sum_i P_i$ minimizing a direction~$\b{v}$ is the Minkowski sum of the faces of the summands~$P_i$ minimizing~$\b{v}$.

The vertex of~$\simplex_H$ minimizing a generic direction~$\b{v}$ is~$\b{e}_i$ for~$i \in H$ such that~$\b{v}_i = \min\set{\b{v}_h}{h \in H}$.
An acyclic orientation of~$\HH$ corresponds to the choice of one vertex in each~$\simplex_H$, and the orientation is acyclic if and only if this choice corresponds to a generic orientation~$\b{v}$, hence to a vertex of~$\simplex_\HH$.

The edges of~$\simplex_H$ are oriented in the directions~$\b{e}_i-\b{e}_j$ for~$i,j \in H$.
The edges of~$\simplex_\HH$ are thus also oriented by $\b{e}_i-\b{e}_j$, and thus correspond to pairs of acyclic orientations which differ by a flip.
\end{proof}

Finally, the main objects of this paper are the following posets.

\begin{definition}
The \defn{hypergraphic poset}~$P_\HH$ is the transitive closure of the increasing flip graph on acyclic orientations of~$\HH$.
\end{definition}

\begin{remark}
\label{rem:edgeNotCover}
It is important to note that the edges in $E_\HH$ are not necessarily cover relations in $P_\HH$.
The simplest example is given by
%$\HH=\big\{\{1\},\{2\},\{3\},\{1,2,3\}\big\}$, 
$\HH=\{ 1, 2, 3, 123 \}$, 
whose hypergraphic polytope~is
\[
	\simplex_\HH=\simplex_1+\simplex_2+\simplex_3+\simplex_{123}=
	\begin{tikzpicture}[scale=.7,baseline=.0cm]
		\node (a) at (0,-1.2) {$\scriptscriptstyle \{(1, 123)\}$};
		\node (b) at (2.7,0) {$\scriptscriptstyle \{(2, 123)\}$};
		\node (c) at (0,1.2) {$\scriptscriptstyle \{(3, 123)\}$};
		\draw [color=blue!40,thick,fill=blue!20] (0,-1)--(0,1)--(1.632,0)--(0,-1) ; 
		\draw [color=red,thick,->] (-.1,-1)--(-.1,1); 
		\draw [color=red,thick,->] (1.832,0)--(.2,1); 
		\draw [color=red,thick,->] (.2,-1)--(1.832,0); 
	\end{tikzpicture}
\]
and clearly the left edge of $\simplex_\HH$ is not a cover relation of~$P_\HH$.
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Surjection map} 
\label{subsec:surjection}

As~$\simplex_\HH$ is a deformed permutahedra (\aka generalized permutahedra~~\cite{Postnikov, PostnikovReinerWilliams}), there is a natural surjection from the faces of the permutahedron to the faces of~$\simplex_\HH$, which was described in details in~\cite[Lem.~2.9]{BenedettiBergeronMachacek}.
Here, we focus on the surjection~$\Or$ from the permutations of $[n]$ to the acyclic orientations of~$\HH$.

\begin{definition}
For a permutation~$\pi$ of~$[n]$, the orientation~$\Or_\pi$ of~$\HH$ is defined for all~$H \in \HH$ by
\[
\Or_\pi(H) \eqdef  \pi\big(\min\set{j}{\pi(j)\in H}\big).
\]
\end{definition}

\begin{proposition}[{\cite[Lem.~2.9]{BenedettiBergeronMachacek}}] ~
\begin{itemize}
\item The map~$\Or$ is a surjection from the permutations of~$[n]$ to the acyclic orientations of~$\HH$.
\item Two acyclic orientations~$A,B$ of~$\HH$ are related by a flip if and only if there are permutations~$\pi_A, \pi_B$ of~$[n]$ which differ by a simple transposition such that~$\Or_{\pi_A} = A$ and~$\Or_{\pi_B} = B$.
\end{itemize}
In other words, the graph~$(V_\HH, E_\HH)$ of~$\simplex_\HH$ is isomorphic to the graph obtained by contracting the fibers of~$\Or$ in the graph of the permutahedron.
\end{proposition}

\begin{corollary}
\label{coro:weakToP}
The map~$\Or$ defines a poset morphism from the weak order on permutations to the hypergraphic poset~$P_\HH$.
\end{corollary}

Finally, we describe the fibers of the surjection~$\Or : \fS_n \to V_\HH$.
Given an acyclic orientation~$A$ of~$\HH$, define $\less_A$ as the order on $[n]$ obtained by the transitive closure of the union of the \linebreak orders $\set{A(H) < h}{h \in H \ssm \{A(H)\}}$ for each $H \in \HH$.
That is
\[
	\less_A =  \bigcup_{H \in \HH} 
	\begin{tikzpicture}[scale=1,baseline=.0cm]
		\node at (0,-.45) {$\scriptstyle A(H)$};
		\node at (0,.6) {$\scriptstyle h \in H \ssm \{A(H)\}$};
		\node at (.2,.35) {$\ldots$};
		\draw [thick] (0,-.3)--(-.5,.4); 
		\draw [thick] (0,-.3)--(-.3,.4); 
		\draw [thick] (0,-.3)--(-.1,.4); 
		\draw [thick] (0,-.3)--(.5,.4); 
	\end{tikzpicture} \,.
\]
This is a well defined order since $A$ is acyclic.
The following lemma is straightforward.

\begin{lemma}
\label{lem:prepi}
For any acyclic orientation $A$ of~$\HH$, the preimage $\Or^{-1}(A) \eqdef \set{\pi}{\Or_\pi=A}$ is the set of linear extensions of~$\less_A$.
\end{lemma}

%In general, given a hypergraph~$\HH$ we would be interested to understand what are the cover of~$P_\HH$? 
%When is $P_\HH$ a lattice? distributive lattice? a semi-lattice? (semi-)lattice quotient of the $fS_n$-weak lattice?
%Can we have a better description of $\Or^{-1}$? and more.

%In the present work we focus our attention to a subfamily of hypergraphs, namely we assume that all $H\in \HH$ are intervals of~$[n]$.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Interval hypergraphic posets}
\label{sec:IHP}

In this paper, we focus on the following family of hypergraphs on~$[n]$.

\begin{definition}
An \defn{interval hypergraph}~$\II$ is an hypergraph on~$[n]$ where each~$I \in \II$ is an interval of the form $I = [a,b] \eqdef \{a, a+1, a+2, \dots, b-1, b\}$.
\end{definition}

\begin{example}
\label{exm:intervalHypergraph}
For instance, 
%$\II = \{\{1\},\{2\},\{3\},\{4\},[1,3],[2,3],[2,4],[1,4]\}$ 
$\II = \{ 1, 2, 3, 4, 1234, 123, 23, 234 \}$ 
is an interval hypergraph and \linebreak
%$\Or_{4132} = \big\{ (4, \{1,2,3,4\}), (1, \{1,2,3\}), (3, \{2,3\}), (4, \{2,3,4\})\big\}$ 
$\Or_{4132} = \{ (4, 1234), (1, 123), (3, 23), (4, 234) \}$ 
is an acyclic orientation of~$\II$.
We will represent interval hypergraphs and their orientations graphically as follow:
\vincent{We should make a command for these drawings.}
\[
	\II =  
	\begin{tikzpicture}[scale=1,baseline=.0cm]
	\foreach \x in {1,...,4}
		\node (\x) at (\x*.5,-.4) [inner sep = -1pt] {$\scriptstyle \x$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.5,-.2)--(2,-.2); 
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.5,0)--(1.5,0); 
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (1,.2)--(1.5,.2); 
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (1,.4)--(2,.4); 
	\end{tikzpicture}
	\qquad\qquad
	\Or_{4132}  =  
	\begin{tikzpicture}[scale=1,baseline=.0cm]
	\foreach \x in {1,...,4}
		\node (\x) at (\x*.5,-.4) [inner sep = -1pt] {$\scriptstyle \x$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.5,-.2)--(2,-.2); \node at (2,-.2) {$\bullet$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.5,0)--(1.5,0); \node at (.5,0) {$\bullet$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (1,.2)--(1.5,.2); \node at (1.5,.2) {$\bullet$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (1,.4)--(2,.4); \node at (2,.4) {$\bullet$};
	\end{tikzpicture}
\]
and we omit to draw the singleton $\{i\}$ for $i \in [n]$.
\end{example}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Acyclic orientations and flips for interval hypergraphs}
\label{subsec:acyclicI}

In this section we give a simple characterization of the acyclic orientations and the flips between them for an interval hypergraph~$\II$.

\begin{proposition}
\label{prop:acyclicI}
An orientation~$O$ of an interval hypergraph~$\II$ is acyclic if and only if there is no distinct~$I,J \in \I$ such that~$O(I) \in J \ssm \{O(J)\}$ and~$O(J) \in I \ssm \{O(I)\}$.
Graphically, there is no pattern
 \[
	\begin{tikzpicture}[scale=1,baseline=.0cm]
	%
	\node at (-.5,0.2) {$\scriptscriptstyle J$}; 
	\node at (-.1,0.2) {$\scriptstyle \cdot$};
	\node at (0,0.2) {$\scriptstyle \cdot$};
	\node at (.1,0.2) {$\scriptstyle \cdot$};
	\draw [thick] (.2,.2)--(1.8,.2);
	\node at (1.9,.2) {$\scriptstyle \cdot$};
	\node at (2,.2) {$\scriptstyle \cdot$};
	\node at (2.1,.2) {$\scriptstyle \cdot$};
	\node at (1.5,.2) {$\bullet$};
	%
	\node at (-.5,0) {$\scriptscriptstyle I$};
	\node at (-.1,0) {$\scriptstyle \cdot$};
	\node at (0,0) {$\scriptstyle \cdot$};
	\node at (.1,0) {$\scriptstyle \cdot$};
	\draw [thick] (.2,0)--(1.8,0);
	\node at (1.9,0) {$\scriptstyle \cdot$};
	\node at (2,0) {$\scriptstyle \cdot$};
	\node at (2.1,0) {$\scriptstyle \cdot$};
	\node at (.5,0) {$\bullet$};
	%
	\node at (.5,-.2) {$\scriptscriptstyle i$};
	\node at (1.5,-.2) {$\scriptscriptstyle j$}; 
	\end{tikzpicture}
\]
\end{proposition}

\begin{proof}
If the orientation~$O$ contains this pattern, it is clearly not acyclic.
Conversely, assume that~$O$ is not acyclic.
Then we can find $I_1, \dots, I_k \in \II$ with~$k \ge 2$ such that~$O(I_{i+1}) \in I_i \ssm \{O(I_i)\}$ for~$i \in [k-1]$ and~$O(I_1) \in I_k \ssm \{O(I_k)\}$.
Graphically
\[
	\begin{tikzpicture}[scale=1,baseline=.0cm]
	\node at (-.5,1) {$\scriptscriptstyle I_k$};
	\draw [thick,{Bar[width=3pt]}-] (.3,1)--(1.2,1);
	\node at (1.3,1) {$\scriptstyle \cdot$};
	\node at (1.4,1) {$\scriptstyle \cdot$};
	\node at (1.5,1) {$\scriptstyle \cdot$};
	\node at (1,0.9) {$\scriptstyle \cdot$};
	\node at (1.1,0.8) {$\scriptstyle \cdot$};
	\node at (1.2,0.7) {$\scriptstyle \cdot$}; 
	%
%	\node at (-.5,0.6) {$\scriptscriptstyle I_4$};
%	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (2,.6)--(3,.6);
%	\node at (2.5,.6) {$\bullet$};
	%
	\node at (-.5,0.4) {$\scriptscriptstyle I_3$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (2.5,.4)--(4.5,.4);
	\node at (3.5,.4) {$\bullet$};
	%
	\node at (-.5,0.2) {$\scriptscriptstyle I_2$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (1,.2)--(4,.2);
	\node at (1.5,.2) {$\bullet$};
	%
	\node at (-.5,0) {$\scriptscriptstyle I_1$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,0)--(1.5,0);
	\node at (.5,0) {$\bullet$};
	\end{tikzpicture}
\]
Assume that~$k > 2$ and that is minimal for this property.
Note that~$O(I_i) \ne O(I_{i+1})$ for all~$i$.
By symmetry, suppose~$O(I_1) < O(I_2)$.
If there is~$1 \le i \le k-1$ such that~$O(I_{i+1}) < O(I_i)$, then for the smallest such~$i$, we have
\begin{itemize}
\item either~$O(I_{i-1}) \in [O(I_{i+1}), O(I_i)] \subseteq I_i$, so that~$O(I_{i-1}) \in I_i$ and $O(I_i) \in I_{i-1}$,
\item or~$O(I_{i+1}) \in [O(I_{i-1}), O(I_i)] \subseteq I_{i-1}$, so that we can drop~$I_i$ from our sequence, contradicting the minimality of~$k$.
\end{itemize}
We thus obtain~$O(I_1) < \dots < O(I_k)$.
As~$O(I_1) \in I_k$, we get~$O(I_{k-1}) \in [O(I_1), O(I_k)] \subseteq I_k$, so that~$O(I_{k-1}) \in I_k$ and~$O(I_k) \in I_{k-1}$.
\end{proof}

\begin{proposition}
\label{prop:isFlipI}
The orientation obtained from an acyclic orientation~$A$ of an interval hypergraph~$\II$ by flipping~$i$ to~$j$ (in the sense of \cref{def:flip}) is acyclic if and only if~$j \in \cX_{A,i} \ssm \cY_{A,i}$~where
\[
\cX_{A,i} \eqdef \bigcup_{\substack{I \in \II \\ A(I) = i}} I \ssm \{i\}
\qquad\text{and}\qquad
\cY_{A,i} \eqdef \bigcup_{\substack{J \in \II \\ A(J) \in \cX_{A,i}}} \!\!\!\! \big( J \ssm \{A(J)\} \big).
\]
\end{proposition}

\begin{proof}
Let~$B$ be the orientation obtained by flipping~$i$ to~$j$.
Assume that~$j \notin \cX_{A,i} \ssm \cY_{A,i}$. Then
\begin{itemize}
\item either~$j \notin \cX_{A,i}$, hence there is no~$I \in \II$ with~$i = A(I)$ and~$j \in I$, and the flip is not~possible. % (\ie~$A = B$).
\item or~$j \in \cX_{A,i} \cap \cY_{A,i}$. Since~$j \in \cX_{A,i}$, there is~$I \in \II$ with~$A(I) = i$ and~$j \in I \ssm \{i\}$. Since~$j \in \cY_{A,i}$, there is~$J \in \II$ with~$k \eqdef A(J) \in \cX_{A,i}$ and~$j \in J \ssm \{k\}$. As~$k \in \cX_{A,i}$, there is also~$K \in \II$ such that~$A(K) = i$ and~$k \in K \ssm \{i\}$. We now consider the three distinct values~$i, j, k$ and distinguish three cases depending on which is in between the other two:
	\begin{itemize}
	\item if~$i$ is in between~$j$ and~$k$, then~$i \in J$ since~$j,k \in J$ and~$J$ is an interval. Hence, $A(K) = i \in J$ and~$A(J) = k \in K$ and~$i \ne k$ contradicts the acyclicity of~$A$.
	\item if~$j$ is in between~$i$ and~$k$, then~$i \in K$ since~$i,k \in K$ and~$K$ is an interval. Hence, $B(K) = j \in J$ and~$B(J) = k \in K$ and~$j \ne k$, so that~$B$ is cyclic.
	\item if~$k$ is in between~$i$ and~$j$, then~$k \in I$ since~$i,j \in I$ and~$I$ is an interval. Hence, $B(I) = j \in J$ and~$B(J) = k \in I$ and~$j \ne k$, so that~$B$ is cyclic.
	\end{itemize}
\end{itemize}
Conversely, assume that~$B$ is cyclic.
By \cref{prop:acyclicI}, there are~$I,J \in \II$ with~$B(I) \in J \ssm \{B(J)\}$ and~$B(J) \in I \ssm \{B(I)\}$.
As~$A$ is acyclic, we have~$i = A(I) \ne B(I) = j$ or~$i = A(J) \ne B(J) = j$, but not both since~$B(I) \ne B(J)$.
By symmetry, we can assume that~$i = A(I) \ne B(I) = j$ and~$i \ne A(J) = B(J)$.
As~$A(I) = i$ and~$i \ne A(J) = B(J) \in I$, we obtain that~$A(J) \in \cX_{A,i}$.
Moreover~$j = B(I) \in J \ssm \{B(J)\} = J \ssm \{A(J)\}$.
Hence, we obtain that~$j \in \cY_{A,i}$.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Fibers of $\Or$ for interval hypergraphs} 
\label{subsec:preimageI}

One striking property for interval hypergraphs is that the fibers of the surjection~$\Or$ are intervals in the weak order.
To describe this we first need to recall the following classical result of A.~Bj\"orner and M.~Wachs~\cite[Thm.~6.8]{BjornerWachs}

\begin{proposition}[{\cite[Thm.~6.8]{BjornerWachs}}]
\label{prop:WOIP}
The set of linear extensions of a poset~$\less$ on~$[n]$ forms an interval~$[\sigma, \tau]$ of the weak order if and only if ${a \less c \implies a \less b \text{ or } b \less c}$, and~${a \more c \implies a \more b \text{ or } b \more c}$, for every~$1 \le a < b < c \le n$.
%for every~$1 \le a < b < c \le n$,
%\[
%a \less c \implies a \less b \text{ or } b \less c
%\qquad\text{and}\qquad
%a \more c \implies a \more b \text{ or } b \more c.
%\]
Moreover, the inversions of~$\sigma$ are the pairs~$(b,a)$ with~$a < b$ and~$a \more b$, and the non-inversions of~$\tau$ are the pairs~$(a,b)$ with~$a < b$ and~$a \less b$.
\end{proposition}

This statement was refined in~\cite{ChatelPilaudPons} to describe Tamari interval posets.

\begin{proposition}
\label{prop:TOIP}
The set of linear extensions of a poset~$\less$ on~$[n]$ forms an interval~$[\sigma, \tau]$ of the weak order such that~$\sigma$ avoids the pattern $231$ and $\tau$ avoids the pattern $213$ if and only if~${a \less c \implies a \less b}$ and~$a \more c \implies b \more c$ for every~$1 \le a < b < c \le n$.
%for every~$1 \le a < b < c \le n$,
%\[
%a \less c \implies a \less b
%\qquad\text{and}\qquad
%a \more c \implies b \more c.
%\]
\end{proposition}

\begin{proposition}
\label{prop:preimageI}
The fiber~$\Or^{-1}(A)$ of any acyclic orientation~$A$ of an interval hypergraph~$\II$ is an interval of the weak order with minimum avoiding the pattern $231$ and maximum avoiding the pattern $213$.
\end{proposition}

\begin{proof}
From \cref{lem:prepi}, the fiber~$\Or^{-1}(A)$ is the set of linear extensions of $\less_A$, so that we use the characterization of \cref{prop:TOIP} to prove \cref{prop:preimageI}.
Let $1 \le a < b < c \le [n]$.
If we have $a \less_{A} c$, then, by definition of $\less_A$, there must be a sequence $I_1, \dots, I_k \in \II$ such that~$a = A(I_1)$, $A(I_{i+1}) \in I_i$ for all~$i \in [k-1]$, and~$c \in I_k$.
As $\bigcup_{i \in [k]} I_i$ is an interval containing~$a$ and~$c$ and~$a < b < c$, it contains also~$b$.
Hence, there is~$i \in [k]$ such that~$c \in I_i$, and the sequence~$I_1, \dots, I_i$ proves that~$a \less_{A} b$.
The case $a \more_{A} c$ is similar and  implies that $b \more_A c$.
\end{proof}

\begin{remark}
\cref{prop:preimageI} fails for arbitrary hypergraphs~$\HH$, for instance for~$\HH \eqdef \{1,2,3,13\}$, there are two fibers~$\{123, 213, 132\}$ and~$\{231, 312, 321\}$ which are not intervals of the weak order.
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{A source characterization of $P_\II$}  
\label{subsec:sourceAcyclicI}

We now characterize the comparisons in the poset $P_\II$ in terms of the comparisons of the sources for each $I\in \II$.

\begin{proposition}
\label{prop:sourceOrderI}
For any acyclic orientations~$A$ and~$B$ of an interval hypergraph~$\II$,
\[
A \le B \quad \iff \quad A(I) \le B(I) \text{ for all } I \in \II .
\]
\end{proposition}

\begin{proof}
The forward direction is immediate as it holds for cover relations of~$P_\II$ by \cref{def:flip}.
For the backward direction, assume that~$A(I) \le B(I)$ for all~$I \in \II$.
The proof works by induction on~$|\set{I \in \II}{A(I) < B(I)}|$.

%Consider the set of pairs~$1 \le i < j \le$ such that there is~$I \in \II$ with~$A(I) = i$ and~$B(I) = j$.
%Choose~$i < j$ in this set such that~$j$ is maximal, and if draw, $i$ is maximal.
Choose~$J \in \II$ such that~$A(J) < B(J)$ and for any~$I \in \II$ with~$A(I) < B(I)$, we have~$B(I) < B(J)$, or~$B(I) = B(J)$, then~$A(I) \le A(J)$.

Let~$O$ be the orientation of~$\I$ obtained from~$A$ by flipping~$A(J)$ to~$B(J)$.
We claim that~$O$ is acyclic and that~$O(I) \le B(I)$ for all~$I \in \II$. 
We conclude by induction that~$O \le B$, and thus~$A \le O \le B$ as desired.

We first prove that~$O$ is acyclic.
Otherwise, we would have~$I,I' \in \II$ such that~$O(I) \in I' \ssm \{O(I')\}$ and~$O(I') \in I \ssm \{O(I)\}$.
As~$A$ is acyclic, we have~$A(I) \ne O(I)$ or~$A(I') \ne O(I')$, but not both since~$O(I) \ne O(I')$.
Hence, we can assume by symmetry that~$O(I) = A(I)$ while~$A(I') = A(J)$ and~$O(I') = B(J)$.
Up to updating~$J$ to~$I'$, we can thus also assume that~$I' = J$.
As~$B$ is acyclic, we have~$B(I) \ne O(I)$.
Since~$A(I) = O(I) \ne B(I)$, our choice of~$J$ ensures that
\begin{itemize}
\item either~$B(I) < B(J)$. 
We then obtain that~$A(I) \le B(I) < B(J)$.
As~$A(I) = O(I) \in I' = J$ and~$B(J) \in J$, we thus get that~$B(I) \in J$.
Moreover, $B(J) = O(I') \in I$.
As~$B(I) \ne B(J)$, we obtain a contradiction with the acyclicity of~$B$.
\item or~$B(I) = B(J)$ and~$A(I) \le A(J)$.
We then have~$A(I) \le A(J) \le B(J) = B(I)$ so that~$A(J) \in I$.
As~$A(I) = O(I) \in I' = J$ and~$A(I) \ne A(J)$, we obtain a contradiction with the acyclicity of~$A$.
\end{itemize}

We now prove that~$O(I) \le B(I)$ for all~$I \in \II$.
We thus consider~$I \in \II$ and distinguish two cases:
\begin{itemize}
\item Assume first that~$A(I) = A(J)$ and~$B(J) \in I$. By \cref{def:flip}, we then have~${O(I) = B(J)}$. Moreover, as~$I$ is an interval and contains~$A(J)$ and~$B(J)$, it contains~$[A(J), B(J)] \subseteq J$. As~$B$ is acyclic, this implies that~$B(I) \notin {[A(J), B(J)[}$. As~$A(J) = A(I) \le B(I)$, we thus obtain that~$O(I) = B(J) \le B(I)$.
\item Otherwise, we have~$O(I) = A(I) \le B(I)$.
\qedhere
\end{itemize}
\end{proof}

\vincent{Does \cref{prop:sourceOrderI} holds for general hypergraphs? I guess not, but I want an example... I believe that this question is really important.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Flips and cover relations for interval hypergraphs}  
\label{subsec:cover}

In this section, we describe the cover relations of~$P_\II$ for an interval hypergraph~$\II$.

\begin{proposition}
\label{prop:isCoverI}
\vincent{todo}
\end{proposition}

\begin{proof}
%Let~$B$ (resp.~$C$) be the acyclic orientation obtained from~$A$ by flipping~$j \eqdef \min (\cX_{A,i} \ssm \cY_{A,i}) \ssm [i]$ (resp.~some~$k \in (\cX_{A,i} \ssm \cY_{A,i}) \ssm \{k\}$).
%For any~$I \in \I$, we have~$B(I) = j$ if~$A(I) = i$ and~$j \in I$, while~$B(I) = A(I)$ otherwise, and~$C(I) = k$ if~$A(I) = i$ and~$k \in I$, while~$C(I) = A(I)$ otherwise.
%If~$A(I) \ne B(I)$, then we have~$B(I) = j$ and~$\{i,j\} \subseteq I$, so that~$\{i,j\} \subseteq I$ (since~$i < j < k$ and~$I$ is an interval), so that~$B(I) = j < k = C(I)$.
%Otherwise, we have~$B(I) = A(I) \le C(I)$.
%Hence, we obtain that
%
%
%Let~$B$ (resp.~$C$) be the acyclic orientation obtained from~$A$ by flipping~$i$ to~$j$ (resp.~to~$k \eqdef \min (\cX_{A,i} \ssm \cY_{A,i}) \ssm [i]$).
%
%
%
%Assume first that~$j \ne k$.
%If~$j < i$, then the flip from~$A$ to~$B$ is decreasing.
%Otherwise, let~$C$ he the acyclic orientation obtained from~$A$ by flipping~$i$ to~.
%
%Assume that~$j = \min (\cX_{A,i} \ssm \cY_{A,i}) \ssm [i]$, then \cref{prop:isFlipI} ensures that for any acyclic orientation~$C$ obtained by an increasing flip from~$A$, we have
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Interval hypergraphic lattices}
\label{sec:LatticePI}

In this section, we  prove  \cref{thm:latticeI} characterizing the interval hypergraphs $\II$ for which $P_\II$ are lattices.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{If $P_\II$ is a lattice, then $\II$ is closed under intersection}  
\label{subsec:latticeForward}

We are now ready to show the forward implication of \cref{thm:latticeI}.

\begin{proposition}
\label{prop:latticeForward}
If~$\II$ is an interval  hypergraph such that the poset $P_\II$ is a lattice, then $\II$ is closed under intersection.
\end{proposition}

\begin{proof}
By contradiction, assume we have $I,J\in \II$ such that $\varnothing  \not = I\cap J\not\in \II$.
Let
\begin{alignat*}{6}
& a \eqdef b-1, &
\qquad
& b \eqdef \min(I\cap J), &
\qquad
& c \eqdef \max(I\cap J), &
\qquad
& d \eqdef c+1. &
\intertext{
Note that $b\ne c$ since~$\II$ contains all singletons, hence~$a < b < c < d$.
By symmetry, we assume that $a\in I\ssm J$ and $d\in J\ssm I$.
Let $X$ be the word formed by the complement of $\{a,b,c,d\}$ in~$[n]$ written in increasing order.
We now construct four permutations 
}
& \pi_A \eqdef bacdX, &
\qquad
& \pi_B \eqdef acdbX,&
\qquad
& \pi_C \eqdef dbacX, &
\qquad
& \pi_D \eqdef cdbaX, &
\intertext{
and consider the four distinct acyclic orientations
}
& A \eqdef \Or_{\pi_A}, &
\qquad
& B \eqdef \Or_{\pi_B}, &
\qquad
& C \eqdef \Or_{\pi_C}, &
\qquad
& D \eqdef \Or_{\pi_D}. &
\intertext{
We display below the four orientations highlighting only the intervals $I$ and $J$:
}
&
	A =  
	\begin{tikzpicture}[scale=1,baseline=.0cm]
	\node at (-.3,.3) {$\scriptstyle I$}; \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,.3)--(1.2,.3);   \node at (.3,.3) {$\bullet$};
	\node at (-.3,0) {$\scriptstyle J$};  \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.3,0)--(1.5,0);   \node at (.3,0) {$\bullet$};
	\node at  (0,-.3) {$\scriptstyle a$};
	\node at  (.3,-.3) {$\scriptstyle b$};
	\node at  (1.2,-.3) {$\scriptstyle c$};
	\node at  (1.5,-.3) {$\scriptstyle d$};
	\end{tikzpicture} 
&&
	B =
	\begin{tikzpicture}[scale=1,baseline=.0cm]
	\node at (2,.3) {$\scriptstyle I$}; \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,.3)--(1.2,.3);   \node at (0,.3) {$\bullet$};
	\node at (2,0) {$\scriptstyle J$};  \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.3,0)--(1.5,0);   \node at (1.2,0) {$\bullet$};
	\node at  (0,-.3) {$\scriptstyle a$};
	\node at  (.3,-.3) {$\scriptstyle b$};
	\node at  (1.2,-.3) {$\scriptstyle c$};
	\node at  (1.5,-.3) {$\scriptstyle d$};
	\end{tikzpicture} 
&&
	C =  
	\begin{tikzpicture}[scale=1,baseline=.0cm]
	\node at (-.3,.3) {$\scriptstyle I$}; \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,.3)--(1.2,.3);   \node at (.3,.3) {$\bullet$};
	\node at (-.3,0) {$\scriptstyle J$};  \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.3,0)--(1.5,0);   \node at (1.5,0) {$\bullet$};
	\node at  (0,-.3) {$\scriptstyle a$};
	\node at  (.3,-.3) {$\scriptstyle b$};
	\node at  (1.2,-.3) {$\scriptstyle c$};
	\node at  (1.5,-.3) {$\scriptstyle d$};
	\end{tikzpicture} 
&&
	D =
	\begin{tikzpicture}[scale=1,baseline=.0cm]
	\node at (2,.3) {$\scriptstyle I$}; \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,.3)--(1.2,.3);   \node at (1.2,.3) {$\bullet$};
	\node at (2,0) {$\scriptstyle J$};  \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.3,0)--(1.5,0);   \node at (1.2,0) {$\bullet$};
	\node at  (0,-.3) {$\scriptstyle a$};
	\node at  (.3,-.3) {$\scriptstyle b$};
	\node at  (1.2,-.3) {$\scriptstyle c$};
	\node at  (1.5,-.3) {$\scriptstyle d$};
	\end{tikzpicture} 
&
\end{alignat*}
%\[
%\begin{array}{lcr}
%	C =  
%	\begin{tikzpicture}[scale=1,baseline=.0cm]
%	\node at (-.3,.3) {$\scriptstyle I$}; \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,.3)--(1.2,.3);   \node at (.3,.3) {$\bullet$};
%	\node at (-.3,0) {$\scriptstyle J$};  \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.3,0)--(1.5,0);   \node at (1.5,0) {$\bullet$};
%	\node at  (0,-.3) {$\scriptstyle a$};
%	\node at  (.3,-.3) {$\scriptstyle b$};
%	\node at  (1.2,-.3) {$\scriptstyle c$};
%	\node at  (1.5,-.3) {$\scriptstyle d$};
%	\end{tikzpicture} 
%	&\qquad\quad&
%	\begin{tikzpicture}[scale=1,baseline=.0cm]
%	\node at (2,.3) {$\scriptstyle I$}; \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,.3)--(1.2,.3);   \node at (1.2,.3) {$\bullet$};
%	\node at (2,0) {$\scriptstyle J$};  \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.3,0)--(1.5,0);   \node at (1.2,0) {$\bullet$};
%	\node at  (0,-.3) {$\scriptstyle a$};
%	\node at  (.3,-.3) {$\scriptstyle b$};
%	\node at  (1.2,-.3) {$\scriptstyle c$};
%	\node at  (1.5,-.3) {$\scriptstyle d$};
%	\end{tikzpicture} 
%	= D 
%	\\ \\
%	A =  
%	\begin{tikzpicture}[scale=1,baseline=.0cm]
%	\node at (-.3,.3) {$\scriptstyle I$}; \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,.3)--(1.2,.3);   \node at (.3,.3) {$\bullet$};
%	\node at (-.3,0) {$\scriptstyle J$};  \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.3,0)--(1.5,0);   \node at (.3,0) {$\bullet$};
%	\node at  (0,-.3) {$\scriptstyle a$};
%	\node at  (.3,-.3) {$\scriptstyle b$};
%	\node at  (1.2,-.3) {$\scriptstyle c$};
%	\node at  (1.5,-.3) {$\scriptstyle d$};
%	\end{tikzpicture} 
%	&\qquad\quad&
%	\begin{tikzpicture}[scale=1,baseline=.0cm]
%	\node at (2,.3) {$\scriptstyle I$}; \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,.3)--(1.2,.3);   \node at (0,.3) {$\bullet$};
%	\node at (2,0) {$\scriptstyle J$};  \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.3,0)--(1.5,0);   \node at (1.2,0) {$\bullet$};
%	\node at  (0,-.3) {$\scriptstyle a$};
%	\node at  (.3,-.3) {$\scriptstyle b$};
%	\node at  (1.2,-.3) {$\scriptstyle c$};
%	\node at  (1.5,-.3) {$\scriptstyle d$};
%	\end{tikzpicture} 
%	= B
%\end{array}
%\]
We have that $\pi_A < \pi_C$, $\pi_A < \pi_D$ and $\pi_B < \pi_D$ in the weak order.
\cref{coro:weakToP} implies that $A < C$, $A < D$ and $B < D$ in~$P_\II$.
We moreover claim that $B < C$  but this does not follow directly from the weak order since $\pi_B\not<\pi_C$.
To show our claim, consider $\pi_E=adcbX$ and $\pi_F=adbcX$.
For any $K\in \II$ such that $a,d\not\in K$, we cannot have both $c,d\in K$, since this would imply that $K=[c,d]=I\cap J\not\in \II$, a contradiction.
This shows that $E=\Or_{\pi_E}=\Or_{\pi_F}=F$.
Now we have $\pi_B<\pi_E$ and $\pi_F<\pi_C$ which gives $B<E=F<C$.
 
 If the poset $P_\II$ is a lattice and~$A \le C$ $A \le D$, $B \le C$ and~$B \le D$, there is~$M$ such that~$A \le M$, $B \le M$, $M \le C$ and~$M \le D$ (anything between~$A \join B$ and~$C \meet D$ works).
%If the poset $P_\II$ is a lattice, then we can find a unique join $M= A \join B$.
%\vincent{I don't like that the join is called~$M$. We cannot call it~$J$ as it was used before. Maybe we could take the meet~$C \meet D$ instead, it does not change anything...}
%By definition $A\le M$ and $B\le M$.
%By property of join we also have $M\le C$ and $M\le D$ since both $C$ and $D$ are  greater than $A$ and $B$.
Let $\pi_M$ be any permutation such that $M=\Or_{\pi_M}$ and let  
\[
m=\pi \big( \min\set{i}{\pi_M(i)\in I\cup J} \big).
\]
If $m<b$, then $M(I) = m < b = A(I)$ and the easy forward implication of \cref{prop:sourceOrderI} implies that $A\not\le M$.
By similar arguments $b\le m<c$ would imply~$B\not\le M$, $b< m\le c$ would imply~$M\not\le C$, and $c<m$ would imply~$M\not\le D$.
This is a contradiction to the existence of $m$.
\end{proof}

\begin{remark}
\cref{prop:latticeForward} fails when~$\HH$ is not an interval hypergraph.
For instance, the hypergraph~$\HH \eqdef \{ 1, 2, 3, 4, 5, 1234, 2345, 23, 24, 34 \}$ is not closed by intersection, while its hypergraphic poset~$P_\HH$ is a lattice.
% sage: HypergraphicalPolytopes([[1,2,3,4], [2,3,4,5], [2,3], [2,4], [3,4]]).hypergraphical_poset().is_lattice()
% True
\vincent{Maybe we could draw this lattice. It has 24 elements.}
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Properties of $P_\II$ when~$\II$ is closed under intersection}  
\label{subsec:IntClosedI}

For the converse of \cref{thm:latticeI}, we need to investigate the properties of interval hypergraphs that are closed under intersection.
Recall from \cref{prop:preimageI} that the fiber $\Or^{-1}(A)$ of any acyclic orientation~$A$ of~$\II$ is an interval~$[\projDown_A,\projUp_A]$ in the weak order.
In the following we will keep this convention that $\projDown_A$ denote the minimum of this interval and $\projUp_A$ the maximum of~$\Or^{-1}(A)$.

\begin{theorem}
\label{thm:propertiesI}
If $\II$ is an interval  hypergraph closed under intersection, then the following are equivalent for two acyclic orientations $A$ and $B$ of $\II$:
\begin{enumerate}[(a)]
	\item $A\le B$ in $P_\II$,
	\item $A(I) \le B(I)$ for all $I\in\II$,
	\item $\projDown_A \le \projUp_B$ in the weak order,
	\item $i \more_A j$ implies~$i \not\less_B j$ for all $i<j$.
\end{enumerate}
\end{theorem}

\begin{proof}
The equivalence \mbox{(a)$\iff$(b)} was established in \cref{prop:sourceOrderI}.

For the equivalence \mbox{(c)$\iff$(d)}, remark that \cref{prop:preimageI} combined with \cref{prop:WOIP} gives us that the set of inversions of $\projDown_A$ is $\set{(j,i)}{i<j, \, i \more_A j}$ 
%and the set of non-inversions of $\projUp_B$ is  $\set{(i,j)}{i<j, \, i \less_B j}$.
while the inversion set of $\projUp_B$ is  given $\set{(j,i)}{i<j, \, i \not\less_B j}$.
The equivalence of \mbox{(c)$\iff$(d)} is thus the characterization of the weak order in terms of inclusion of inversion sets.

The implication \mbox{(c)$\implies$(a)} follows from  \cref{coro:weakToP}.
Thus we only need to prove \mbox{(b)$\implies$(d)}.

For a contradiction, assume that $A\le B$ and we have some $i<j$ such that $i \more_A j$ and~$i \less_B j$.
Choose one such pair such that $|j-i|$ is minimal.
Since $i \more_A j$ there are~$I_1, \dots, I_k \in \II$ such that~$j = A(I_1)$, $O(I_{p+1}) \in I_p$ for all~$p \in [k-1]$, and~$i \in I_k$.
Since $i \less_B j$ there are~$J_1, \dots, J_\ell \in \II$ such that~$i = B(J_1)$, $O(J_{q+1}) \in J_q$ for all~$q \in [\ell-1]$, and~$j \in J_\ell$.

\vincent{End of the proof needs to be worked out...}
we can find $\{(j_s,I_{s})\}\subseteq A$ such that $j=j_1>j_2>\cdots>j_m>i$, each $j_{s+1}\in I_s$ and $i\in I_m$, and $\{(i_r,I_{r})\}\subseteq B$ such that $i=i_1<i_2<\cdots<i_p<j$, each $i_{r+1}\in I_r$ and $j\in I_p$.
Remark that $i<j_m$ with $j_m\less_A i$ and $i\less_B j_m$, since $j_m\in \bigcup_{1\le r\le p}I_r\supseteq [i,j]$.
Our choice of minimality of $|i-j|$ prevent $m>1$.
A similar argument in the other direction shows that we must have $p=1$.

If we have $i<j$ such that $j\less_Ai$ and  $i \less_B j$, then if we choose $|j-i|$ minimal, we can find be $(j,J)\in A$ such that $i\in J$ and $(i,I)\in B$ such that $j\in B$.
Since $A\le B$, using \cref{prop:sourceOrderI}, we must have that $S(I,A)\le S(I,B)=i$.
In this case it must be that $S(I,A)<\min(J)$, otherwise it would be a cycle.
Similarly, $S(J,B)\ge S(J,A)=j$ implies $S(J,B)>\max(I)$.
We habe that $\II$ is closed under intersection, therefore $K=I\cap J\in \II$.
Remark that $[i,j]\subseteq K$.
In $A$, we must have $S(K,A)=j$ otherwise we would get a cycle with $(j,J)$.
Similarly in $B$ we must have $S(K,B)=i$.
The situation is depicted as follow.
\[
\begin{array}{lcr}
	A =  
	\begin{tikzpicture}[scale=1,baseline=-.1cm]
	\node at (-.5,.3) {$\scriptstyle J$};
	\draw [thick,{Bar[width=3pt]}-] (.5,.3)--(2.4,.3);
	\node at (1.8,.3) {$\bullet$};
	\node at (2.5,.3) {$\scriptstyle \cdot$};
	\node at (2.6,.3) {$\scriptstyle \cdot$};
	\node at (2.7,.3) {$\scriptstyle \cdot$};
	%
	\node at (-.5,0) {$\scriptstyle I$};
	\node at (-.2,0) {$\scriptstyle \cdot$};
	\node at (-.1,0) {$\scriptstyle \cdot$};
	\node at (0,0) {$\scriptstyle \cdot$};
	\draw [thick,-{Bar[width=3pt]}] (.1,0)--(2,0);
	\node at (.3,0) {$\bullet$};
	%
	\node at (-.5,-.3) {$\scriptstyle I\cap J$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.5,-.3)--(2,-.3);
	\node at (1.8,-.3) {$\bullet$};
	%
	\node at  (.7,-.6) {$\scriptstyle i$};
	\node at  (1.8,-.6) {$\scriptstyle j$};
	\end{tikzpicture} 
	&\qquad\quad&
	\begin{tikzpicture}[scale=1,baseline=-.1cm]
	\node at (-.5,.3) {$\scriptstyle J$};
	\draw [thick,{Bar[width=3pt]}-] (.5,.3)--(2.4,.3);
	\node at (2.2,.3) {$\bullet$};
	\node at (2.5,.3) {$\scriptstyle \cdot$};
	\node at (2.6,.3) {$\scriptstyle \cdot$};
	\node at (2.7,.3) {$\scriptstyle \cdot$};
	%
	\node at (-.5,0) {$\scriptstyle I$};
	\node at (-.2,0) {$\scriptstyle \cdot$};
	\node at (-.1,0) {$\scriptstyle \cdot$};
	\node at (0,0) {$\scriptstyle \cdot$};
	\draw [thick,-{Bar[width=3pt]}] (.1,0)--(2,0);
	\node at (.7,0) {$\bullet$};
	%
	\node at (-.5,-.3) {$\scriptstyle I\cap J$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.5,-.3)--(2,-.3);
	\node at (.7,-.3) {$\bullet$};
	%
	\node at  (.7,-.6) {$\scriptstyle i$};
	\node at  (1.8,-.6) {$\scriptstyle j$};
	\end{tikzpicture} 
	=B 
\end{array}
\]
Now we have $S(K,A)=j>i=S(K,B)$ and \cref{prop:sourceOrderI} gives that $A\not\le B$.
A contradiction concluding our proof.
\end{proof}

\begin{remark}
The implication \mbox{(a)$\implies$(c)} in \cref{thm:propertiesI} fails when~$\II$ is not closed under intersection.
For instance, for~$\II = \{123, 234\}$ and the acyclic orientations
\[
\begin{array}{ccccc}
	\begin{tikzpicture}[scale=1,baseline=.2cm]
	\foreach \x in {1,...,4}
		\node (\x) at (\x*.5,-.1) [inner sep = -1pt] {$\scriptstyle \x$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.5,.4)--(1.5,.4);   \node at (.5,.4) {$\bullet$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (1,.2)--(2,.2);   \node at (1.5,.2) {$\bullet$};
	\end{tikzpicture}
     &\qquad \le \qquad\qquad&
	\begin{tikzpicture}[scale=1,baseline=.2cm]
	\foreach \x in {1,...,4}
		\node (\x) at (\x*.5,-.1) [inner sep = -1pt] {$\scriptstyle \x$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.5,.4)--(1.5,.4);   \node at (.5,.4) {$\bullet$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (1,.2)--(2,.2);   \node at (2,.2) {$\bullet$};
	\end{tikzpicture}     
     &\qquad \le \qquad\qquad&
	\begin{tikzpicture}[scale=1,baseline=.2cm]
	\foreach \x in {1,...,4}
		\node (\x) at (\x*.5,-.1) [inner sep = -1pt] {$\scriptstyle \x$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.5,.4)--(1.5,.4);   \node at (1,.4) {$\bullet$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (1,.2)--(2,.2);   \node at (2,.2) {$\bullet$};
	\end{tikzpicture}     \\ \\
     A&&B&&C
\end{array}
\]
we have $[\projDown_A,\projUp_A]=[1324,1342]$, $[\projDown_B,\projUp_B]=[1423,4132]$ and $[\projDown_C,\projUp_C]=[4213,4231]$, so~$\projDown_A\not\le \projUp_C$.
\end{remark} 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{If $\II$ is closed under intersection, then $P_\II$ is a lattice}  
\label{subsec:latticeBackward}

We now conclude the proof of  \cref{thm:latticeI}.
This is a corollary of \cref{thm:propertiesI}.

\begin{proposition}
\label{prop:latticeBackward}
If~$\II$ is an interval  hypergraph closed under intersection, then the poset $P_\II$ is a lattice where
\[
A \join B =\Or_{\projDown_A \join \projDown_B}
\qquad\text{and}\qquad
A \meet B =\Or_{\projUp_A \meet \projUp_B}
\,.
\]
\end{proposition}

\begin{proof}
Consider four acyclic orientations~$A,B,C,D$ of~$\II$ such that $A\le C$, $A\le D$, $B\le C$ and~$B\le D$.
\cref{thm:propertiesI} implies that $\projDown_A \le \projUp_C$, $\projDown_A \le \projUp_D$, $\projDown_B \le \projUp_C$ and $\projDown_B \le \projUp_D$.
Hence
\begin{alignat*}{5}
& \projDown_A \le \projDown_A \join \projDown_B, &
\qquad
& \projDown_B \le \projDown_A \join \projDown_B, &
\qquad
& \projDown_A \join \projDown_B \le \projUp_C, &
\qquad
& \projDown_A \join \projDown_B \le \projUp_D, &
\intertext{which implies by \cref{coro:weakToP} that}
& A \le \Or_{\projDown_A \join \projDown_B}, &
\qquad
& B \le \Or_{\projDown_A \join \projDown_B}, &
\qquad
& \Or_{\projDown_A \join \projDown_B} \le C, &
\qquad
& \Or_{\projDown_A \join \projDown_B} \le D. &
\end{alignat*}
This implies that $A$ and $B$ admit a join
\[
A \join B \le \Or_{\projDown_A \join \projDown_B}.
\]
As~$A \le A\join B$ and $B \le A\join B$, \cref{thm:propertiesI} ensures that $\projDown_A \le \projUp_{A\join B}$ and~$\projDown_B \le \projUp_{A\join B}$, so that~$\projDown_A \join \projDown_B \le \projUp_{A\join B}$. By \cref{coro:weakToP}, this implies
\[
\Or_{\projDown_A \join \projDown_B} \le A \join B.
\]
This shows the result for the join~$\join$.
The proof for the meet~$\meet$ is similar.
\end{proof}

\begin{remark}
\cref{prop:latticeBackward} fails when~$\HH$ is not an interval hypergraph.
For instance, the hypergraph~$\HH \eqdef \{ 1, 2, 3, 4, 12, 13, 24, 34 \}$ is closed by intersection, while its hypergraphic poset~$P_\HH$ is not a lattice.
More generally, all hypergraphs~$\HH$ with~$|H| \le 2$ for all~$H \in \HH$ are closed by intersection (as we assume that~$\{i\} \in \HH$ for all~$i \in [n]$), and the garphical zonotopes whose oriented skeleton is a lattice were characterized in~\cite{Pilaud-acyclicReorientationLattices}.
% sage: HypergraphicalPolytopes([[1,2], [1,3], [2,4], [3,4]]).hypergraphical_poset().is_lattice()
% False
\end{remark}

\begin{remark}
In fact, our proof of \cref{prop:latticeBackward} is a general statement about \defn{quasi lattice maps}.
Namely, if~$L$ is a lattice and~$P$ a poset, and $\Psi : L \to P$ is a poset morphism such that~$\Psi^{-1}(A) = [\projDown_A, \projUp_A]$ is an interval  for all $A\in P$, and $A \le B$ implies $\projDown_A \le \projUp_B$, then $P$ is a lattice where~$A \join B =\Psi(\projDown_A \join \projDown_B)$ and~$A \meet B =\Psi(\projUp_A \meet \projUp_B)$.
Note that lattice maps satisfy the stronger condition that~$A \le B$ implies~$\projDown_A \le \projDown_B$ and~$\projUp_A \le \projUp_B$.
It would be interesting to characterize the quasi lattice maps of the weak order.
Note that the lattice maps where described by N.~Reading in~\cite{Reading-latticeCongruences, Reading-arcDiagrams}.
\end{remark}

\begin{proposition}
\label{prop:joinLattice}
For an interval hypergraph~$\II$ closed under intersection, any acyclic orientations~$A,B$ of~$\II$, and any~${I \in \II}$, we have
\[
%S(I, A \join B) = \min \Big( I \ssm \bigcup_{\substack{(j,J) \in A \cup B \\ \min(I) \le j \le \max(I)}} {[\min J, j[} \Big).
( A \join B)(I) = \min \Big( I \ssm \bigcup {[\min J, j[} \Big).
\]
where the union ranges over~$(j,J) \in A \cup B$ such that~$\min(I) \le j \le \max(I)$.
\end{proposition}

\begin{proof}
\vincent{See Proposition 14 in the notes.}
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Join irreducible acyclic orientations}
\label{sec:joinIrreducibles}

In this section, we assume that~$\II$ is an interval hypergraph closed under intersection so that the hypergraph poset~$P_\II$ is a lattice  by \cref{prop:latticeBackward},.
We describe the join irreducible elements of~$P_\II$, that is, the acyclic orientations~$A$ of~$\II$ which cover a single acyclic orientation~$A_\star$.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Construction}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Characterization}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Interval hypergraphic distributive lattices}
\label{sec:distributive}

In this section, we characterize the interval hypergraphs~$\II$ for which~$P_\II$ is a distributive lattice.
To start, we must have an interval  hypergraph $\II$ that is closed under intersection.
Our first task will be to identify the join irreducible of $P_\II$.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\subsection{Covers in lattice $P_\II$}  
%\label{subsec:LatticeCover}
%
%In \cref{subsec:cover} we describe cover for general interval hypergraph. If $\II$ is closed under intersection the situation is simpler
%\Nantel{do we need this?}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Join irreducibles of lattice $P_\II$}  
\label{subsec:irreducibles}

Fix $\II$ an interval  hypergraph closed under intersection.
Let $O_0$ denote the unique \defn{minimum} of $P_\II$.
Let
\[
\cJ_\II=\bigcup_{I\in \II} I\ssm \{\min(I)\} \,.
\]
For $j\in \cJ_\II$ let
\begin{equation}
\label{eq:mu}
 \mu(j)=\max\big\{ \min(I) \big| \ I\in\II, j\in I\ssm\{\min(I)\}\big\}\,,
\end{equation}
\begin{equation}
\label{eq:nu}
 \nu(j)=\min\big\{ \max(I) \big| \ j\in I\in\II, \min(I)=\mu(j)\big\}\,,
\end{equation}
and
\begin{equation}
\label{eq:nu}
 O_j=\Or_{(\mu(j),\mu(j)+1,\ldots,j)}\,,
\end{equation}
where $(\mu(j),\mu(j)+1,\ldots,j)$ is the cycle permutation
\[
(\mu(j),\mu(j)+1,\ldots,j)= 12\cdots(\mu(j)-1)j\,\mu(j)\cdots (j-1) (j+1)\cdots n
\]
with $j$ place just before $\mu(j)$ and all others in order. We remark that for all $I\in\II$ and $j\in\cJ_\II$
\begin{equation}
\label{eq:sourceOj}
S(I,O_j)=\begin{cases}
	j& \text{if $j\in I$ and $\min(I)=\mu(j)$},\\
	\min(I)& \text{otherwise.}
\end{cases}
\end{equation}

\begin{remark}
\label{rem:munuseg}
For any $j\in \cJ_\II$ and $j\in J\in \II$ such that $j\ne\min(J)$, we have $[\mu(j),\nu(j)]\in \II$ and $[\mu(j),\nu(j)]\subseteq J$.
Indeed, the definition of $\mu(j)$ and $\nu(j)$ ensure that $[\mu(j),\nu(j)]\in \II$, and if we suppose that $[\mu(j),\nu(j)]\not\subseteq J$, then $[\mu(j),\nu(j)]\cap J\in \II$ is strictly smaller than $[\mu(j),\nu(j)]$ a contradiction to the definition of $\mu$ and $\nu$.
\end{remark}

For $i,j\in \cJ_\II$ we say $i\equiv j$ are \defn{irreducible congruent} if $\mu(i)=\mu(j)$ and $\nu(i)=\nu(j)$.

\begin{lemma} \label{lem:irrorder}
 For $i,j\in \cJ_\II$, we have $O_i<O_j$ if and only if $i<j$ and $i\equiv j$.
\end{lemma}

\begin{proof}
\cref{prop:sourceOrderI} gives us that $O_i<O_j$ if and only if
\[
S(I,O_i)=\begin{cases}
	i<j & \text{if $j\in I$ and $\min(I)=\mu(j)$},\\
	\min(I)& \text{otherwise.}
\end{cases}
\]
which is true if $i\equiv j$.
Now if $i\not\equiv j$, then either $\mu(i)\ne \mu(j)$  or  $\nu(i)\ne \nu(j)$.
If $\mu(i)\ne\mu(j)$, then there is $i\in I\in \II$ such that $\min(I)=\mu(i)\ne\mu(j)$ and $S(I,O_i)=i>\min(I)=S(I,O_j)$.
This implies $O_i\not<O_j$ a contradiction.
If $\mu(i)= \mu(j)$  and  $\nu(i)\ne \nu(j)$, then there is $i\in I\in \II$ such that $j\not\in I$, and again $S(I,O_i)=i>\min(I)=S(I,O_j)$, a contradiction.
\end{proof}

\begin{lemma}
\label{lem:irrOj}
	For any $j\in \cJ_\II$, $O_j$ is join irreducible.
\end{lemma}

\begin{proof}
\cref{prop:sourceOrderI} gives that any $A<O_j$ must satisfy
\[
S(I,A)=\begin{cases}
	a<j & \text{if $j\in I$ and $\min(I)=\mu(j)$},\\
	\min(I)& \text{otherwise.}
\end{cases}
\]
\cref{rem:munuseg} ensure that $a$ must be the same for all $I\ni j$ and $\min(I)=\mu(j)$, otherwise $A$ would not be acyclic.
$A=O_0$ is one possibility, otherwise $A=O_a$ for some $0<a<j$.
In \cref{lem:irrorder} we determined exactly the order $P_\II$ restricted
to the set $\{ O_j |\, j=0 \text{ or } j\in \cJ_\II\}$.
We have shown  that $A<O_j$ belong to that set hence the only cover is $O_a<O_j$
such that $a=\max\{ i<j|\, i=0 \text{ or } i\equiv j\}$.
\end{proof}

\begin{lemma}
\label{lem:subirr}
For any $A\in P_\II$,
\[
O_j<A \iff j\le S([\mu(j),\nu(j)] A).
\]
\end{lemma}

\begin{proof}
This is a direct consequence of \cref{prop:sourceOrderI} and \cref{rem:munuseg}.
\end{proof}

\begin{proposition}
Assume that ``given any $I,J\in \II$ such that $I\cap J\ne \varnothing $, $I\not\subseteq J$ and $J\not\subseteq I$, then for all $K\in J$ such that  $I\cap J\subseteq K$ we have $\{\min(K),\max(K)\}\cap K\ne \varnothing $'', then $\{O_j|\,j\in \cJ_\II\}$ are the only join irreducible of $P_\II$.
\end{proposition}

\begin{proof}
Let $O$ be a joint irreducible of $P_\II$ and let $A<O$ be its unique cover.
It must be from a flip $O=(i,j)A$.
\nantel{that is all folks}
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section*{Acknowledgments}

Thanks!
\Nantel{Still to do: Finish Section 5,   description of $\join$ and $\meet$ in term of sources(?), characterize which Segment hypergraph gives lattice quotient(?), semi-distributive, what else?}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\bibliographystyle{alpha}
\bibliography{IH_lattices}
\label{sec:biblio}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{document}
