\documentclass[reqno]{amsart}

\usepackage{enumerate, amsmath, amsfonts, amssymb, amsthm, wasysym, graphics, graphicx, xcolor, url, hyperref, hypcap, a4wide, pdflscape, multido, xargs, colortbl, multicol, multirow, calc, shuffle, hvfloat}
\hypersetup{colorlinks=true, citecolor=PineGreen, linkcolor=PineGreen}
%\usepackage[all]{xy}
\usepackage{tikz}\usetikzlibrary{trees,snakes,shapes,arrows,matrix,calc,arrows.meta}
\usepackage{tikz-qtree}
\usepackage{comment}
\usepackage{etex}
\usepackage{ulem}\normalem % to strike through a word
\usepackage[noabbrev,capitalise]{cleveref}
\setlength{\abovecaptionskip}{10pt}
\setlength{\belowcaptionskip}{5pt}

%\reserveinserts{50}
\graphicspath{{figures/}}
\makeatletter
\def\input@path{{figures/}}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\title{Interval hypergraphic lattices}

\author[N.~Bergeron]{Nantel Bergeron} 
\address[N.~Bergeron]{Department of Mathematics and Statistics, York University, Toronto}
\email{bergeron@yorku.ca}
\urladdr{http://bergeron.mathstats.yorku.ca}

\author{Vincent Pilaud}
\address[V.~Pilaud]{Universitat de Barcelona}
\email{vincent.pilaud@ub.edu}
\urladdr{https://www.ub.edu/comb/vincentpilaud/}

\thanks{
NB was supported by NSERC and York Research Chair in Applied Algebra.
VP was partially supported by the Spanish grant PID2022-137283NB-C21 of MCIN/AEI/10.13039/501100011033 / FEDER, UE, by Departament de Recerca i Universitats de la Generalitat de Catalunya (2021 SGR 00697), by the French grant CHARMS (ANR-19-CE40-0017), and by the French--Austrian projects PAGCAP (ANR-21-CE48-0020 \& FWF I 5788).
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% theorems
\newtheorem{theorem}{Theorem}[section]
\newtheorem{theoremA}{Theorem}
\renewcommand{\thetheoremA}{\Alph{theoremA}}
\crefname{theoremA}{Theorem}{Theorems}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{conjecture}[theorem]{Conjecture}
\crefname{conjecture}{Conjecture}{Conjectures}
\newtheorem{conjectureA}{Conjecture}
\renewcommand{\theconjectureA}{\Alph{conjectureA}}
\crefname{conjectureA}{Conjecture}{Conjectures}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{question}[theorem]{Question}
\newtheorem{notation}[theorem]{Notation}
\newtheorem{openproblem}[theorem]{Open problem}


% newcommands
% math special letters
\newcommand{\R}{\mathbb{R}} % reals
\newcommand{\N}{\mathbb{N}} % naturals
\newcommand{\Z}{\mathbb{Z}} % integers
\newcommand{\I}{\mathbb{I}} % set of integers
\newcommand{\C}{\mathbb{C}} % set of summands
\renewcommand{\b}[1]{\boldsymbol{#1}} % bold
\newcommand{\cal}[1]{\mathcal{#1}} % cal

% math commands
\newcommand{\set}[2]{\left\{ #1 \;\middle|\; #2 \right\}} % set notation
\newcommand{\bigset}[2]{\big\{ #1 \;|\; #2 \big\}} % big set notation
\newcommand{\biggset}[2]{\bigg\{ #1 \;\bigg|\; #2 \bigg\}} % big set notation
\newcommand{\multiset}[2]{\left\{\!\!\left\{ #1 \;\middle|\; #2 \right\}\!\!\right\}} % multiset notation
\newcommand{\bigmultiset}[2]{\big\{\!\!\big\{ #1 \;|\; #2 \big\}\!\!\big\}} % big multiset notation
\newcommand{\ssm}{\smallsetminus} % small set minus
\newcommand{\dotprod}[2]{\langle #1 | #2 \rangle} % dot product
\newcommand{\symdif}{\triangle} % symmetric difference
\newcommand{\one}{{1\!\!1}} % the all one vector
\newcommand{\eqdef}{\mbox{\,\raisebox{0.2ex}{\scriptsize\ensuremath{\mathrm:}}\ensuremath{=}\,}} % :=
\newcommand{\defeq}{\mbox{~\ensuremath{=}\raisebox{0.2ex}{\scriptsize\ensuremath{\mathrm:}} }} % =:
\newcommand{\polar}{^\diamond} % polar
\newcommand{\simplex}{\triangle} % simplex

% operators
\DeclareMathOperator{\conv}{conv} % convex hull
\DeclareMathOperator{\cone}{cone} % cone hull
\DeclareMathOperator{\arr}{Arr} % arrangements
\DeclareMathOperator{\Inv}{Inv} % inversion set
\DeclareMathOperator{\Ninv}{Ninv} % non-inversion set
\DeclareMathOperator{\DemazureProduct}{Dem} % non-inversion set

% others
\newcommand{\fix}[1]{{\bf FIXME: }#1} % emphasis of a problem to FIX
\newcommand{\ie}{\textit{i.e.}~} % id est
\newcommand{\eg}{\textit{e.g.}~} % exempli gratia
\newcommand{\Eg}{\textit{E.g.}~} % exempli gratia
\newcommand{\aka}{\textit{aka.}~} % also known as
\newcommand{\viceversa}{\textit{vice versa}} % vice versa
\newcommand{\ordinal}{\textsuperscript{th}} % th for ordinals
\newcommand{\ex}[1]{^{\textrm{ex#1}}} % example
\newcommand{\para}[1]{\medskip\noindent\textbf{#1}} % paragraph
\newcommand{\subpara}[1]{\smallskip\noindent\textit{#1.}} % paragraph
\definecolor{PineGreen}{RGB}{2,120,120} % pinegreen color
\definecolor{darkgreen}{RGB}{57,181,74} % darkgreen color
\newcommand{\blue}[1]{{\color{blue} #1}} % blue
\newcommand{\red}[1]{{\color{red} #1}} % red
\newcommand{\green}[1]{{\color{darkgreen} #1}} % green
\newcommand{\defn}[1]{\textbf{\textsf{\color{PineGreen} #1}}} % emphasis of a definition
\usepackage{todonotes}
\newcommand{\nantel}[1]{\todo[size=\tiny,color=red!30]{ #1 \\ \hfill --- N.}\,}
\newcommand{\Nantel}[1]{\todo[inline,color=red!30]{#1 \\ \hfill --- N.}}
\newcommand{\vincent}[1]{\todo[size=\tiny,color=blue!30]{ #1 \\ \hfill --- V.}\,}
\newcommand{\Vincent}[1]{\todo[inline,color=blue!30]{#1 \\ \hfill --- V.}}

% permutations
\newcommand{\fS}{\mathfrak{S}} % symmetric group
\newcommand{\fR}{\mathfrak{R}} % subset symmetric group


% lattices
\newcommand{\meet}{\wedge} % meet
\newcommand{\join}{\vee} % join
\newcommand{\bigMeet}{\bigwedge} % meet
\newcommand{\bigJoin}{\bigvee} % join
\newcommand{\less}{\vartriangleleft} % smaller WOIP
\newcommand{\lesseq}{\trianglelefteq} % smaller WOIP
\newcommand{\more}{\vartriangleright} % larger WOIP
\newcommand{\contactLess}[1]{\less_{#1}} % smaller contact graph
\newcommand{\contactMore}[1]{\more_{#1}} % larger contact graph
\newcommand{\projDown}{\pi^\downarrow} % Down projection
\newcommand{\projUp}{\pi^\uparrow} % Down projection

% Orientation, Hypergraph and Intervals
\newcommand{\Or}{\mathcal O}  % The map S_n --> acyclic orientation corresponding to vertices
\newcommand{\HH}{\mathbb H}  % general hypergraph
\newcommand{\II}{\mathbb I} % interval hypergraph
\newcommand{\cJ}{\cal{J}} % basic irreducibles index set
\newcommand{\cIJ}{\cal{IJ}} % basic irreducibles index set
\newcommand{\cX}{\cal{X}}
\newcommand{\cY}{\cal{Y}}
\newcommand{\cA}{\cal{A}}

% interval hypergraph acyclic orientation
\newcommand{\intervalHypergraph}[2]{
	\begin{tikzpicture}[baseline=0]
		\foreach \x in {1,...,#1} {
			\node (\x) at (\x*.5,-.3) [inner sep = -1pt] {$\scriptstyle \x$};
		}
		\newcount{\y} \y=0
		\foreach \a/\b in {#2} {
			\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (\a*.5,\y*.2)--(\b*.5,\y*.2);
			\global\advance\y by 1
		}
		\node at (.5,0) {\phantom{$\bullet$}};
		\node at (#1*.5,0) {\phantom{$\bullet$}};
	\end{tikzpicture}
}

\newcommand{\acyclicOrientation}[2]{
	\begin{tikzpicture}[baseline=0]
		\foreach \x in {1,...,#1} {
			\node (\x) at (\x*.5,-.3) [inner sep = -1pt] {$\scriptstyle \x$};
		}
		\newcount{\y} \y=0
		\foreach \a/\b/\c in {#2} {
			\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (\a*.5,\y*.2)--(\b*.5,\y*.2); \node at (\c*.5,\y*.2) {$\bullet$};
			\global\advance\y by 1
		}
		\node at (.5,0) {\phantom{$\bullet$}};
		\node at (#1*.5,0) {\phantom{$\bullet$}};
	\end{tikzpicture}
}

\newcommand{\tree}[1]{
	\begin{tikzpicture}[level distance = 20pt]
	\Tree #1
	\end{tikzpicture}
}

% flip
\newcommand{\flip}[4]{\ensuremath{#1 \, \begin{tikzpicture}[scale=1,baseline=-.1cm] \path[->]  (0,0) edge node[fill=white,inner sep=2pt, font=\tiny ] {$#2#3$} (.7,0); \end{tikzpicture} \, #4}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\begin{abstract}
For a hypergraph~$\HH$ on~$[n]$, the hypergraphic poset~$P_\HH$ is the transitive closure of the oriented skeleton of the hypergraphic polytope~$\simplex_\HH$ (the Minkowski sum of the standard simplices~$\simplex_H$ for all~$H \in \HH$).
Hypergraphic posets include the weak order for the permutahedron (when~$\HH$ is the complete graph on~$[n]$) and the Tamari lattice for the associahedron (when~$\HH$ is the set of all intervals of~$[n]$), which motivates the study of lattice properties of hypergraphic posets.
In this paper, we focus on interval hypergraphs, where all hyperedges are intervals of~$[n]$.
We characterize the interval hypergraphs~$\II$ for which~$P_\II$ is a lattice, a distributive lattice, a semidistributive lattice, and a lattice quotient of the weak order.
%When~$P_\II$ is lattice, we describe the join irreducibles of~$P_\II$.
\end{abstract}

\maketitle

\tableofcontents

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Introduction}
\label{sec:introduction}

Fix an integer~$n \ge 1$ and denote by~$(\b{e}_i)_{i \in [n]}$ the standard basis of~$\R^n$.
The \defn{hypergraphic polytope} of a hypergraph~$\HH$ on~$[n]$ is the Minkowski sum
\(
\simplex_\HH \eqdef \sum_{H\in \HH} \simplex_H\,,
\)
where $\simplex_H$ is the simplex given by the convex hull of the points $\set{\b{e}_h}{h \in H}$.
The face lattice of~$\simplex_\HH$ was described combinatorially in terms of acyclic orientations of~$\HH$ in~\cite{BenedettiBergeronMachacek}.
Note that the singletons of~$\HH$ are irrelevant for the combinatorics of~$\triangle_\HH$ as they just contribute to translations.
It is convenient for us to assume that~$\{i\} \in \HH$ for all~$i \in [n]$.

The \defn{hypergraphic poset}~$P_\HH$ is the transitive closure of the skeleton of~$\simplex_\HH$ oriented in the direction~$\b{\omega} \eqdef (n, n-1, \dots, 2, 1) - (1, 2, \dots, n-1, n) = (n-1, n-3, \dots, 3-n, 1-n)$.
For instance, 
\begin{itemize}
\item if~$\HH = \binom{[n]}{2}$ is the complete graph (or any hypergraph containing it), then~$\simplex_\HH$ is the permutahedron and $P_\HH$ is the weak order on permutations,
\item if~$\HH = \set{[a,b]}{1 \le a \le b \le n}$ is the complete interval hypergraph, then~$\simplex_\HH$ is \mbox{J.-L.~Loday's} associahedron~\cite{ShniderSternberg,Loday} and~$P_\HH$ is the Tamari lattice on binary trees~\cite{Tamari}.
\end{itemize}
%In view of these two examples, we consider the following general questions:
%\begin{itemize}
%\item characterize the hypergraphs~$\HH$ for which $P_\HH$ is a lattice, a distributive lattice, a semidistributive lattice, a congruence-uniform lattice, a (semi-)lattice quotient of the weak order on permutations,
%\item when~$P_\HH$ is a semidistributive lattice, describe the lattice quotients of~$P_\HH$ and realize them geometrically.
%\end{itemize}
%These questions were settled in~\cite{Pilaud-acyclicReorientationLattices} for graphical zonotopes (\ie when~$\HH \subseteq \binom{[n]}{2}$), and also partially studied in~\cite{BarnardMcConville} for graph associahedra~\cite{CarrDevadoss} (\ie when~$\HH$ is the set of all subsets of vertices that induce a connected subgraph of a fixed graph on~$[n]$).

In view of these two examples, we would like to characterize the hypergraphs~$\HH$ for which $P_\HH$ is a lattice, a distributive lattice, a semidistributive lattice, a congruence-uniform lattice, a \mbox{(semi-)lattice} quotient of the weak order on permutations, etc.
These questions were settled in~\cite{Pilaud-acyclicReorientationLattices} for graphical zonotopes (\ie when~$\HH \subseteq \binom{[n]}{2}$), and also partially studied in~\cite{BarnardMcConville} for graph associahedra~\cite{CarrDevadoss} (\ie when~$\HH$ is the set of all subsets of vertices that induce a connected subgraph of a fixed graph on~$[n]$).

In this paper, we study the case of \defn{interval hypergraphs}~$\II$, \ie when all hyperedges of~$\II$ are intervals of~$[n]$.
Note that this family does not contain the permutahedron, but contains
\begin{itemize}
\item the classical associahedron of~\cite{ShniderSternberg,Loday} when~$\II$ contains all intervals of~$[n]$,
\item the Pitman--Stanley polytope~\cite{PitmanStanley} when~$\II$ is the set of all singletons~$\{i\}$ and all initial intervals~$[i]$~for~${i \in [n]}$,
\item the freehedron of~\cite{Saneblidze-freehedron} when~$\II$ is the set of all singletons~$\{i\}$, all initial intervals~$[i]$ for~${i \in [n]}$, and all final intervals~$[n] \ssm [i]$~for~${i \in [n-1]}$,
\item the fertilotopes of~\cite{Defant-fertilitopes} when any two intervals of~$\II$ are either nested or disjoint.
\end{itemize}
We obtain the following characterizations, where we assume that~$\{i\} \in \II$ for all~$i \in [n]$ as mentioned earlier.
See \cref{fig:notLattices,fig:Tamari,fig:distributiveLattices,fig:semidistributiveLattices,fig:notSemidistributiveLattices} for illustrations.

\begin{theoremA}
\label{thm:latticeI}
For an interval hypergraph $\II$, the poset $P_\II$ is a lattice if and only if $\II$ is closed under intersection (\ie $I, J \in \II$ and~$I \cap J \ne \varnothing$ implies~$I \cap J \in \II$).
\end{theoremA}

\begin{theoremA}
\label{thm:distributiveLatticeI}
For an interval hypergraph $\II$, the poset $P_\II$ is a distributive lattice if and only if for all~$I, J \in \II$ such that~$I \not\subseteq J$, $I \not\supseteq J$ and~$I \cap J \ne \varnothing$, the intersection~$I \cap J$ is in~$\II$ and is initial or final in any~$K \in \II$ with~$I \cap J \subseteq K$.
\end{theoremA}

\begin{theoremA}
\label{thm:semidistributiveLatticeI}
%For an interval hypergraph $\II$, the poset $P_\II$ is a join semidistributive lattice if and only if there is no~$I, J, K, L \in \II$ such that
%\begin{itemize}
%\item $\min(I) < \min(J) \le \max(I) < \max(J)$,
%\item $\min(I) < \min(K) \le \max(J) < \max(K)$,
%\item $\min(L) < \min(\min(J), \min(K))$ and~$\max(K) \le \max(L)$,
%%\item there is no~$M \!\in\! \II$ with~$\min(M) < \min(\min(J), \min(K))$ and~$\max(J) \le \max(M) < \max(K)$.
%\item $\min(\min(J), \min(K)) \le \min(M)$ or~$\max(M) < \max(J)$ or $\max(K) \le \max(M)$~for~all~${M \!\in\! \II}$.
%\end{itemize}
%
%For an interval hypergraph $\II$, the poset $P_\II$ is a join semidistributive lattice if and only if there is no~$[i,i'], [j,j'], [k,k'], [\ell,\ell'] \in \II$ such that
%\begin{itemize}
%\item $i < j \le i' < j'$ and $i < k \le j' < k'$ and $\ell < \min(j, k)$ and~$k' \le \ell'$,
%%\item there is no~$[m,m'] \in \II$ with~$m < \min(j, k) \le $ and~$j' \le m' < k'$.
%\item for all~$[m,m'] \in \II$, we have $\min(j, k) \le m$ or~$m' < j'$ or $k' \le m'$.
%\end{itemize}
%
For an interval hypergraph $\II$, the poset $P_\II$ is a join semidistributive lattice if and only if it is closed under intersection and
%for all~$[i,i'], [j,j'], [k,k'], [\ell,\ell'] \in \II$ such that $i < j \le i' < j'$, $i < k \le j' < k'$, $\ell < \min(j, k)$ and~$k' \le \ell'$, there is $[m,m'] \in \II$ such that~$m < \min(j, k)$ and~$j' \le m' < k'$.
%for all~$[a,a'], [b,b'], [c,c'], [d,d'] \in \II$ such that ${a < b \le a' < b'}$, $a < c \le b' < c'$, $d < \min(b, c)$ and~$c' \le d'$, there is~$[e,e'] \in \II$ such that~$e < \min(b, c)$ and~${a' < e' < c'}$.
%for all~$[a,a'], [b,b'], [c,c'], [d,d'] \in \II$ such that ${a < b \le a' < b'}$, $a < c \le b' < c'$, $d < \min(b, c)$ and~$b' < d'$, there is~$[e,e'] \in \II$ such that~$e < b$ and~${b' < e' < c'}$.
for all~$[r,r'], [s,s'], [t,t'], [u,u'] \in \II$ such that ${r < s \le r' < s'}$, $r < t \le s' < t'$, $u < \min(s, t)$ and~$s' < u'$, there is~$[v,v'] \in \II$ such that~$v < s$ and~${s' < v' < t'}$.
A symmetric characterization holds for meet semidistributivity.
\end{theoremA}

\begin{theoremA}
\label{thm:quotientLatticeI}
For an interval hypergraph $\II$, the poset $P_\II$ is a join (resp.~meet) semilattice quotient of the weak order on permutations if and only if it is closed under initial (resp.~final) subintervals.
\end{theoremA}

For instance, among the four above-mentioned families of interval hypergraphic polytopes, we recover that  the Pitman-Stanley polytope and all fertilotopes yield distributive lattices, the associahedron yields a semidistributive (but not distributive) lattice which is a quotient of the weak order, while the freehedron is not even a lattice (this was actually the motivation for~\cite{PilaudPoliakova} to construct alternative realizations of the skeleton of the freehedron).

Once \cref{thm:latticeI} is established, an important step for \cref{thm:distributiveLatticeI,thm:semidistributiveLatticeI} is to understand join irreducibles.
\cref{subsec:joinIrreducibles} provides a combinatorial description of the join irreducible elements of~$P_\II$ for an arbitrary interval hypergraph~$\II$ closed under intersections.
To prepare this slightly technical description, we already describe some join irreducible elements of~$P_\II$ in \cref{subsec:someJoinIrreducibles}, which happen to be all join irreducible elements of~$P_\II$ under the condition of~\cref{thm:distributiveLatticeI}.

\setcounter{theoremA}{0}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pagebreak
\section{Hypergraphic posets}
\label{sec:HP}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Hypergraphic polytopes}
\label{subsec:D_H}

A \defn{hypergraph} $\HH$ on $[n] \eqdef \{1, \dots, n\}$ is a collection of  subsets of~$[n]$.
By convention, we always assume that~$\HH$ contains all singletons~$\{i\}$ for~$i\in [n]$.
%Following~\cite[Def 2.11]{BenedettiBergeronMachacek}, given an hypergraph $\HH$, we define 
The \defn{hypergraphic polytope}~$\simplex_\HH$ is the Minkowski sum
\[
\simplex_\HH \eqdef \sum_{H\in \HH} \simplex_H\,,
\]
where $\simplex_H$ is the simplex given by the convex hull of the points $\set{\b{e}_h}{h \in H}$ of~$\R^n$.

\begin{example}
\label{ex:DH1}
For the hypergraph $\HH=\{ 1, 2, 3, 4, 123, 134 \}$,
we  have
\[
\begin{array}{ccc}
 \begin{tikzpicture}[scale=1,baseline=.5cm]
	\node (1) at (0.6,1.0) {$\scriptstyle e_1$};
	\node (2) at (-.2,-.2) {$\scriptstyle e_2$};
	\node (3) at (1.3,-.2) {$\scriptstyle e_3$};
	\draw [fill=blue!40] (0,0) -- (.6,.75) -- (1.2,0) --(0,0) ;   % e2--e1--e3--e2
\end{tikzpicture} \quad &
 \begin{tikzpicture}[scale=1,baseline=.5cm]
	\node (1) at (0.6,1.0) {$\scriptstyle e_1$};
	\node at (1.3,-.2) {$\scriptstyle e_3$};
	\node at (2.4,.5) {$\scriptstyle e_4$};
	\draw [fill=green!20] (1.2,0) -- (2.2,.5 )--(.6,.75)--(1.2,0); %  e3--e4--e1--e3
\end{tikzpicture} \quad &
\begin{tikzpicture}[scale=1,baseline=.5cm]
	%\draw [fill=gray!10] (0,0) -- (.6,.75)-- (1.6,1.25) -- (2.2,.5) -- (1.2,0) --(0,0) ; 
	\draw [color=gray!10,fill=blue!2] (1.6,1.25)--(1,.5)--(2.2,.5)-- (1.6,1.25); 
	\draw [color=gray!10,fill=green!5]  (0,0)--(1,.5)--(-.6,.75)--(0,0);
	\draw [dotted,color=green] (0,0)--(1,.5)--(-.6,.75);
	\draw [dotted,color=blue] (1.6,1.25)--(1,.5)--(2.2,.5);
	\draw (0,1.5)-- (1.6,1.25) -- (2.2,.5) -- (1.2,0) --(0,1.5) ; 
	\draw (0,0)--(-.6,.75)--(0,1.5)-- (1.2,0) --(0,0); 
\end{tikzpicture}\\
\blue{\simplex_{123}}& \green{\simplex_{134}} & \simplex_\HH = \simplex_1 + \simplex_2 + \simplex_3 + \simplex_4 + \blue{\simplex_{123}} + \green{\simplex_{134}}\\
\end{array}
\]
which is a 3-dimensional polytope sitting in $\R^4$.
Note that as~$n \le 9$ in all our examples, we simplify notations and write~$123$ for the set~$\{1,2,3\}$.
\end{example}

\begin{remark}
\label{rem:single}
Note that the singletons hyperedges are irrelevant for our purposes.
Namely, adding to~$\HH$ the hyperedge~$\{i\}$ for some~$i \in [n]$ just translates the polytope~$\simplex_\HH$ in the direction~$\b{e}_i$, which does not affect the face structure of the polytope.
For our conditions on hypergraphs of \cref{thm:latticeI,thm:distributiveLatticeI}, it is convenient for us to assume that $\{i\} \in \HH$ for all $i \in [n]$.
When quoting results from~\cite{BenedettiBergeronMachacek}, the reader will have to be mindful that they took the opposite convention.
\end{remark}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Acyclic orientations, increasing flips, and hypergraphic posets} 
\label{subsec:P_H}

We now recall from \cite[Thm.~2.18]{BenedettiBergeronMachacek} a combinatorial model for the graph~$(V_\HH, E_\HH)$ of~$\simplex_\HH$.
As we are only interested in the $1$-skeleton of~$\simplex_\HH$, we simplify some of the general definitions of~\cite{BenedettiBergeronMachacek} which were designed to deal with all faces of~$\simplex_\HH$.

\begin{definition}
\label{def:acyclicOrientation}
An \defn{orientation} of~$\HH$ is a map~$O$ from~$\HH$ to~$[n]$ such that~$O(H) \in H$ for all~${H \in \HH}$.
Equivalently, we often represent the orientation~$O$ as the set of pairs~$\set{(O(H),H)}{H \in \HH}$.
The orientation~$O$ is \defn{acyclic} if there is no~$H_1, \dots, H_k$ with~$k \ge 2$ such that~$O(H_{i+1}) \in H_i \ssm \{O(H_i)\}$ for~$i \in [k-1]$ and~$O(H_1) \in H_k \ssm \{O(H_k)\}$.
\end{definition}

\begin{remark}
The singleton~$\{i\}$ of~$\HH$ is always oriented $O(\{i\})=i$, and thus plays no role in determining  the acyclicity of~$O$ since $\{i\} \ssm \{O(\{i\})\} = \varnothing$.
We will therefore omit the singletons when describing or drawing orientations (see also~\cref{exm:intervalHypergraph}).
If we list the non-singleton elements $(H_1,H_2,...,H_k)$ of $\HH$ in some fixed order, it is then convenient to describe an orientation~$O$ as the tuple $O=(O(H_1),O(H_2),\ldots,O(H_k))$. 
\end{remark}

\begin{example}
\label{ex:DH2}
Using $\HH=\{ 1, 2, 3, 4, 123, 134 \}$ as in~\cref{ex:DH1}, we order the two non-singleton $(123,134)=(H_1,H_2)$.
There are $9$ orientations of~$\HH$, $7$ of which are acyclic as displayed in~\cref{Fig:Orientation1}. 
For instance, the orientation $(O(H_1),O(H_2))=(1,3)$ is not acyclic since $O(H_1)=1\in H_2$ and $O(H_2)=3\in H_1$ is a cycle with $k=2$.
%
\begin{figure}
	\centerline{
	\begin{tabular}{c@{\qquad}c}
		\begin{tikzpicture}[scale=2,baseline=.5cm]
		\draw [color=gray!10,fill=blue!2] (1.6,1.25)--(1,.5)--(2.2,.5)-- (1.6,1.25); 
		\draw [color=gray!10,fill=green!5]  (0,0)--(1,.5)--(-.6,.75)--(0,0);
		\node (23) at (0,0) {$\scriptstyle (2,3)$}; 		
		\node (21) at (-.6,.75) {$\scriptstyle (2,1)$};	
		\node (24) at (1,.5) {$\scriptstyle (2,4)$}; 	
		\node (34) at (2.2,.5) {$\scriptstyle (3,4)$};
		\node (14) at (1.6,1.25) {$\scriptstyle (1,4)$};	
		\node (33) at (1.2,0) {$\scriptstyle (3,3)$};	
		\node (11) at (0,1.5) {$\scriptstyle (1,1)$};		
		\path[color=red, ->] (11) edge node[fill=white,inner sep=2pt, font=\tiny ] {$  12 $} (21);
		\path[color=red, ->] (11) edge node[fill=white,inner sep=2pt, font=\tiny ] {$  13 $} (33);
		\path[color=red, ->] (11) edge node[fill=white,inner sep=2pt, font=\tiny ] {$  14 $} (14);
		\path[color=red, ->] (14) edge node[fill=white,inner sep=2pt, font=\tiny ] {$  13 $} (34) ;
		\path[dotted,color=red, ->] (14) edge node[fill=white,inner sep=2pt, font=\tiny ] {$  12 $} (24)  ;
		\path[dotted,color=red, ->] (24) edge node[fill=white,inner sep=2pt, font=\tiny ] {$  23 $} (34)  ;
		\path[dotted,color=red, ->] (21) edge node[fill=white,inner sep=2pt, font=\tiny ] {$  14$} (24);
		\path[color=red, ->] (21) edge node[fill=white,inner sep=2pt, font=\tiny ] {$  13$} (23);
		\path[dotted,color=red, <-]  (24) edge node[fill=white,inner sep=2pt, font=\tiny ] {$  34$} (23);
		\path[color=red, ->]  (23) edge node[fill=white,inner sep=2pt, font=\tiny ] {$  23$} (33);
		\path[color=red, ->]  (33) edge node[fill=white,inner sep=2pt, font=\tiny ] {$  34$} (34);
		\end{tikzpicture}
	&
		\begin{tikzpicture}[scale=1,baseline=.5cm]
		\node (11) at (0,0) {$\scriptstyle (1,1)$};
		\node (21) at (-1,1) {$\scriptstyle (2,1)$};	
		\node (23) at (-1,2) {$\scriptstyle (2,3)$}; 		
		\node (14) at (1,1.5) {$\scriptstyle (1,4)$};	
		\node (24) at (0,3) {$\scriptstyle (2,4)$}; 	
		\node (33) at (-2,3) {$\scriptstyle (3,3)$};
		\node (34) at (-1,4) {$\scriptstyle (3,4)$};	
		\draw (11)--(21);
		\draw (11)--(14);
		\draw (21)--(23);
		\draw (23)--(24);
		\draw (14)--(24);
		\draw (23)--(33);
		\draw (33)--(34);
		\draw (24)--(34);
		\end{tikzpicture}
	\\
	$\Delta_\HH$ & $P_\HH$\\
	\end{tabular}
	}
	\caption{The polytope $\Delta_{\HH}$ for $\HH=\{ 1, 2, 3, 4, 123, 134 \}$ has seven vertices corresponding to the acyclic orientations of $\HH$ and eleven (oriented) edges corresponding to the increasing flips between these orientations.
	The poset $P_\HH$ is the transitive closure of the increasing flip graph.}
	\label{Fig:Orientation1}
\end{figure}
\end{example}

\begin{definition}
\label{def:flip}
Two orientations~$O \ne O'$ of~$\HH$ are related by an \defn{increasing flip} if there exist~${1 \le i < j \le n}$ such that for all~$H \in \HH$, 
\begin{itemize}
\item if~$O(H) \ne O'(H)$, then~$O(H) = i$ and~$O'(H) = j$, and
\item if~$\{i,j\} \subseteq H$, then~$O(H) = i \iff O'(H) = j$.
\end{itemize}
We denote such a flip by~\flip{O}{i}{j}{O'}.
\end{definition}

\begin{example}
\label{ex:DH3}
\cref{Fig:Orientation1} shows all the increasing flips between the acyclic orientations of the hypergraph $\HH=\{ 1, 2, 3, 4, 123, 134 \}$ of \cref{ex:DH1,ex:DH2}.
For instance, \flip{(2,3)}{2}{3}{(3,3)} indicates that there is an increasing flip from  $O=(2,3)$ to $O'=(3,3)$ with $i=2<3=j$.
\end{example}

The following correspondance was already observed in~\cite[Thm.~2.18]{BenedettiBergeronMachacek} (it even extends to all faces of~$\simplex_\HH$, but we do not need this level of generality in this paper).
We provide an alternative short proof for convenience.

\begin{proposition}[{\cite[Thm.~2.18]{BenedettiBergeronMachacek}}]
\label{prop:Hgraph}
The graph of~$\simplex_\HH$ oriented in the direction~$\b{\omega}$ is isomorphic to the increasing flip graph on acyclic orientations of~$\HH$.
\end{proposition}

\begin{proof}
Recall that the face of a Minkowski sum~$\sum_i P_i$ minimizing a direction~$\b{v}$ is the Minkowski sum of the faces of the summands~$P_i$ minimizing~$\b{v}$.

The vertex of~$\simplex_H$ minimizing a generic direction~$\b{v}$ is~$\b{e}_i$ for~$i \in H$ such that~$\b{v}_i = \min\set{\b{v}_h}{h \in H}$.
An acyclic orientation of~$\HH$ corresponds to the choice of one vertex in each~$\simplex_H$, and the orientation is acyclic if and only if this choice corresponds to a generic orientation~$\b{v}$, hence to a vertex of~$\simplex_\HH$.

The edges of~$\simplex_H$ are oriented in the directions~$\b{e}_i-\b{e}_j$ for~$i,j \in H$.
The edges of~$\simplex_\HH$ are thus also oriented by $\b{e}_i-\b{e}_j$, and thus correspond to pairs of acyclic orientations which differ by a flip.
\end{proof}

Finally, the main objects of this paper are the following posets.

\begin{definition}
The \defn{hypergraphic poset}~$P_\HH$ is the transitive closure of the increasing flip graph on acyclic orientations of~$\HH$.
\end{definition}

\begin{example}
\label{ex:DH4}
For $\HH=\{ 1, 2, 3, 4, 123, 134 \}$ of \cref{ex:DH1,ex:DH2,ex:DH3}, the poset  $P_\HH$ is represented in~\cref{Fig:Orientation1}\,(right).
\end{example}

\begin{remark}
\label{rem:edgeNotCover}
As seen in~\cref{Fig:Orientation1} the edges in $E_\HH$ are not necessarily cover relations in~$P_\HH$.
The simplest case is given by
%$\HH=\big\{\{1\},\{2\},\{3\},\{1,2,3\}\big\}$, 
$\HH=\{ 1, 2, 3, 123 \}$, 
whose hypergraphic polytope~is
\[
	\simplex_\HH = \simplex_1 + \simplex_2 + \simplex_3 + \simplex_{123} =
	\begin{tikzpicture}[scale=.7,baseline=.0cm]
		\draw [color=gray!10,fill=blue!2] (0,-1)--(0,1)--(1.632,0)--(0,-1) ; 
		\node (a) at (0,-1) {$\scriptstyle (1)$};
		\node (b) at (1.632,0) {$\scriptstyle (2)$};
		\node (c) at (0,1) {$\scriptstyle (3)$};
		\path[color=red, ->] (a) edge node[fill=white,inner sep=1pt, font=\tiny ] {$ \scriptscriptstyle 13 $} (c);
		\path[color=red, ->] (a) edge node[fill=white,inner sep=1pt, font=\tiny ] {$\scriptscriptstyle  12 $} (b);
		\path[color=red, ->] (b) edge node[fill=white,inner sep=1pt, font=\tiny ] {$ \scriptscriptstyle 23 $} (c);
	\end{tikzpicture}
\]
and clearly the left edge of $\simplex_\HH$ is not a cover relation of~$P_\HH$.
\end{remark}

\begin{proposition}
\label{prop:antiIsomorphism}
For~$x \in n$, define~$x^\leftrightarrow \eqdef n-x+1$.
For~$H \subseteq [n]$, define~$H^\leftrightarrow \eqdef \set{h^\leftrightarrow}{h \in H}$.
For an hypergraph~$\HH$, define~$\HH^\leftrightarrow \eqdef \set{H^\leftrightarrow}{H \in \HH}$.
For an orientation~$O$ of~$\HH$, define the orientation~$O^\leftrightarrow$ of~$\HH^\leftrightarrow$ by~$O^\leftrightarrow(H^\leftrightarrow) \eqdef O(H)^\leftrightarrow$.
Then the map~$A \mapsto A^\leftrightarrow$ is an anti-isomorphism from~$P_\HH$ to~$P_{\HH^\leftrightarrow}$.
\end{proposition}

\begin{proof}
Straightforward.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Surjection map} 
\label{subsec:surjection}

As~$\simplex_\HH$ is a deformed permutahedra (\aka generalized permutahedra~~\cite{Postnikov, PostnikovReinerWilliams}), there is a natural surjection from the faces of the permutahedron to the faces of~$\simplex_\HH$, which was described in details in~\cite[Lem.~2.9]{BenedettiBergeronMachacek}.
Here, we focus on the surjection~$\Or$ from the permutations of $[n]$ to the acyclic orientations of~$\HH$.

\begin{definition}
\label{def:surjection}
For a permutation~$\pi$ of~$[n]$, the orientation~$\Or_\pi$ of~$\HH$ is defined for all~$H \in \HH$ by
\[
\Or_\pi(H) \eqdef  \pi\big(\min\set{j}{\pi(j)\in H}\big).
\]
\end{definition}

\begin{proposition}[{\cite[Lem.~2.9]{BenedettiBergeronMachacek}}]
For any hypergraph~$\HH$ on~$[n]$,
\begin{itemize}
\item the map~$\Or$ is a surjection from the permutations of~$[n]$ to the acyclic orientations of~$\HH$,
\item two acyclic orientations~$A,B$ of~$\HH$ are related by a flip if and only if there are permutations~$\pi_A, \pi_B$ of~$[n]$ which differ by a simple transposition such that~$\Or_{\pi_A} = A$ and~$\Or_{\pi_B} = B$.
\end{itemize}
In other words, the graph~$(V_\HH, E_\HH)$ of~$\simplex_\HH$ is isomorphic to the graph obtained by contracting the fibers of~$\Or$ in the graph of the permutahedron.
\end{proposition}

\begin{corollary}
\label{coro:weakToP}
The map~$\Or$ defines a poset morphism from the weak order on permutations to the hypergraphic poset~$P_\HH$.
\end{corollary}

Finally, we describe the fibers of the surjection~$\Or : \fS_n \to V_\HH$.
Given an acyclic orientation~$A$ of~$\HH$, define $\less_A$ as the order on $[n]$ obtained by the transitive closure of the union of the \linebreak orders $\set{A(H) < h}{h \in H \ssm \{A(H)\}}$ for each $H \in \HH$.
That is
\[ 
	\less_A =  \text{Trans. cl. }
	\bigcup_{H \in \HH} 
	\begin{tikzpicture}[scale=1,baseline=.0cm]
		\node at (0,-.45) {$\scriptstyle A(H)$};
		\node at (0,.6) {$\scriptstyle h \in H \ssm \{A(H)\}$};
		\node at (.2,.35) {$\ldots$};
		\draw [thick] (0,-.3)--(-.5,.4); 
		\draw [thick] (0,-.3)--(-.3,.4); 
		\draw [thick] (0,-.3)--(-.1,.4); 
		\draw [thick] (0,-.3)--(.5,.4); 
	\end{tikzpicture} \,.
\]
This is a well defined order since $A$ is acyclic.
The following lemma is straightforward.

\begin{lemma}
\label{lem:prepi}
For any acyclic orientation $A$ of~$\HH$, the preimage $\Or^{-1}(A) \eqdef \set{\pi}{\Or_\pi=A}$ is the set of linear extensions of~$\less_A$.
\end{lemma}

\begin{example}
Continuing with the hypergraph $\HH=\{ 1, 2, 3, 4, 123, 134 \}$ of \cref{ex:DH1,ex:DH2,ex:DH3,ex:DH4}, let $A$ be the acyclic orientation $(2,4)$.
The order~$\less_A$ is the following
\[
	\less_A= \text{Transitive closure }\Bigg(
	\begin{tikzpicture}[scale=1,baseline=.2cm]
		\node (2) at (0,0) {$\scriptstyle 2$};
		\node (1) at (-.4,.7) {$\scriptstyle 1$};
		\node (3) at (.4,.7) {$\scriptstyle 3$};
		\draw [thick] (2)--(1); 
		\draw [thick] (2)--(3); 
	\end{tikzpicture} 
	\cup
	\begin{tikzpicture}[scale=1,baseline=.2cm]
		\node (4) at (0,0) {$\scriptstyle 4$};
		\node (1) at (-.4,.7) {$\scriptstyle 1$};
		\node (3) at (.4,.7) {$\scriptstyle 3$};
		\draw [thick] (4)--(1); 
		\draw [thick] (4)--(3); 
	\end{tikzpicture} 
	\Bigg)
	=
	\begin{tikzpicture}[scale=1,baseline=.2cm]
		\node (4) at (.4,0) {$\scriptstyle 4$};
		\node (2) at (-.4,0) {$\scriptstyle 2$};
		\node (1) at (-.4,.7) {$\scriptstyle 1$};
		\node (3) at (.4,.7) {$\scriptstyle 3$};
		\draw [thick] (4)--(1); 
		\draw [thick] (4)--(3); 
		\draw [thick] (2)--(1); 
		\draw [thick] (2)--(3); 
	\end{tikzpicture} 	
\]
The linear extensions of this order are the permutations $2413$, $2431$, $4213$ and $4231$.
\end{example}

%In general, given a hypergraph~$\HH$ we would be interested to understand what are the cover of~$P_\HH$? 
%When is $P_\HH$ a lattice? distributive lattice? a semi-lattice? (semi-)lattice quotient of the $fS_n$-weak lattice?
%Can we have a better description of $\Or^{-1}$? and more.

%In the present work we focus our attention to a subfamily of hypergraphs, namely we assume that all $H\in \HH$ are intervals of~$[n]$.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Interval hypergraphic posets}
\label{sec:IHP}

In this paper, we focus on the following family of hypergraphs on~$[n]$.

\begin{definition}
An \defn{interval hypergraph}~$\II$ is an hypergraph on~$[n]$ where each~$I \in \II$ is an interval of the form $I = [a,b] \eqdef \{a, a+1, a+2, \dots, b-1, b\}$.
\end{definition}

\begin{example}
\label{exm:intervalHypergraph}
For instance, 
%$\II = \{\{1\},\{2\},\{3\},\{4\},[1,3],[2,3],[2,4],[1,4]\}$ 
$\II = \{ 1, 2, 3, 4,123,  1234, 23, 234 \}$ 
is an interval hypergraph and \linebreak
%$\Or_{4132} = \big\{ (4, \{1,2,3,4\}), (1, \{1,2,3\}), (3, \{2,3\}), (4, \{2,3,4\})\big\}$ 
$\Or_{4132} = (1,4,3,4)$ for the lexicographic order of the nonsingleton $(123,  1234, 23, 234)$,
is an acyclic orientation of~$\II$.
We will represent interval hypergraphs and their orientations graphically as follow:
\[
	\II =  \raisebox{-.2cm}{\intervalHypergraph{4}{1/3,1/4,2/3,2/4}}
	\qquad\qquad
	\Or_{4132}  =  \raisebox{-.2cm}{\acyclicOrientation{4}{1/3/1,1/4/4,2/3/3,2/4/4}}
\]
and, as before, we omit to draw the singleton $\{i\}$ for $i \in [n]$.
Remark that the running example of the previous section, $\HH=\{ 1, 2, 3, 4, 123, 134 \}$, is not an interval hypergraph, as $134$ is not an interval.
\end{example}

\begin{example}
We have represented some interval hypergraphic posets in \cref{fig:notLattices,fig:Tamari,fig:distributiveLattices,fig:semidistributiveLattices,fig:notSemidistributiveLattices}.
These figures illustrate in particular the following relevant families of interval hypergraphic posets mentioned in the introduction:
\begin{itemize}
\item if~$\II = \set{[i,j]}{1 \le i \le j \le n}$ is the set of all intervals of~$[n]$, then~$P_\II$ is the Tamari lattice corresponding to the classical associahedron of~\cite{ShniderSternberg,Loday}; see \cref{fig:Tamari};
\item if~$\II = \set{[1,i]}{i \in [n]}$ is the set of initial intervals of~$[n]$, then~$P_\II$ is the boolean lattice corresponding to the Pitman--Stanley polytope~\cite{PitmanStanley}; see \cref{fig:distributiveLattices}\,(bottom~right);
\item if~$\II = \set{[1,i]}{i \in [n]} \cup \set{[i,n]}{i \in [n]}$ is the set of all initial or final intervals of~$[n]$, then~$P_\II$ is a poset given by the freehedron of~\cite{Saneblidze-freehedron}, which is not even a lattice; see \cref{fig:notLattices}\,(right);
\item if any two intervals of~$\II$ are either nested or disjoint, then~$P_\II$ is a distributive lattice given by the fertilotope of~\cite{Defant-fertilitopes}; see \cref{fig:distributiveLattices}\,(top right and bottom) and \cref{subsec:SchroderHypergraphs}.
\end{itemize}
\end{example}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Acyclic orientations for interval hypergraphs}
\label{subsec:acyclicI}

In this section we give a simple characterization of the acyclic orientations of an interval hypergraph~$\II$.

\begin{proposition}
\label{prop:acyclicI}
An orientation~$O$ of an interval hypergraph~$\II$ is acyclic if and only if there is no distinct~$I,J \in \II$ such that~$O(I) \in J \ssm \{O(J)\}$ and~$O(J) \in I \ssm \{O(I)\}$.
Graphically, there is no pattern
 \[
	\begin{tikzpicture}[scale=1,baseline=.0cm]
	%
	\node at (-.5,0.2) {$\scriptscriptstyle J$}; 
	\node at (-.1,0.2) {$\scriptstyle \cdot$};
	\node at (0,0.2) {$\scriptstyle \cdot$};
	\node at (.1,0.2) {$\scriptstyle \cdot$};
	\draw [thick] (.2,.2)--(1.8,.2);
	\node at (1.9,.2) {$\scriptstyle \cdot$};
	\node at (2,.2) {$\scriptstyle \cdot$};
	\node at (2.1,.2) {$\scriptstyle \cdot$};
	\node at (1.5,.2) {$\bullet$};
	%
	\node at (-.5,0) {$\scriptscriptstyle I$};
	\node at (-.1,0) {$\scriptstyle \cdot$};
	\node at (0,0) {$\scriptstyle \cdot$};
	\node at (.1,0) {$\scriptstyle \cdot$};
	\draw [thick] (.2,0)--(1.8,0);
	\node at (1.9,0) {$\scriptstyle \cdot$};
	\node at (2,0) {$\scriptstyle \cdot$};
	\node at (2.1,0) {$\scriptstyle \cdot$};
	\node at (.5,0) {$\bullet$};
	%
	\node at (.5,-.2) {$\scriptscriptstyle i$};
	\node at (1.5,-.2) {$\scriptscriptstyle j$}; 
	\end{tikzpicture}
\]
\end{proposition}

\begin{proof}
If the orientation~$O$ contains this pattern, it is clearly not acyclic.
Conversely, assume that~$O$ is not acyclic.
Then we can find $I_1, \dots, I_k \in \II$ with~$k \ge 2$ such that~$O(I_{i+1}) \in I_i \ssm \{O(I_i)\}$ for~$i \in [k-1]$ and~$O(I_1) \in I_k \ssm \{O(I_k)\}$.
Graphically
\[
	\begin{tikzpicture}[scale=1,baseline=.0cm]
	\node at (-.5,1) {$\scriptscriptstyle I_k$};
	\draw [thick,{Bar[width=3pt]}-] (.3,1)--(1.2,1);
	\node at (1.3,1) {$\scriptstyle \cdot$};
	\node at (1.4,1) {$\scriptstyle \cdot$};
	\node at (1.5,1) {$\scriptstyle \cdot$};
	\node at (1,0.9) {$\scriptstyle \cdot$};
	\node at (1.1,0.8) {$\scriptstyle \cdot$};
	\node at (1.2,0.7) {$\scriptstyle \cdot$}; 
	%
%	\node at (-.5,0.6) {$\scriptscriptstyle I_4$};
%	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (2,.6)--(3,.6);
%	\node at (2.5,.6) {$\bullet$};
	%
	\node at (-.5,0.4) {$\scriptscriptstyle I_3$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (2.5,.4)--(4.5,.4);
	\node at (3.5,.4) {$\bullet$};
	%
	\node at (-.5,0.2) {$\scriptscriptstyle I_2$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (1,.2)--(4,.2);
	\node at (1.5,.2) {$\bullet$};
	%
	\node at (-.5,0) {$\scriptscriptstyle I_1$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,0)--(1.5,0);
	\node at (.5,0) {$\bullet$};
	\end{tikzpicture}
\]
Assume that~$k > 2$ and is minimal for this property.
Note that~$O(I_i) \ne O(I_{i+1})$ for all~$i$.
By symmetry, suppose~$O(I_1) < O(I_2)$.
If there is~$i \in [k-1]$ such that~$O(I_{i+1}) < O(I_i)$, then for the smallest such~$i$, we have
\begin{itemize}
\item either~$O(I_{i-1}) \in [O(I_{i+1}), O(I_i)] \subseteq I_i$, so that~$O(I_{i-1}) \in I_i$ and $O(I_i) \in I_{i-1}$,
\item or~$O(I_{i+1}) \in [O(I_{i-1}), O(I_i)] \subseteq I_{i-1}$, so that we can drop~$I_i$ from our sequence, contradicting the minimality of~$k$.
\end{itemize}
We thus obtain~$O(I_1) < \dots < O(I_k)$.
As~$O(I_1) \in I_k$, we get~$O(I_{k-1}) \in [O(I_1), O(I_k)] \subseteq I_k$, so that~$O(I_{k-1}) \in I_k$ and~$O(I_k) \in I_{k-1}$.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Fibers of $\Or$ for interval hypergraphs} 
\label{subsec:preimageI}

One striking property for interval hypergraphs is that the fibers of the surjection~$\Or$ are intervals in the weak order.
To describe this we first need to recall the following classical result of A.~Bj\"orner and M.~Wachs~\cite[Thm.~6.8]{BjornerWachs}

\begin{proposition}[{\cite[Thm.~6.8]{BjornerWachs}}]
\label{prop:WOIP}
The set of linear extensions of a poset~$\less$ on~$[n]$ forms an interval~$[\sigma, \tau]$ of the weak order if and only if ${a \less c \implies a \less b \text{ or } b \less c}$, and~${a \more c \implies a \more b \text{ or } b \more c}$, for every~$1 \le a < b < c \le n$.
%for every~$1 \le a < b < c \le n$,
%\[
%a \less c \implies a \less b \text{ or } b \less c
%\qquad\text{and}\qquad
%a \more c \implies a \more b \text{ or } b \more c.
%\]
Moreover, the inversions of~$\sigma$ are the pairs~$(b,a)$ with~$a < b$ and~$a \more b$, and the non-inversions of~$\tau$ are the pairs~$(a,b)$ with~$a < b$ and~$a \less b$.
\end{proposition}

This statement was refined in~\cite{ChatelPilaudPons} to describe Tamari interval posets.

\begin{proposition}[{\cite[Coro.~2.24]{ChatelPilaudPons}}]
\label{prop:TOIP}
The set of linear extensions of a poset~$\less$ on~$[n]$ forms an interval~$[\sigma, \tau]$ of the weak order such that~$\sigma$ avoids the pattern $231$ and $\tau$ avoids the pattern~$213$ if and only if~${a \less c \implies a \less b}$ and~$a \more c \implies b \more c$ for every~$1 \le a < b < c \le n$.
%for every~$1 \le a < b < c \le n$,
%\[
%a \less c \implies a \less b
%\qquad\text{and}\qquad
%a \more c \implies b \more c.
%\]
\end{proposition}

\begin{proposition}
\label{prop:preimageI}
The fiber~$\Or^{-1}(A)$ of any acyclic orientation~$A$ of an interval hypergraph~$\II$ is an interval of the weak order with minimum avoiding the pattern $231$ and maximum avoiding the pattern $213$.
\end{proposition}

\begin{proof}
From \cref{lem:prepi}, the fiber~$\Or^{-1}(A)$ is the set of linear extensions of $\less_A$, so that we use the characterization of \cref{prop:TOIP} to prove \cref{prop:preimageI}.
Let $1 \le a < b < c \le [n]$.
If we have $a \less_{A} c$, then, by definition of $\less_A$, there must be a sequence $I_1, \dots, I_k \in \II$ such that~$a = A(I_1)$, $A(I_{i+1}) \in I_i$ for all~$i \in [k-1]$, and~$c \in I_k$.
As $\bigcup_{i \in [k]} I_i$ is an interval containing~$a$ and~$c$ and~$a < b < c$, it contains also~$b$.
Hence, there is~$i \in [k]$ such that~$b \in I_i$, and the sequence~$I_1, \dots, I_i$ proves that~$a \less_{A} b$.
The case $a \more_{A} c$ is similar and  implies that $b \more_A c$.
\end{proof}

\begin{example}
\vincent{todo: We need pictures of the surjection map and of the fibers. Here and latter.}
\end{example}

\begin{remark}
\cref{prop:preimageI} fails for arbitrary hypergraphs~$\HH$, for instance for~$\HH \eqdef \{1, 2, 3, 13\}$, there are two fibers~$\{123, 213, 132\}$ and~$\{231, 312, 321\}$ which are not intervals of the weak order.
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{A source characterization of $P_\II$}  
\label{subsec:sourceAcyclicI}

We now characterize the comparisons in the poset $P_\II$ in terms of the comparisons of the sources for each $I\in \II$.

\begin{proposition}
\label{prop:sourceOrderI}
For any acyclic orientations~$A$ and~$B$ of an interval hypergraph~$\II$,
\[
A \le B \quad \iff \quad A(I) \le B(I) \text{ for all } I \in \II .
\]
\end{proposition}

\begin{proof}
The forward direction is immediate as it holds for increasing flip by \cref{def:flip} and any cover of~$P_\II$ is an increasing flip.
For the backward direction, assume that~$A(I) \le B(I)$ for all~$I \in \II$.
The proof works by induction on~$|\set{I \in \II}{A(I) < B(I)}|$.

%Consider the set of pairs~$1 \le i < j \le$ such that there is~$I \in \II$ with~$A(I) = i$ and~$B(I) = j$.
%Choose~$i < j$ in this set such that~$j$ is maximal, and if draw, $i$ is maximal.
Choose~$J \in \II$ such that~$A(J) < B(J)$ and for any~$I \in \II$ with~$A(I) < B(I)$, we have~$B(I) < B(J)$, or~$B(I) = B(J)$ and~$A(I) \le A(J)$.

Let~$O$ be the orientation of~$\II$ obtained from~$A$ by flipping~$A(J)$ to~$B(J)$ as described in \cref{def:flip}.
We claim that~$O$ is acyclic and that~$O(I) \le B(I)$ for all~$I \in \II$. 
We conclude by induction that~$O \le B$, and thus~$A \le O \le B$ as desired.

We first prove that~$O$ is acyclic.
Otherwise, we would have~$I,I' \in \II$ such that~$O(I) \in I' \ssm \{O(I')\}$ and~$O(I') \in I \ssm \{O(I)\}$.
As~$A$ is acyclic, we have~$A(I) \ne O(I)$ or~$A(I') \ne O(I')$, but not both since~$O(I) \ne O(I')$.
Hence, we can assume by symmetry that~$O(I) = A(I)$ while~$A(I') = A(J)$ and~$O(I') = B(J)$.
Up to updating~$J$ to~$I'$, we can thus also assume that~$I' = J$.
As~$B$ is acyclic, we have~$B(I) \ne O(I)$.
Since~$A(I) = O(I) \ne B(I)$, our choice of~$J$ ensures that
\begin{itemize}
\item either~$B(I) < B(J)$. 
We then obtain that~$A(I) \le B(I) < B(J)$.
As~$A(I) = O(I) \in I' = J$ and~$B(J) \in J$, we thus get that~$B(I) \in J$.
Moreover, $B(J) = O(I') \in I$.
As~$B(I) \ne B(J)$, we obtain a contradiction with the acyclicity of~$B$.
\item or~$B(I) = B(J)$ and~$A(I) \le A(J)$.
We then have~$A(I) \le A(J) \le B(J) = B(I)$ so that~$A(J) \in I$.
As~$A(I) = O(I) \in I' = J$ and~$A(I) \ne A(J)$, we obtain a contradiction with the acyclicity of~$A$.
\end{itemize}

We now prove that~$O(I) \le B(I)$ for all~$I \in \II$.
We thus consider~$I \in \II$ and distinguish two cases:
\begin{itemize}
\item Assume first that~$A(I) = A(J)$ and~$B(J) \in I$. By \cref{def:flip}, we then have~${O(I) = B(J)}$. Moreover, as~$I$ is an interval and contains~$A(J)$ and~$B(J)$, it contains~$[A(J), B(J)] \subseteq J$. As~$B$ is acyclic, this implies that~$B(I) \notin {[A(J), B(J)[}$. As~$A(J) = A(I) \le B(I)$, we thus obtain that~$O(I) = B(J) \le B(I)$.
\item Otherwise, we have~$O(I) = A(I) \le B(I)$.
\qedhere
\end{itemize}
\end{proof}
%\vincent{Does \cref{prop:sourceOrderI} holds for general hypergraphs? I guess not, but I want an example... I believe that this question is really important.}
%\Nantel{if Felix proof holds, we will have to add a remark stating the general statement and citing a forthcoming paper}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Flips and cover relations for interval hypergraphs}  
\label{subsec:cover}

In this section, we exploit \cref{prop:acyclicI} to provide a simple description of the flips and cover relations of~$P_\II$ for an interval hypergraph~$\II$.

\begin{proposition}
\label{prop:isFlipI}
The orientation obtained from an acyclic orientation~$A$ of an interval hypergraph~$\II$ by flipping~$i$ to~$j$ (in the sense of \cref{def:flip}) is acyclic if and only if~$j \in \cX_{A,i} \ssm \cY_{A,i}$~where
\[
\cX_{A,i} \eqdef \bigcup_{\substack{I \in \II \\ A(I) = i}} I \ssm \{i\}
\qquad\text{and}\qquad
\cY_{A,i} \eqdef \bigcup_{\substack{J \in \II \\ A(J) \in \cX_{A,i}}} \!\!\!\! J \ssm \{A(J)\}.
\]
\end{proposition}

\begin{proof}
%Let~$B$ be the orientation obtained by flipping~$i$ to~$j$.
Assume first that~$j \notin \cX_{A,i} \ssm \cY_{A,i}$. Then
\begin{itemize}
\item either~$j \notin \cX_{A,i}$, hence there is no~$I \in \II$ with~$i = A(I)$ and~$j \in I$, and the flip is not~possible. % (\ie~$A = B$).
\item or~$j \in \cX_{A,i} \cap \cY_{A,i}$. Since~$j \in \cX_{A,i}$, there is~$I \in \II$ with~$A(I) = i$ and~$j \in I \ssm \{i\}$. Since~$j \in \cY_{A,i}$, there is~$J \in \II$ with~$k \eqdef A(J) \in \cX_{A,i}$ and~$j \in J \ssm \{k\}$. As~$k \in \cX_{A,i}$, there is also~$K \in \II$ such that~$A(K) = i$ and~$k \in K \ssm \{i\}$. We now consider the three distinct values~$i, j, k$ and distinguish three cases depending on which is in between the other two:
	\begin{itemize}
	\item if~$i$ is in between~$j$ and~$k$, then~$i \in J$ since~$j,k \in J$ and~$J$ is an interval. Hence, $A(K) = i \in J$ and~$A(J) = k \in K$ and~$i \ne k$ contradicts the acyclicity of~$A$.
	\item if~$j$ is in between~$i$ and~$k$, then~$i \in K$ since~$i,k \in K$ and~$K$ is an interval. Hence, $B(K) = j \in J$ and~$B(J) = k \in K$ and~$j \ne k$, so that~$B$ is cyclic.
	\item if~$k$ is in between~$i$ and~$j$, then~$k \in I$ since~$i,j \in I$ and~$I$ is an interval. Hence, $B(I) = j \in J$ and~$B(J) = k \in I$ and~$j \ne k$, so that~$B$ is cyclic.
	\end{itemize}
\end{itemize}
Conversely, assume that~$B$ is cyclic.
By \cref{prop:acyclicI}, there are~$I,J \in \II$ with~$B(I) \in J \ssm \{B(J)\}$ and~$B(J) \in I \ssm \{B(I)\}$.
As~$A$ is acyclic, we have~$i = A(I) \ne B(I) = j$ or~$i = A(J) \ne B(J) = j$, but not both since~$B(I) \ne B(J)$.
By symmetry, we can assume that~$i = A(I) \ne B(I) = j$ and~$i \ne A(J) = B(J)$.
As~$A(I) = i$ and~$i \ne A(J) = B(J) \in I$, we obtain that~$A(J) \in \cX_{A,i}$.
Moreover~$j = B(I) \in J \ssm \{B(J)\} = J \ssm \{A(J)\}$.
Hence, we obtain that~$j \in \cY_{A,i}$.
\end{proof}

\begin{proposition}
\label{prop:isFlipI}
Consider an acyclic orientation~$A$ of an interval hypergraph~$\II$, an increasing flip~$\flip{A}{i}{j}{B}$ (in the sense of \cref{def:flip}), and let~$k \eqdef \max\set{\max(I)}{I \in \II \text{ and } A(I) = i}$.
Then~$B$ is acyclic if and only if there is no~$J \in \II$ with~$j \in J \ssm \{A(J)\}$ and~$A(J) \in {]i,k]}$.
\end{proposition}

\begin{proof}
Assume first that there is~$J \in \II$ with~$j \in J \ssm \{A(J)\}$ and~$A(J) \in {]i,k]}$.
Let~$I \in \II$ be such that~$A(I) = i$ and~$k = \max(I)$.
Then~$B(J) = A(J) \in {]i,k]} = {]A(I), \max(I)]} \subseteq I$ and~$B(I) = j \in J$ and~$B(I) = j \ne A(J) = B(J)$ implies that $B$ is cyclic.

Conversely, assume that $B$ is cyclic.
By \cref{prop:acyclicI}, there are~$I,J \in \II$ with~${B(I) \in J \ssm \{B(J)\}}$ and~$B(J) \in I \ssm \{B(I)\}$.
As~$A$ is acyclic, we have~$i = A(I) \ne B(I) = j$ or~$i = A(J) \ne B(J) = j$, but not both since~$B(I) \ne B(J)$.
By symmetry, we can assume that~$i = A(I) \ne B(I) = j$ and~$A(J) = B(J)$.
We obtain that~$j = B(I) \in J \ssm \{B(J)\} = J \ssm \{A(J)\}$.
Moreover, we have~$i < A(J)$ as otherwise~$A(J) = B(J) \in I$ and~$A(I) = i \in [A(J), j] = [A(J), B(I)] \subseteq J$ and~$A(I) \ne A(J)$ would contradict the acyclicity of~$A$.
As~$A(J) = B(J) \in I \ssm \{B(I)\}$, we obtain that~$i < A(J) < \max(I)$.
We conclude that~$A(J) \in {]i,k]}$ since~$\max(I) \le k$ as~$A(I) = i$.
\end{proof}

\begin{proposition}
\label{prop:isCoverI}
%Let~$A$ and~$B$ be two acyclic orientations of an interval hypergraph~$\II$  related by an increasing flip of~$i$ to~$j$.
An increasing flip \flip{A}{i}{j}{B} between two acyclic orientations of an interval hypergraph~$\II$ is a cover relation of~$P_\II$ if and only if
\[
{]i,j[} \;\; \subseteq \bigcup_{\substack{J \in \II \\ A(J) \in {]i,j]}}} J \ssm \{A(J)\}.
\]
\end{proposition}

\begin{proof}
Let~$k \eqdef \max\set{\max(I)}{I \in \II \text{ and } A(I) = i}$ and~$I \in \II$ be such that~$A(I) = i$ and~${k = \max(I)}$.
Note that~$i < j \le k$ since~$\flip{A}{i}{j}{B}$ is a flip.

Assume first that there is~$\ell \in {]i,j[} \ssm \bigcup_{A(J) \in {]i,j]}} J \ssm \{A(J)\}$.
We claim that there is no~$J \in \II$ with~$\ell \in J \ssm A(J)$ and~$A(J) \in ]i,k]$.
Indeed, by definition of~$\ell$, we would have~$A(J) > j$.
Then~$B(I) = j \in [\ell, A(J)] \subseteq J$ and~$B(J) = A(J) \in {]i,k]} \subseteq I$ and~$B(I) = j < A(J) = B(J)$ contradicts the acyclicity of~$A$.
We conclude from \cref{prop:isFlipI} that the orientation~$C$ of~$\II$ obtained by flipping~$i$ to~$\ell$ is acyclic.
This implies that~$\flip{A}{i}{j}{B}$ is not a cover relation as it is obtained transitively from~$\flip{A}{i}{\ell}{C}$ and~$\flip{C}{\ell}{j}{B}$.

Conversely, assume that~$A \le B$ is not a cover relation.
Then there is a flip~$\flip{A}{i}{\ell}{C}$, where~$C$ is an acyclic orientation of~$\II$ such that~$A < C < B$.
Since~$\flip{A}{i}{j}{B}$ is a flip, we have~${A(K) = C(K) = B(K)}$ for any~$K \in \II$, except if~$A(K) = i$ and~$B(K) = j$.
Hence, there is~$K \in \II$ such that~$A(I) = i < C(I) = \ell < j = B(I)$.
Since~$\flip{A}{i}{\ell}{C}$ is a flip, we obtain from \cref{prop:isFlipI} that there is no~$J \in \II$ with~$\ell \in J \ssm \{A(J)\}$ and~$A(J) \in {]i,k]} \subseteq {]i,j]}$.
Hence,~$\ell \in {]i,j[} \ssm \bigcup_{A(J) \in {]i,j]}} J \ssm \{A(J)\}$.
\end{proof}

%\begin{proof}
%%Let~$I \in \II$ be such that~$A(I) = i$ and~$B(I) = j$.
%Assume first that there is~$k \in {]i,j[} \ssm \bigcup_{A(J) \in {]i,j]}} J \ssm \{A(J)\}$.
%Then~$k \in \cX_{A,i}$ since there is~$I \in \II$ with~$A(I) = i$ and~$B(I) = j$.
%Moreover, for any~$I,J \in \II$ with~$A(I) = i$, $A(J) \in I \ssm \{i\}$ and~$k \in J \ssm A(J)$, we have 
%\begin{itemize}
%\item $i < A(J)$, otherwise~$A(I) = i \in [A(J),k] \subseteq J$ and~${A(J) \in I \ssm \{A(I)\}}$, so that~$A$ is cyclic,
%\item $A(J) \le j$, otherwise~$B(I) = j \in [k,A(J)] \subseteq J$ and~${B(J) = A(J) \in I \ssm \{B(I)\}}$, so that~$B$ is cyclic,
%\end{itemize}
%so that~$A(J) \in {]i,j]}$, which implies by definition of~$k$ that~$k \notin J \ssm \{A(J)\}$.
%Hence~$k \notin \cY_{A,i}$.
%As~$k \in \cX_{A,i} \ssm \cY_{A,i}$, \cref{prop:isFlipI} ensures that the orientation~$C$ of~$\II$ obtained by flipping~$i$ to~$k$ is acyclic.
%This implies that~$\flip{A}{i}{j}{B}$ is not a cover relation as it is obtained transitively from~$\flip{A}{i}{k}{C}$ and~$\flip{C}{k}{j}{B}$.
%
%Conversely, assume that~$A \le B$ is not a cover relation.
%Then there exists~$k \ne i$ and an acyclic orientation~$C$ of~$I$ such that~$\flip{A}{i}{k}{C}$ is a flip and~$A < C < B$.
%Since~$\flip{A}{i}{j}{B}$ is a flip, we have~$A(I) = C(I) = B(I)$ except if~$A(I) = i$ and~$B(I) = j$.
%Hence, there is~$I$ such that~$A(I) = i < C(I) = k < j = B(I)$.
%Since~$\flip{A}{i}{k}{C}$ is a flip, we obtain from \cref{prop:isFlipI} that~$k \notin \cY_{A,i}$.
%As~$]i,j] \subseteq I \ssm \{i\} \subseteq \cX_{A,i}$, there is no~$J \in \II$ with~$A(J) \in {]i,j]}$ and~$k \in J \ssm \{A(J)\}$.
%Hence, $k \in {]i,j[} \ssm \bigcup_{A(J) \in {]i,j]}} J \ssm \{A(J)\}$.
%\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Interval hypergraphic lattices}
\label{sec:LatticePI}

\begin{figure}
	\centerline{
		\begin{tabular}{c@{\qquad}c}
			\begin{tikzpicture}[scale=1.5,baseline=-3.5cm]
				\node (a) at (2,0) {\acyclicOrientation{4}{1/3/1,2/4/2}};
				\node (b) at (1,1) {\acyclicOrientation{4}{1/3/1,2/4/3}};
				\node (c) at (3,1) {\acyclicOrientation{4}{1/3/2,2/4/2}};
				\node (d) at (1,2) {\acyclicOrientation{4}{1/3/1,2/4/4}};
				\node (e) at (3,3) {\acyclicOrientation{4}{1/3/3,2/4/3}};
				\node (f) at (1,3) {\acyclicOrientation{4}{1/3/2,2/4/4}};
				\node (g) at (2,4) {\acyclicOrientation{4}{1/3/3,2/4/4}};
				\draw (a)--(b);
				\draw (a)--(c);
				\draw (b)--(d);
				\draw (b)--(e);
				\draw (c)--(e);
				\draw (c)--(f);
				\draw (d)--(f);
				\draw (f)--(g);
				\draw (e)--(g);
			\end{tikzpicture}
			&
			\begin{tikzpicture}[scale=2.5]
				\node (a) at (2.5,0) {\acyclicOrientation{4}{1/2/1,1/3/1,1/4/1,2/4/2,3/4/3}};
				\node (b) at (1,1) {\acyclicOrientation{4}{1/2/1,1/3/1,1/4/1,2/4/3,3/4/3}};
				\node (c) at (2.5,1) {\acyclicOrientation{4}{1/2/1,1/3/1,1/4/1,2/4/2,3/4/4}};
				\node (d) at (4,1) {\acyclicOrientation{4}{1/2/2,1/3/2,1/4/2,2/4/2,3/4/3}};
				\node (e) at (1,2) {\acyclicOrientation{4}{1/2/1,1/3/1,1/4/1,2/4/4,3/4/4}};
				\node (f) at (2,2) {\acyclicOrientation{4}{1/2/1,1/3/3,1/4/3,2/4/3,3/4/3}};
				\node (g) at (4,2) {\acyclicOrientation{4}{1/2/2,1/3/2,1/4/2,2/4/2,3/4/4}};
				\node (h) at (1,3) {\acyclicOrientation{4}{1/2/1,1/3/1,1/4/4,2/4/4,3/4/4}};
				\node (i) at (3,3) {\acyclicOrientation{4}{1/2/2,1/3/3,1/4/3,2/4/3,3/4/3}};
				\node (j) at (2,4) {\acyclicOrientation{4}{1/2/1,1/3/2,1/4/4,2/4/4,3/4/4}};
				\node (k) at (4,4) {\acyclicOrientation{4}{1/2/2,1/3/2,1/4/4,2/4/4,3/4/4}};
				\node (l) at (3,5) {\acyclicOrientation{4}{1/2/2,1/3/3,1/4/4,2/4/4,3/4/4}};
				\draw (a)--(b);
				\draw (a)--(c);
				\draw (a)--(d);
				\draw (b)--(e);
				\draw (b)--(f);
				\draw (c)--(e);
				\draw (c)--(g);
				\draw (d)--(i);
				\draw (d)--(g);
				\draw (e)--(h);
				\draw (f)--(i);
				\draw (f)--(j);
				\draw (g)--(k);
				\draw (h)--(j);
				\draw (h)--(k);
				\draw (i)--(l);
				\draw (j)--(l);
				\draw (k)--(l);
			\end{tikzpicture}
			\\[.2cm]
			$\{1,2,3,4,123,234\}$
			&
			$\{1,2,3,4,12,123,1234,234,34\}$
%			\\
%			not lattice
%			&
%			not lattice
		\end{tabular}
	}
	\caption{Two interval hypergraphic posets which are not lattices.}
	\label{fig:notLattices}
\end{figure}

\begin{figure}
	\centerline{
		\begin{tabular}{c@{\qquad}c}
			\begin{tikzpicture}[scale=1.5,baseline=-3.5cm]
				\node (a) at (1,0) {\acyclicOrientation{3}{1/2/1,2/3/2,1/3/1}};
				\node (b) at (0,1.3) {\acyclicOrientation{3}{1/2/1,2/3/3,1/3/1}};
				\node (c) at (2,2) {\acyclicOrientation{3}{1/2/2,2/3/2,1/3/2}};
				\node (d) at (0,2.7) {\acyclicOrientation{3}{1/2/1,2/3/3,1/3/3}};
				\node (e) at (1,4) {\acyclicOrientation{3}{1/2/2,2/3/3,1/3/3}};
				\draw (a)--(b);
				\draw (a)--(c);
				\draw (b)--(d);
				\draw (c)--(e);
				\draw (d)--(e);
			\end{tikzpicture}
			&
			\begin{tikzpicture}[scale=2.2]
				\node (a) at (3,0) {\acyclicOrientation{4}{1/2/1,2/3/2,3/4/3,1/3/1,2/4/2,1/4/1}};
				\node (b) at (1,1) {\acyclicOrientation{4}{1/2/2,2/3/2,3/4/3,1/3/2,2/4/2,1/4/2}};
				\node (c) at (3,1) {\acyclicOrientation{4}{1/2/1,2/3/3,3/4/3,1/3/1,2/4/3,1/4/1}};
				\node (d) at (5,1) {\acyclicOrientation{4}{1/2/1,2/3/2,3/4/4,1/3/1,2/4/2,1/4/1}};
				\node (e) at (3,3) {\acyclicOrientation{4}{1/2/2,2/3/2,3/4/4,1/3/2,2/4/2,1/4/2}};
				\node (f) at (5,2) {\acyclicOrientation{4}{1/2/1,2/3/2,3/4/4,1/3/1,2/4/4,1/4/1}};
				\node (g) at (2,4) {\acyclicOrientation{4}{1/2/1,2/3/3,3/4/3,1/3/3,2/4/3,1/4/3}};
				\node (h) at (4,3) {\acyclicOrientation{4}{1/2/1,2/3/2,3/4/4,1/3/1,2/4/4,1/4/4}};
				\node (i) at (5,3) {\acyclicOrientation{4}{1/2/1,2/3/3,3/4/4,1/3/1,2/4/4,1/4/1}};
				\node (j) at (1,5) {\acyclicOrientation{4}{1/2/2,2/3/3,3/4/3,1/3/3,2/4/3,1/4/3}};
				\node (k) at (3,5) {\acyclicOrientation{4}{1/2/2,2/3/2,3/4/4,1/3/2,2/4/4,1/4/4}};
				\node (l) at (5,4) {\acyclicOrientation{4}{1/2/1,2/3/3,3/4/4,1/3/1,2/4/4,1/4/4}};
				\node (m) at (5,5) {\acyclicOrientation{4}{1/2/1,2/3/3,3/4/4,1/3/3,2/4/4,1/4/4}};
				\node (n) at (3,6) {\acyclicOrientation{4}{1/2/2,2/3/3,3/4/4,1/3/3,2/4/4,1/4/4}};
				\draw (a)--(b);
				\draw (a)--(c);
				\draw (a)--(d);
				\draw (b)--(e);
				\draw (b)--(j);
				\draw (c)--(g);
				\draw (c)--(i);
				\draw (d)--(e);
				\draw (d)--(f);
				\draw (e)--(k);
				\draw (f)--(h);
				\draw (f)--(i);
				\draw (g)--(j);
				\draw (g)--(m);
				\draw (h)--(k);
				\draw (h)--(l);
				\draw (i)--(l);
				\draw (j)--(n);
				\draw (k)--(n);
				\draw (l)--(m);
				\draw (m)--(n);
			\end{tikzpicture}
			\\[.2cm]
			$\{1,2,3,12,23,123\}$
			&
			$\{1,2,3,4,12,23,34,123,234,1234\}$
		\end{tabular}
	}
%	\centerline{semidistributive lattice, but not distributive}
	\caption{The Tamari lattice (semidistributive lattice, but not distributive).}
	\label{fig:Tamari}
\end{figure}

In this section, we prove \cref{thm:latticeI} which we first repeat: % characterizing the interval hypergraphs $\II$ for which $P_\II$ are lattices.

\begin{definition}
\label{def:intersectionClosed}
An interval hypergraph~$\II$ is \defn{closed under intersection} if $I, J \in \II$ and~$I \cap J \ne \varnothing$ impiles~$I \cap J \in \II$.
\end{definition}

\begin{definition}
A poset~$P$ is a \defn{lattice} if any subset of~$P$ admits a \defn{join} (least upper bound) and a \defn{meet} (greatest lower bound).
\end{definition}

\begin{theoremA}
For an interval hypergraph $\II$ on~$[n]$ with~$\{i\} \in \II$ for all~$i \in [n]$, the poset $P_\II$ is a lattice if and only if $\II$ is closed under intersection.
\end{theoremA}

\begin{example}
The interval hypergraphic posets of \cref{fig:notLattices} are not lattices, while those of \cref{fig:Tamari,fig:distributiveLattices,fig:semidistributiveLattices,fig:notSemidistributiveLattices} are lattices.
%Note that
%\begin{itemize}
%\item the hypergraphic poset of the hypergraph containing all intervals is the Tamari lattice, % see \cref{fig:Tamari},
%\item the hypergraphic poset of the hypergraph containing all singletons and all initial intervals is the boolean lattice, % see \cref{fig:distributiveLattices}\,(bottom right),
%\item the hypergraphic poset of the hypergraph containing all singletons and all initial and final intervals is not a lattice (this motivated \cite{PilaudPolyakova} to define the Hochschild polytopes). % see \cref{fig:notLattices}\,(right). 
%\end{itemize}
\end{example}

\begin{example}
The hypergraphic poset of~$\{ 1, 2, 3, 12, 23, 123\}$ (resp.~of~$\{ 1, 2, 3, 12, 123\}$) is a lattice.
In general, the hypergraphic poset of all intervals (resp. all initial intervals) is the Tamari lattice (resp.~the boolean lattice).
See \cref{fig:Tamari,fig:distributiveLattices}\,(bottom right).
\end{example}

\begin{example}
The hypergraphic posets of~$\{1, 2, 3, 4, 123, 234\}$ and of~$\{ 1, 2, 3, 4, 12, 123, 1234, 234, 34\}$ are not lattices.
In general, the hypergraphic poset of all initial and final intervals is not a lattice.
See \cref{fig:notLattices}.
\end{example}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{If $P_\II$ is a lattice, then $\II$ is closed under intersection}  
\label{subsec:latticeForward}

We are now ready to show the forward implication of \cref{thm:latticeI}.
See \cref{fig:notLattices} for an illustration.

\begin{proposition}
\label{prop:latticeForward}
If~$\II$ is an interval  hypergraph such that the poset $P_\II$ is a lattice, then $\II$ is closed under intersection.
\end{proposition}

\begin{proof}
See \cref{exm:proofLatticeForward} for the smallest example of the proof.
By contradiction, assume we have $I,J\in \II$ such that $\varnothing  \not = I\cap J\not\in \II$.
Let
\begin{alignat*}{6}
& a \eqdef b-1, &
\qquad
& b \eqdef \min(I\cap J), &
\qquad
& c \eqdef \max(I\cap J), &
\qquad
& d \eqdef c+1. &
\intertext{
Note that $b\ne c$ since~$\II$ contains all singletons, hence~$a < b < c < d$.
By symmetry, we assume that $a\in I\ssm J$ and $d\in J\ssm I$.
Let $X$ be the word formed by the complement of $\{a,b,c,d\}$ in~$[n]$ written in increasing order.
We now construct four permutations 
}
& \pi_A \eqdef bacdX, &
\qquad
& \pi_B \eqdef acdbX,&
\qquad
& \pi_C \eqdef dbacX, &
\qquad
& \pi_D \eqdef cdbaX, &
\intertext{
and consider the four distinct acyclic orientations
}
& A \eqdef \Or_{\pi_A}, &
\qquad
& B \eqdef \Or_{\pi_B}, &
\qquad
& C \eqdef \Or_{\pi_C}, &
\qquad
& D \eqdef \Or_{\pi_D}. &
\intertext{
We display below the four orientations highlighting only the intervals $I$ and $J$:
}
&
	A =  
	\begin{tikzpicture}[scale=1,baseline=.0cm]
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,0)--(1.2,0);   \node at (.3,0) {$\bullet$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.3,.3)--(1.5,.3);   \node at (.3,.3) {$\bullet$};
	\node at (1.8,0) {$\scriptstyle I$};
	\node at (1.8,.3) {$\scriptstyle J$};
	\node at  (0,-.33) {$\scriptstyle a$};
	\node at  (.3,-.3) {$\scriptstyle b$};
	\node at  (1.2,-.33) {$\scriptstyle c$};
	\node at  (1.5,-.3) {$\scriptstyle d$};
	\end{tikzpicture} 
&&
	B =
	\begin{tikzpicture}[scale=1,baseline=.0cm]
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,0)--(1.2,0);   \node at (0,0) {$\bullet$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.3,.3)--(1.5,.3);   \node at (1.2,.3) {$\bullet$};
	\node at (1.8,0) {$\scriptstyle I$};
	\node at (1.8,.3) {$\scriptstyle J$};
	\node at  (0,-.33) {$\scriptstyle a$};
	\node at  (.3,-.3) {$\scriptstyle b$};
	\node at  (1.2,-.33) {$\scriptstyle c$};
	\node at  (1.5,-.3) {$\scriptstyle d$};
	\end{tikzpicture} 
&&
	C =  
	\begin{tikzpicture}[scale=1,baseline=.0cm]
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,0)--(1.2,0);   \node at (.3,0) {$\bullet$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.3,.3)--(1.5,.3);   \node at (1.5,.3) {$\bullet$};
	\node at (1.8,0) {$\scriptstyle I$};
	\node at (1.8,.3) {$\scriptstyle J$};
	\node at  (0,-.33) {$\scriptstyle a$};
	\node at  (.3,-.3) {$\scriptstyle b$};
	\node at  (1.2,-.33) {$\scriptstyle c$};
	\node at  (1.5,-.3) {$\scriptstyle d$};
	\end{tikzpicture} 
&&
	D =
	\begin{tikzpicture}[scale=1,baseline=.0cm]
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,0)--(1.2,0);   \node at (1.2,0) {$\bullet$};
	\draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.3,.3)--(1.5,.3);   \node at (1.2,.3) {$\bullet$};
	\node at (1.8,0) {$\scriptstyle I$};
	\node at (1.8,.3) {$\scriptstyle J$};
	\node at  (0,-.33) {$\scriptstyle a$};
	\node at  (.3,-.3) {$\scriptstyle b$};
	\node at  (1.2,-.33) {$\scriptstyle c$};
	\node at  (1.5,-.3) {$\scriptstyle d$};
	\end{tikzpicture} 
&
\end{alignat*}
%\[
%\begin{array}{lcr}
%	C =  
%	\begin{tikzpicture}[scale=1,baseline=.0cm]
%	\node at (-.3,.3) {$\scriptstyle I$}; \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,.3)--(1.2,.3);   \node at (.3,.3) {$\bullet$};
%	\node at (-.3,0) {$\scriptstyle J$};  \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.3,0)--(1.5,0);   \node at (1.5,0) {$\bullet$};
%	\node at  (0,-.3) {$\scriptstyle a$};
%	\node at  (.3,-.3) {$\scriptstyle b$};
%	\node at  (1.2,-.3) {$\scriptstyle c$};
%	\node at  (1.5,-.3) {$\scriptstyle d$};
%	\end{tikzpicture} 
%	&\qquad\quad&
%	\begin{tikzpicture}[scale=1,baseline=.0cm]
%	\node at (2,.3) {$\scriptstyle I$}; \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,.3)--(1.2,.3);   \node at (1.2,.3) {$\bullet$};
%	\node at (2,0) {$\scriptstyle J$};  \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.3,0)--(1.5,0);   \node at (1.2,0) {$\bullet$};
%	\node at  (0,-.3) {$\scriptstyle a$};
%	\node at  (.3,-.3) {$\scriptstyle b$};
%	\node at  (1.2,-.3) {$\scriptstyle c$};
%	\node at  (1.5,-.3) {$\scriptstyle d$};
%	\end{tikzpicture} 
%	= D 
%	\\ \\
%	A =  
%	\begin{tikzpicture}[scale=1,baseline=.0cm]
%	\node at (-.3,.3) {$\scriptstyle I$}; \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,.3)--(1.2,.3);   \node at (.3,.3) {$\bullet$};
%	\node at (-.3,0) {$\scriptstyle J$};  \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.3,0)--(1.5,0);   \node at (.3,0) {$\bullet$};
%	\node at  (0,-.3) {$\scriptstyle a$};
%	\node at  (.3,-.3) {$\scriptstyle b$};
%	\node at  (1.2,-.3) {$\scriptstyle c$};
%	\node at  (1.5,-.3) {$\scriptstyle d$};
%	\end{tikzpicture} 
%	&\qquad\quad&
%	\begin{tikzpicture}[scale=1,baseline=.0cm]
%	\node at (2,.3) {$\scriptstyle I$}; \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (0,.3)--(1.2,.3);   \node at (0,.3) {$\bullet$};
%	\node at (2,0) {$\scriptstyle J$};  \draw [thick,{Bar[width=3pt]}-{Bar[width=3pt]}] (.3,0)--(1.5,0);   \node at (1.2,0) {$\bullet$};
%	\node at  (0,-.3) {$\scriptstyle a$};
%	\node at  (.3,-.3) {$\scriptstyle b$};
%	\node at  (1.2,-.3) {$\scriptstyle c$};
%	\node at  (1.5,-.3) {$\scriptstyle d$};
%	\end{tikzpicture} 
%	= B
%\end{array}
%\]
We have that $\pi_A < \pi_C$, $\pi_A < \pi_D$ and $\pi_B < \pi_D$ in the weak order.
\cref{coro:weakToP} implies that $A < C$, $A < D$ and $B < D$ in~$P_\II$.
We moreover claim that $B < C$  but this does not follow directly from the weak order since $\pi_B\not<\pi_C$.
To show our claim, consider $\pi_E=adcbX$ and $\pi_F=adbcX$.
For any $K\in \II$ such that $a,d\not\in K$, we cannot have both $c,d\in K$, since this would imply that $K=[c,d]=I\cap J\not\in \II$, a contradiction.
This shows that $E=\Or_{\pi_E}=\Or_{\pi_F}=F$.
Now we have $\pi_B<\pi_E$ and $\pi_F<\pi_C$ which gives $B<E=F<C$.
 
 If the poset $P_\II$ is a lattice and~$A \le C$ $A \le D$, $B \le C$ and~$B \le D$, there is~$M$ such that~$A \le M$, $B \le M$, $M \le C$ and~$M \le D$ (anything between~$A \join B$ and~$C \meet D$ works).
%If the poset $P_\II$ is a lattice, then we can find a unique join $M= A \join B$.
%\vincent{I don't like that the join is called~$M$. We cannot call it~$J$ as it was used before. Maybe we could take the meet~$C \meet D$ instead, it does not change anything...}
%By definition $A\le M$ and $B\le M$.
%By property of join we also have $M\le C$ and $M\le D$ since both $C$ and $D$ are  greater than $A$ and $B$.
Let $\pi_M$ be any permutation such that $M=\Or_{\pi_M}$ and let  
\[
m=\pi \big( \min\set{i}{\pi_M(i)\in I\cup J} \big).
\]
If $m<b$, then $M(I) = m < b = A(I)$ and the easy forward implication of \cref{prop:sourceOrderI} implies that $A\not\le M$.
By similar arguments $b\le m<c$ would imply~$B\not\le M$, $b< m\le c$ would imply~$M\not\le C$, and $c<m$ would imply~$M\not\le D$.
This is a contradiction to the existence of $m$.
\end{proof}

\begin{example}
\label{exm:proofLatticeForward}
For the interval hypergraph~$\{1, 2, 3, 4, 123, 234\}$ illustrated in \cref{fig:notLattices}\,(left), we have~$a = 1$, $b = 2$, $c = 3$, $d = 4$ and
\[
A = \acyclicOrientation{4}{1/3/2,2/4/2}
\qquad
B = \acyclicOrientation{4}{1/3/1,2/4/3}
\qquad
C = \acyclicOrientation{4}{1/3/2,2/4/4}
\quad\text{and}\quad
D = \acyclicOrientation{4}{1/3/3,2/4/3}.
\]
\end{example}

\begin{remark}
\cref{prop:latticeForward} fails when~$\HH$ is not an interval hypergraph.
For instance, the hypergraph~$\HH \eqdef \{ 1, 2, 3, 4, 5, 1234, 2345, 23, 24, 34 \}$ is not closed under intersection, while its hypergraphic poset~$P_\HH$ is a lattice.
% sage: HypergraphicalPolytopes([[1,2,3,4], [2,3,4,5], [2,3], [2,4], [3,4]]).hypergraphical_poset().is_lattice()
% True
%\vincent{Maybe we could draw this lattice. It has 24 elements.}
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Properties of $P_\II$ when~$\II$ is closed under intersection}  
\label{subsec:IntClosedI}

For the backward implication of \cref{thm:latticeI}, we need to investigate the properties of interval hypergraphs that are closed under intersection.
Recall from \cref{prop:preimageI} that the fiber $\Or^{-1}(A)$ of any acyclic orientation~$A$ of~$\II$ is an interval~$[\projDown_A,\projUp_A]$ in the weak order.
In the following we will keep this convention that $\projDown_A$ and $\projUp_A$ respectively denote the minimum and the maximum of the interval~$\Or^{-1}(A)$.

\begin{theorem}
\label{thm:propertiesI}
If $\II$ is an interval  hypergraph closed under intersection, then the following are equivalent for two acyclic orientations $A$ and $B$ of $\II$:
\begin{enumerate}[(a)]
	\item $A\le B$ in $P_\II$,
	\item $A(I) \le B(I)$ for all $I\in\II$,
	\item $\projDown_A \le \projUp_B$ in the weak order,
	\item $i \more_A j$ implies~$i \not\less_B j$ for all $i<j$.
\end{enumerate}
\end{theorem}

\begin{proof}
The equivalence \mbox{(a)$\iff$(b)} was established in \cref{prop:sourceOrderI}.

For the equivalence \mbox{(c)$\iff$(d)}, \cref{prop:WOIP,prop:preimageI} show that the inversion set of $\projDown_A$ is $\set{(j,i)}{i<j, \, i \more_A j}$ 
%and the set of non-inversions of $\projUp_B$ is  $\set{(i,j)}{i<j, \, i \less_B j}$.
while the inversion set of $\projUp_B$ is~$\set{(j,i)}{i<j, \, i \not\less_B j}$.
The equivalence of \mbox{(c)$\iff$(d)} thus follows from the characterization of the weak order in terms of inclusion of inversion sets.

The implication \mbox{(c)$\implies$(a)} follows from  \cref{coro:weakToP}.
Thus we only need to prove \mbox{(b)$\implies$(d)}.

For a contradiction, assume that $A(I) \le B(I)$ for all~$I \in \II$ and that we have some $i<j$ such that $i \more_A j$ and~$i \less_B j$.
Choose one such pair with~$j-i$ minimal.
Since $i \more_A j$ there are~$I_1, \dots, I_a \in \II$ such that~$j = A(I_1)$, $A(I_{p+1}) \in I_p$ for all~$p \in [a-1]$, and~$i \in I_k$.
Since $i \less_B j$ there are~$J_1, \dots, J_b \in \II$ such that~$i = B(J_1)$, $B(J_{q+1}) \in J_q$ for all~$q \in [\ell-1]$, and~$j \in J_\ell$.
Note that~$i \more_A A(I_p)$ for all~$p \in [a]$ and that~$B(J_q) \less_B j$ for all~$q \in [b]$.
Moreover, as~$\bigcup_{p \in [a]} I_p$ and~$\bigcup_{q \in [b]} J_q$ are both intervals containing~$i$ and~$j$, we have~$i \less_B k \more_A j$ for all~$i \le k \le j$.
By minimality of~$j-i$, we thus obtain that~$A(I_p) \notin {]i,j[}$ for~$p \in [a]$ and~$B(J_q) \notin {]i,j[}$ for~$q \in [b]$.
Hence, $[i,j]$ is contained in some~$I_p$ and some~$I_q$.
As~$A$ and~$B$ are acyclic, we obtain that~$a = 1 = b$.

We can thus assume that we have~$I,J \in \II$ such that~$i = B(J) \in I$ and~$j = A(I) \in J$.
As~$\II$ is closed under intersection, we have~$\{i,j\} \subseteq K \eqdef I \cap J \in \II$.
We have~$A(K) = j$, as otherwise~${A(I) = j \in K}$ an~$A(K) \in K \subseteq I$ and~$A(I) \ne A(K)$ would contradict the acyclicity of~$A$.
Similarly, we have~$B(K) = i$.
We conclude that~$B(K) = i < j = A(K)$ and~$K \in \II$ contradicting~(b).
\end{proof}

\begin{remark}
The implication \mbox{(a)$\implies$(c)} in \cref{thm:propertiesI} fails when~$\II$ is not closed under intersection.
For instance, for~$\II = \{1, 2, 3, 4, 123, 234\}$ and the acyclic orientations
\[
\begin{array}{ccccc}
	\acyclicOrientation{4}{1/3/1,2/4/3}
	&\qquad \le \qquad\qquad&
	\acyclicOrientation{4}{1/3/1,2/4/4}
	&\qquad \le \qquad\qquad&
	\acyclicOrientation{4}{1/3/2,2/4/3}
	\\[.6cm]
	A && B && C
\end{array}
\]
we have $[\projDown_A,\projUp_A]=[1324,1342]$, $[\projDown_B,\projUp_B]=[1423,4132]$ and $[\projDown_C,\projUp_C]=[4213,4231]$, so~$\projDown_A\not\le \projUp_C$.
\end{remark} 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{If $\II$ is closed under intersection, then $P_\II$ is a lattice}  
\label{subsec:latticeBackward}

We now conclude the proof of  \cref{thm:latticeI}.
This is a corollary of \cref{thm:propertiesI}.

\begin{proposition}
\label{prop:latticeBackward}
If~$\II$ is an interval  hypergraph closed under intersection, then the poset $P_\II$ is a lattice where
\[
A \join B =\Or_{\projDown_A \join \projDown_B}
\qquad\text{and}\qquad
A \meet B =\Or_{\projUp_A \meet \projUp_B}
\,.
\]
\end{proposition}

\begin{proof}
Consider four acyclic orientations~$A,B,C,D$ of~$\II$ such that $A\le C$, $A\le D$, $B\le C$ and~$B\le D$.
\cref{thm:propertiesI} implies that $\projDown_A \le \projUp_C$, $\projDown_A \le \projUp_D$, $\projDown_B \le \projUp_C$ and $\projDown_B \le \projUp_D$.
Hence
\begin{alignat*}{5}
& \projDown_A \le \projDown_A \join \projDown_B, &
\qquad
& \projDown_B \le \projDown_A \join \projDown_B, &
\qquad
& \projDown_A \join \projDown_B \le \projUp_C, &
\qquad
& \projDown_A \join \projDown_B \le \projUp_D, &
\intertext{which implies by \cref{coro:weakToP} that}
& A \le \Or_{\projDown_A \join \projDown_B}, &
\qquad
& B \le \Or_{\projDown_A \join \projDown_B}, &
\qquad
& \Or_{\projDown_A \join \projDown_B} \le C, &
\qquad
& \Or_{\projDown_A \join \projDown_B} \le D. &
\end{alignat*}
This implies that $A$ and $B$ admit a join
\[
A \join B \le \Or_{\projDown_A \join \projDown_B}.
\]
As~$A \le A\join B$ and $B \le A\join B$, \cref{thm:propertiesI} ensures that $\projDown_A \le \projUp_{A\join B}$ and~$\projDown_B \le \projUp_{A\join B}$, so that~$\projDown_A \join \projDown_B \le \projUp_{A\join B}$. By \cref{coro:weakToP}, this implies
\[
\Or_{\projDown_A \join \projDown_B} \le A \join B.
\]
This shows the result for the join~$\join$.
The proof for the meet~$\meet$ is similar.
\end{proof}

\begin{example}
\vincent{todo}
\end{example}

\begin{remark}
\cref{prop:latticeBackward} fails when~$\HH$ is not an interval hypergraph.
For instance, the hypergraph~$\HH \eqdef \{ 1, 2, 3, 4, 12, 13, 24, 34 \}$ is closed under intersection, while its hypergraphic poset~$P_\HH$ is not a lattice.
More generally, all hypergraphs~$\HH$ with~$|H| \le 2$ for all~$H \in \HH$ are closed under intersection, and the graphical zonotopes whose oriented skeleta are lattices were characterized in~\cite{Pilaud-acyclicReorientationLattices}.
% sage: HypergraphicalPolytopes([[1,2], [1,3], [2,4], [3,4]]).hypergraphical_poset().is_lattice()
% False
\end{remark}

\begin{remark}
In fact, our proof of \cref{prop:latticeBackward} is a general statement about \defn{quasi lattice maps}.
Namely, if~$L$ is a lattice and~$P$ a poset, and $\Psi : L \to P$ is a poset morphism such that~$\Psi^{-1}(A) = [\projDown_A, \projUp_A]$ is an interval  for all $A\in P$, and $A \le B$ implies $\projDown_A \le \projUp_B$, then $P$ is a lattice where~$A \join B =\Psi(\projDown_A \join \projDown_B)$ and~$A \meet B =\Psi(\projUp_A \meet \projUp_B)$.
Note that lattice maps satisfy the stronger condition that~$A \le B$ implies~$\projDown_A \le \projDown_B$ and~$\projUp_A \le \projUp_B$.
It would be interesting to characterize the quasi lattice maps of the weak order.
Note that the lattice maps of the weak order where described by N.~Reading in~\cite{Reading-latticeCongruences, Reading-arcDiagrams}.
\end{remark}

\begin{proposition}
\label{prop:joinLattice}
For an interval hypergraph~$\II$ closed under intersection, any acyclic orientations~$A_1, \dots A_q$ of~$\II$, and any~${I \in \II}$, we have
\[
%S(I, A \join B) = \min \Big( I \ssm \bigcup_{\substack{(j,J) \in A \cup B \\ \min(I) \le j \le \max(I)}} {[\min(J), j[} \Big).
\Big( \bigJoin_{p \in [q]} A_p \Big)(I) = \min \bigg( I \ssm \Big( \bigcup_{p \in [q]} \bigcup_{\substack{J \in \II \\ A_p(J) \in I}} {[\min(J), A_p(J)[} \Big) \bigg).
\]
\end{proposition}

\begin{proof}
Let~$O$ be the orientation of~$\II$ defined by the formula of the statement.
We first prove that~$O$ is acyclic.
Otherwise, \cref{prop:acyclicI} ensures the existence of~$I,J \in \II$ such that~$O(I) \in J \ssm \{O(J)\}$ and~$O(J) \in I \ssm \{O(I)\}$.
Assume by symmetry that~$O(I) < O(J)$.
As~$O(I) \in J$ and~$O(J) > O(J)$, there exists~$p \in [q]$ and~$K \in \II$ such that~$A_p(K) \in J$ and~$\min(K) \le O(I) < A_p(K) \le O(J)$.
As~$I$ is an interval containing~$O(I)$ and~$O(J)$, and~$O(I) < A_p(K) \le O(J)$, it also contains~$A_p(K)$.
We thus obtain that~$A_p(K) \in I$ and~$\min(K) \le O(I) < A_p(K)$ contradicting our definition of~$O$.

We now prove that~$O = \bigJoin_{p \in [q]} A_p$.
For~$p \in [q]$ and~$I \in \II$, we have~$A_p(I) \in I$, hence~${O(I) \ge A_p(I)}$, so that~$O \ge A_p$ by \cref{prop:sourceOrderI}.
Consider now an acyclic orientation~$O'$ of~$\II$ such that~$A_p \le O'$ for all~$p \in [q]$.
Assume that there are~$I, J \in \II$ and~$p \in [q]$ such that~$A_p(J) \in I$.
Then~$A_p(J) \in I \cap J \in \II$, so that~$A_p(I \cap J) = A_p(J)$ by acyclicity of~$A_p$.
By \cref{prop:sourceOrderI}, we thus obtain~$O'(I \cap J) = A_p(J)$.
By acyclicity of~$O'$, this implies that~$O'(I) \notin {[\min(I \cap J), A_p(J)[}$, so that~$O'(I) \notin [\min(J), A_p(J)[$.
We conclude that~$O(I) \le O'(I)$.
Hence, $O \le O'$ by \cref{prop:sourceOrderI}.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Distributive interval hypergraphic lattices}
\label{sec:distributive}

\begin{figure}
	\centerline{
		\begin{tabular}{c@{\qquad}c}
			\begin{tikzpicture}[scale=2.5]
				\node (a) at (2,0) {\acyclicOrientation{4}{1/3/1,2/3/2,2/4/2}};
				\node (b) at (1,1) {\acyclicOrientation{4}{1/3/2,2/3/2,2/4/2}};
				\node (c) at (2,1) {\acyclicOrientation{4}{1/3/1,2/3/3,2/4/3}};
				\node (d) at (3,1) {\acyclicOrientation{4}{1/3/1,2/3/2,2/4/4}};
				\node (e) at (1,2) {\acyclicOrientation{4}{1/3/3,2/3/3,2/4/3}};
				\node (f) at (2,2) {\acyclicOrientation{4}{1/3/2,2/3/2,2/4/4}};
				\node (g) at (3,2) {\acyclicOrientation{4}{1/3/1,2/3/3,2/4/4}};
				\node (h) at (2,3) {\acyclicOrientation{4}{1/3/3,2/3/3,2/4/4}};
				\draw (a)--(b);
				\draw (a)--(c);
				\draw (a)--(d);
				\draw (b)--(e);
				\draw (b)--(f);
				\draw (c)--(e);
				\draw (c)--(g);
				\draw (d)--(f);
				\draw (d)--(g);
				\draw (e)--(h);
				\draw (f)--(h);
				\draw (g)--(h);
			\end{tikzpicture}
			&
			\begin{tikzpicture}[scale=2.5]
				\node (a) at (2,0) {\acyclicOrientation{4}{1/3/1,1/4/1}};
				\node (b) at (1,1) {\acyclicOrientation{4}{1/3/1,1/4/4}};
				\node (c) at (3,1) {\acyclicOrientation{4}{1/3/2,1/4/2}};
				\node (d) at (2,2) {\acyclicOrientation{4}{1/3/2,1/4/4}};
				\node (e) at (4,2) {\acyclicOrientation{4}{1/3/3,1/4/3}};
				\node (f) at (3,3) {\acyclicOrientation{4}{1/3/3,1/4/4}};
				\draw (a)--(b);
				\draw (a)--(c);
				\draw (b)--(d);
				\draw (c)--(d);
				\draw (c)--(e);
				\draw (d)--(f);
				\draw (e)--(f);
			\end{tikzpicture}
			\\[.2cm]
			$\{1,2,3,4,123,23,234\}$
			&
			$\{1,2,3,4,123,1234\}$
			\\
			boolean lattice
			&
			distributive lattice
			\\[.8cm]
			\begin{tikzpicture}[scale=2.5]
				\node (a) at (2,0) {\acyclicOrientation{4}{1/2/1,3/4/3,1/4/1}};
				\node (b) at (1,1) {\acyclicOrientation{4}{1/2/2,3/4/3,1/4/2}};
				\node (c) at (2,1) {\acyclicOrientation{4}{1/2/1,3/4/4,1/4/1}};
				\node (d) at (3,1) {\acyclicOrientation{4}{1/2/1,3/4/3,1/4/3}};
				\node (e) at (1,2) {\acyclicOrientation{4}{1/2/2,3/4/4,1/4/2}};
				\node (f) at (2,2) {\acyclicOrientation{4}{1/2/2,3/4/3,1/4/3}};
				\node (g) at (3,2) {\acyclicOrientation{4}{1/2/1,3/4/4,1/4/4}};
				\node (h) at (2,3) {\acyclicOrientation{4}{1/2/2,3/4/4,1/4/4}};
				\draw (a)--(b);
				\draw (a)--(c);
				\draw (a)--(d);
				\draw (b)--(e);
				\draw (b)--(f);
				\draw (c)--(e);
				\draw (c)--(g);
				\draw (d)--(f);
				\draw (d)--(g);
				\draw (e)--(h);
				\draw (f)--(h);
				\draw (g)--(h);
			\end{tikzpicture}
			&
			\begin{tikzpicture}[scale=2.5]
				\node (a) at (2,0) {\acyclicOrientation{4}{1/2/1,1/3/1,1/4/1}};
				\node (b) at (1,1) {\acyclicOrientation{4}{1/2/2,1/3/2,1/4/2}};
				\node (c) at (2,1) {\acyclicOrientation{4}{1/2/1,1/3/3,1/4/3}};
				\node (d) at (3,1) {\acyclicOrientation{4}{1/2/1,1/3/1,1/4/4}};
				\node (e) at (1,2) {\acyclicOrientation{4}{1/2/2,1/3/3,1/4/3}};
				\node (f) at (2,2) {\acyclicOrientation{4}{1/2/2,1/3/2,1/4/4}};
				\node (g) at (3,2) {\acyclicOrientation{4}{1/2/1,1/3/3,1/4/4}};
				\node (h) at (2,3) {\acyclicOrientation{4}{1/2/2,1/3/3,1/4/4}};
				\draw (a)--(b);
				\draw (a)--(c);
				\draw (a)--(d);
				\draw (b)--(e);
				\draw (b)--(f);
				\draw (c)--(e);
				\draw (c)--(g);
				\draw (d)--(f);
				\draw (d)--(g);
				\draw (e)--(h);
				\draw (f)--(h);
				\draw (g)--(h);
			\end{tikzpicture}
			\\[.2cm]
			$\{1,2,3,4,12,34,1234\}$
			&
			$\{1,2,3,4,12,123,1234\}$
			\\
			boolean lattice
			&
			boolean lattice
		\end{tabular}
	}
	\caption{Four distributive interval hypergraphic lattices.}
	\label{fig:distributiveLattices}
\end{figure}

In this section, we prove \cref{thm:distributiveLatticeI} which we first repeat:
%characterizing the interval hypergraphs $\II$ for which $P_\II$ are distributive lattices.

\begin{definition}
\label{def:distributive}
We say that an interval hypergraph~$\II$ is \defn{distributive} if for all~$I, J \in \II$ such that~$I \not\subseteq J$, $I \not\supseteq J$ and~$I \cap J \ne \varnothing$, the intersection~$I \cap J$ is in~$\II$ and is initial or final in any~$K \in \II$ with~$I \cap J \subseteq K$.
\end{definition}

\begin{definition}
A lattice~$(L, \le , \join, \meet)$ is \defn{distributive} if
\[
a \join (b \meet c) = (a \join b) \meet (a \join c)
\qquad\text{and}\qquad
a \meet (b \join c) = (a \meet b) \join (a \meet c)
\]
for all~$a,b,c \in L$ (the two conditions are in fact equivalent).
Equivalently, $L$ is distributive if and only if it is isomorphic to the inclusion lattice on lower sets of its poset of join irreducible elements.
\end{definition}

\begin{theoremA}
For an interval hypergraph $\II$ on~$[n]$ with~$\{i\} \in \II$ for all~$i \in [n]$, the poset $P_\II$ is a distributive lattice if and only if $\II$ is distributive.
\end{theoremA}

\begin{example}
The interval hypergraphic posets of \cref{fig:distributiveLattices} are distributive lattices, while those of \cref{fig:notLattices,fig:Tamari,fig:semidistributiveLattices,fig:notSemidistributiveLattices} are not.
%Note that,
%\begin{itemize}
%\item The hypergraphic poset of~$\{ 1, 2, 3, 12, 123 \}$ is distributive (it is a square). More generally, the hypergraphic poset of the hypergraph containing all singletons and all initial intervals is the boolean lattice, which is distributive.
%See \cref{subsec:SchroderHypergraphs} for more examples of distributive hypergraphs.
%\item  The hypergraphic poset of~$\{ 1, 2, 3, 12, 23, 123 \}$ is a lattice but is not distributive (it is a pentagon). In general, the hypergraphic poset of all intervals is the Tamari lattice, which is not distributive.
%\end{itemize}
\end{example}

\begin{example}
The hypergraphic poset of~$\{ 1, 2, 3, 12, 123\}$ is a distributive lattice (it is square).
In general, the hypergraphic poset of all initial intervals is the boolean lattice, which distributive.
See \cref{fig:distributiveLattices} and \cref{subsec:SchroderHypergraphs} for more examples of distributive hypergraphs.
\end{example}

\begin{example}
The hypergraphic poset of~$\{ 1, 2, 3, 12, 23, 123 \}$ is a semidistributive but not distributive lattice (it is a pentagon).
In general, the hypergraphic poset of all intervals is the Tamari lattice, which is semidistributive but not distributive.
See \cref{fig:Tamari}.
\end{example}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Some join irreducible acyclic orientations}  
\label{subsec:someJoinIrreducibles}

Fix $\II$ an interval  hypergraph closed under intersection.
Our first task will be to identify some join irreducible acyclic orientations of~$\II$ (a complete description of the join irreducible acyclic orientations of~$\II$ will appear later in~\cref{subsec:joinIrreducibles}).

\begin{notation}
Define
\(\displaystyle
\cJ_\II \eqdef \bigcup_{I\in \II} I\ssm \{\min(I)\}.
\)
\end{notation}

\begin{notation}
For~$j \in \cJ_\II$, let~$J_j$ be the inclusion minimal set in~$\smash{\II_j \eqdef \bigset{I \in \II}{j \in I \ssm \{\min(I)\}}}$ ($J_j$ exists since $\II$ is closed under intersection) and let~$\mu_j \eqdef \min(J_j) = \max\bigset{\min(I)}{I \in \II_j}$ and~$\nu_j \eqdef \max(J_j) = \min\bigset{\max(I)}{I \in \II_j}$.
By definition~$\mu_j < j \le \nu_j$ since~$j \in J_j \ssm \{\mu_j\}$.
\end{notation}

\begin{notation}
For~$j \in \cJ_\II$, consider the acyclic orientation~$A_j \eqdef \Or_{(\mu_j, \mu_j+1, \ldots, j)}$, obtained as the image by the surjection map~$\Or$ of \cref{def:surjection} of the cycle permutation
\[
(\mu_j, \mu_j+1, \dots, j) = 12 \cdots (\mu_j-1)j\,\mu_j \cdots (j-1) (j+1) \cdots n
\]
obtained from the identity permutation by placing~$j$ just before $\mu_j$.
Note that that for all $J \in \II$
\[
A_j(J) =
\begin{cases}
	j & \text{if } j \in J \text{ and } \min(J)=\mu_j,\\
	\min(J) & \text{otherwise.}
\end{cases}
\]
\end{notation}

\begin{notation}
For $i,j \in \cJ_\II$, we write $i \preccurlyeq j$ if and only if $J_i = J_j$ and $i \le j$.
\end{notation}

\begin{example}
For~$\II = \{1, 2, 3, 12, 123\}$, we have~$\cJ_\II = \{2,3\}$ and the corresponding acyclic orientations are
\[
A_2 = \acyclicOrientation{3}{1/2/2,1/3/2}
\qquad\text{and}\qquad
A_3 = \acyclicOrientation{3}{1/2/1,1/3/3}
\]

\smallskip\noindent
For~$\II = \{1, 2, 3, 12, 23, 123\}$, we have~$\cJ_\II = \{2,3\}$ and the corresponding acyclic orientations are
\[
A_2 = \acyclicOrientation{3}{1/2/2,2/3/2,1/3/2}
\qquad\text{and}\qquad
A_3 = \acyclicOrientation{3}{1/2/1,2/3/3,1/3/1}
\]
\end{example}
\vincent{add examples here}

\begin{lemma}
\label{lem:distinctIrreducibles}
For $i \ne j \in \cJ_\II$, we have $A_i \ne A_j$.
\end{lemma}

\begin{proof}
If~$i \ne j$, then we have~$A_i(J_j) \in \{\mu_j, i\}$ while~$A_j(J_j) = j \notin \{\mu_j,i\}$.
\end{proof}

\begin{lemma}
\label{lem:irrorder}
For $i,j \in \cJ_\II$, we have $A_i \le A_j \iff i \preccurlyeq j$.
\end{lemma}

\begin{proof}
By \cref{prop:sourceOrderI} we have~$A_i \le A_j$ if and only if~$A_i(I) \le A_j(I)$ for all~$I \in \II$.
%
The forward direction is thus a direct consequence of the following four observations:
\begin{itemize}
\item if~$\mu_i \ne \mu_j$, then~$A_i(J_i) = i > \mu_i = \min(J_i) = A_j(J_i)$,
\item if~$\nu_i < \nu_j$, then~$j \notin J_i \ssm \{\mu_i\}$, so that~$A_i(J_i) = i > \mu_i = \min(J_i) = A_j(J_i)$,
\item if~$i > j$, then~$A_i(J_i) = i > j \ge A_j(J_i)$,
\item $i \le j$ implies that~$\mu_i \le \mu_j$ and~$\nu_i \le \nu_j$.
\end{itemize}
%
For the backward direction, assume~$i \preccurlyeq j $, and consider~$I \in \II$.
As~$i < j$, $A_i(I) \in \{\min(I), i\}$ and~$A_j(I) \in \{\min(I), j\}$, we have~$A_i(I) \le A_j(I)$ except if~$A_i(I) = i$ and~$A_j(I) = \min(I)$.
As~$A_i(I) = i$, we would have~$i \in I$ and~$\min(I) = \mu_i$. As~$A_j(I) = \min(I)$ and~$\min(I) = \mu_i = \mu_j$, we would have~$j \notin I$.
This contradicts the fact that~$\nu_i = \nu_j$.
\end{proof}

\begin{lemma}
\label{lem:subirr}
For any~$j \in \cJ_\II$ and any acyclic orientation~$A$ of~$\II$, we have
\begin{itemize}
\item $A < A_j \iff A = \min(P_\II)$ or~$A = A_i$ with~$i \preccurlyeq j$,
\item $A_j < A \iff j \le A(J_j)$.
\end{itemize}
\end{lemma}

\begin{proof}
By \cref{prop:sourceOrderI}, $A < A_j$ implies that~$A(I) \le A_j(I)$ for all~$I \in \II$.
For~$I, I' \in \II$ such that~$j \in I \cap I'$ and~$\min(I) = \min(I') = \mu_j$, we have~$A(I) = A(I')$ since~$A$ is acyclic.
We conclude that there is~$i \in {[\mu_j, j[}$ such that~$A(I) = i$ if~$j \in I$ and~$\min(I) = \mu_j$, and~$A(I) = \min(I)$ otherwise.
Hence, $A = \min(P_\II)$ or~$A = A_i$.
The first point thus follows from \cref{lem:irrorder}.

For the second point, $A_j \le A$ implies $j = A_j(J_j) \le A(J_j)$ by \cref{prop:sourceOrderI}.
Conversely, if~$j \le A(J_j)$, then for any~$I \in \II$,
\begin{itemize}
\item if~$j \in I$ and~$\min(I) = \mu_j$, we have~$A_j(I) = j \le A(I)$ (by acyclicity of~$A$),
\item otherwise, $A_j(I) = \min(I) \le A(I)$.
\end{itemize}
Hence, $A_j \le A$ by \cref{prop:sourceOrderI}.
\end{proof}

\begin{proposition}
\label{prop:AjJoinIrreducible}
For any~$j\in \cJ_\II$, the acyclic orientation~$A_j$ is join irreducible.
\end{proposition}

\begin{proof}
By \cref{lem:subirr}, the lower set of~$A_j$ in~$P_\II$ is the chain $\min(P_\II) < A_{i_1} < \dots < A_{i_p} < A_j$ where~$\{i_1 < \dots < i_p\} = \set{i \in \cJ_\II}{J_i = J_j \text{ and } i < j}$.
Hence, $A_j$ is join irreducible.
\end{proof}

\begin{corollary}
\label{coro:irreduciblePosetMorphism}
The map $j \mapsto A_j$ is an injective poset morphism from~$(\cJ_\II, \preccurlyeq)$ to the subposet of join irreducibles of~$P_\II$.
\end{corollary}

\begin{proof}
Immediate from \cref{lem:distinctIrreducibles,prop:AjJoinIrreducible,lem:irrorder}.
\end{proof}

\begin{proposition}
\label{prop:injectivityDistributive}
For any two lower sets~$X$ and~$Y$ of~$(\cJ_\II, \preccurlyeq)$, if~$\bigJoin\limits_{x \in X} A_x = \bigJoin\limits_{y \in Y} A_y$ then~$X = Y$.
\end{proposition}

\begin{proof}
Assume~$\bigJoin\limits_{x \in X} A_x = \bigJoin\limits_{y \in Y} A_y$ and let~$x \in X$.
Then $x = A_x(J_x) \le \big( \bigJoin\limits_{x \in X} A_x \big)(J_x) = \big( \bigJoin\limits_{y \in Y} A_y \big)(J_x)$.
From the description of the join of \cref{prop:joinLattice}, we thus obtain that there exists~$y \in Y$ and~$J \in \II$ such that~$A_y(J) \in J_x$ and~$\min(J) < x \le A_y(J)$.
As~$\min(J) \ne A_y(J)$, we obtain that~$A_y(J) = y$ and~$\min(J) = \mu_y$.
We get that~$\mu_y < x \le y \le \nu_x$, hence that~$x \in J_y \ssm \{\mu_y\}$ and~$y \in J_x \ssm \{\mu_x\}$ so that~$J_x = J_y$.
As~$x \le y$, we conclude that~$x \preccurlyeq y$, so that~$x \in Y$.
We thus obtained that~$X \subseteq Y$, and thus~$X = Y$ by symmetry.
\end{proof}

\begin{proposition}
$\displaystyle \max(P_\II) = \bigJoin\limits_{j \in \cJ_\II} A_j$.
\end{proposition}

\begin{proof}
Assume by contradiction~$\max(P_\II) \ne \bigJoin_{j \in \cJ_\II} A_j \defeq A$.
Then there is~$I \in \II$ with~${A(I) < \max(I)}$.
Let~$j \eqdef A(I) + 1$.
As~$j \in I \ssm \{\min(I)\}$, we have~$A(J_j) \in J_j \subseteq I$ and~$A(I) = j-1 \in J_j$.
As~$A_j \le A$, we have~$A(I) = j-1 < j = A_j(J_j) \le A(J_j)$ so that~$A(I) \ne A(J_j)$.
We thus obtain that~$A$ is cyclic, a contradiction.
\end{proof}

\begin{corollary}
For any interval hypergraph~$\II$ closed under intersection, $P_\II$ contains a distributive sublattice containing~$\min(P_\II)$ and~$\max(P_\II)$.
\end{corollary}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{If~$\II$ is distributive then $P_\II$ is distributive}
\label{subsec:distributiveLatticeBackward}

We now prove the backward direction of \cref{thm:distributiveLatticeI}.

\begin{lemma}
\label{lem:alwaysFlippable}
For a distributive interval hypergraph~$\II$, an acyclic orientation~$A$ of~$\II$, and~$J \in \II$ such that~$j \eqdef A(J) \ne \min(J)$, then there exists~$i$ such that
\[
\min(J) \le i \le \max\set{\max(I)}{I \in \II, \; \min(I) = \min(J), \; \max(I) < j}
\]
and the orientation obtained from~$A$ by flipping~$j$ to~$i$ is acyclic.
\end{lemma}

\begin{proof}
%Assume without loss of generality that $\min(J) \le \min(J')$ for all~$J' \in \II$ with~$A(J') = j$.
Let~$I \in \II$ be maximal such that~$\min(I) = \min(J)$ and~$\max(I) < j$, and let~$i \eqdef A(I)$.
Let~$O$ be the orientation obtained from~$A$ by flipping~$j$ to~$i$ as in \cref{def:flip}.
If~$O$ is cyclic, there exists~$K,K' \in \II$ such that~$O(K) \in K'$, $O(K') \in K$, and~$O(K) \ne O(K')$.
As~$A$ is acyclic, we have either~$A(K) \ne O(K)$ or~$A(K') \ne O(K')$, but not both since~$O(K) \ne O(K')$.
We can thus assume that~$A(K) = O(K)$ while $A(K') = j$ and~$O(K') = i$.
%As~$A(K') = j$, we have~$\min(I) = \min(J) \le \min(K')$ by the first assumption of the proof.
%Moreover, we have~$i \in K$ and~$\{i,j\} \subseteq K'$.
If~$j \in K$, then we have~$A(K) \ne j = A(K')$ (otherwise, $O(K) = i = O(K')$), and $A(K) = O(K) \in K'$ and~$A(K') = j \in K$, contradicting the acyclicity of~$A$.
As~$i \in K$ and~$j \notin K$, we obtain that~$\max(K) < j$.
As~$A(I) = i \in K$ and~$A(K) = O(K) \ne O(K') = i = A(I)$, we have~$K \not\subseteq I$ by acyclicity of~$A$.
If~$\min(I) < \min(K)$, then~$I \not\subseteq K$ and~$I \not\supseteq K$ and~$I \cap K \ni i$, and $K$ is neither initial nor final in~$J$, contradicting the distributivity of~$\II$.
If~$\min(K) < \min(J)$ and~$\min(K') < \min(J)$, then we have~$J \not\subseteq K$ and~$J \not\supseteq K$ and~$J \cap K \ni i$, and~$J \cap K$ is neither initial nor final in~$K'$, contradicting the distributivity of~$\II$.
As~$\II$ is closed under intersection and we have~$A(K) = O(K) \in K'$, we can thus assume that~$\min(I) = \min(K)$.
We thus obtain that~$K \subseteq I$.
As~$A(K) = O(K) \ne O(K') = i = A(I)$, this contradicts the acyclicity of~$A$.
We conclude that~$O$ is acyclic, which proves the statement.
\end{proof}

\begin{remark}
\label{rem:alwaysFlippable}
\cref{lem:alwaysFlippable} fails when~$\II$ is distributive.
For instance, for~$\II = \{1, 2, 3, 12, 23, 123\}$, the interval~$J = 23$ and the acyclic orientation
\[
A = \acyclicOrientation{3}{1/2/1,2/3/3,1/3/3}
\]
\end{remark}

\begin{proposition}
\label{prop:irreduciblePosetIsomorphism}
If~$\II$ is a distributive interval hypergraph, then the map $j \mapsto A_j$ is a poset isomorphism from~$(\cJ_\II, \preccurlyeq)$ to the subposet of join irreducibles of~$P_\II$.
\end{proposition}

\begin{proof}
We have already seen in \cref{coro:irreduciblePosetMorphism} that~$j \mapsto A_j$ is an injective poset morphism.
We thus just need to show that the distributivity of~$\II$ implies the surjectivity of this morphism.
Consider an increasing flip~\flip{A}{i}{j}{A'}.
%Let~$A < A'$ be two acyclic orientations of~$\II$ related by an increasing flip from~$i$ to~$j$.
If there is~$J \in \II$ such that~$A'(J) \notin \{\min(J), j\}$, then \cref{lem:alwaysFlippable} ensures that $A'$ admits a decreasing flip flipping~$A(J')$ to some~$k < A(J') \ne j$.
If there is~$J \in \II$ such that~$A'(J) = j$ and~$\min(J) < \mu_j$, then the distributivity of~$\II$ implies that~$\max(I) < \mu_j$ for any~$I \in \II$ such that~$\min(I) = \min(J)$ and~$\max(I) < j$ (otherwise, $I \not\subseteq J_j$ and~$I \not\supseteq J_j$ and~$\mu_j \in I \cap J_i \subseteq J$, and~$I \cap J_j$ is neither initial nor final in~$J$, contradicting the distributivity of~$\II$).
Hence, \cref{lem:alwaysFlippable} ensures that $A'$ admits a decreasing flip flipping~$j$ to some~$k < \mu_j$.
As $A'$ is acyclic, there is no~$J \in \II$ such that~$A'(J) = \min(J) = \mu_j$ and~$j \in J$.
We conclude that if~$A'$ admits a single decreasing flip, then~$A'(J) = j$ if~$j \in J$ and~$\min(J) = \mu_j$, and~$A'(J) = \min(J)$ otherwise, so that~$A' = A_j$.
\end{proof}

\begin{remark}
We will see in \cref{lem:oneMoreIrreducible} that the surjectivity in \cref{prop:irreduciblePosetIsomorphism} fails when~$\II$ is not distributive.
\end{remark}

\begin{proposition}
\label{prop:distributiveForwardI}
If~$\II$ is a distributive interval hypergraph, then the maps
\[
\Phi : A \mapsto \set{j \in \cJ_\II}{A_j \le A}
\qquad\text{and}\qquad
\Psi : X \mapsto \bigJoin_{x \in X} A_x
\]
are inverse bijections between the acyclic orientations of~$\II$ and the lower sets of~$(\cJ_\II, \preccurlyeq)$. Hence~$P_\II$ is a distributive lattice.
\end{proposition}

\begin{proof}
In a finite lattice, any element can always be written as the join of the join irreducible elements below it.
\cref{prop:irreduciblePosetIsomorphism} thus implies that~$\Psi(\Phi(A)) = A$.
The statement follows since $\Psi$ is injective by \cref{prop:injectivityDistributive}.
\end{proof}

\begin{corollary}
If~$\II$ is a distributive hypergraph, then~$P_\II$ is a Cartesian product of chains.
\end{corollary}

\begin{proof}
The poset~$(\cJ_\II, \preccurlyeq)$ is a disjoint union of chains, hence its lattice of lower sets is a Cartesian product of chains.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{If~$P_\II$ is distributive then~$\II$ is distributive}
\label{subsec:distributiveLatticeForward}

We now prove the forward direction of \cref{thm:distributiveLatticeI}.

\begin{lemma}
\label{lem:oneMoreIrreducible}
If an interval hypergraph~$\II$ is closed under intersection but not distributive, there is a join irreducible acyclic orientation~$A$ such that~$A \not\le A_j$ for all~$j \in \cJ_\II$.
\end{lemma}

\begin{proof}
As $\II$ is closed under intersection but not distributive, there are~$I,J,K \in \II$ with~$I \not\subseteq J$,~$I \not\supseteq J$, $\varnothing \ne I \cap J \subseteq K$, and~$I \cap J$ is neither initial nor final in~$K$.
By symmetry, we can assume that~$\min(I) < \min(J) \le \max(I) < \max(J)$. 
As~$I \cap J$ is neither initial nor final in~$K$, we have~$\min(K) < \min(J) \le \max(I) < \max(K)$.
As~$\II$ is closed under intersection, we can even assume that~$\min(I) = \min(K)$ and~$\max(J) = \max(K)$.
Let~$i \eqdef \min(I) = \min(K)$ and~$j \eqdef \min(J \ssm I)$.
Let~$A \eqdef \Or_{(i, \dots, j)}$ be the acyclic orientation of~$\II$ obtained as the image by the surjection map~$\Or$ of \cref{def:surjection} of the cycle permutation~$(i, \dots, j)  = 12 \cdots (i-1)j\, i \cdots (j-1) (j+1) \cdots n$.
In other words,
\[
A(K) = 
\begin{cases}
j & \text{if } j \in J \text{ and } \min(J) \ge i \\
\min(J) & \text{otherwise.}
\end{cases}
\]
We claim that the flip of~$j$ to~$i$ is the only decreasing flip from~$A$.
Let~$A'$ be an acyclic orientation of~$\II$ obtained by a decreasing flip from~$A$.
Let~$H \in \II$ be such that~$A'(H) < A(H)$.
Since~$A(H) \in \{\min(H), j\}$, we have~$A(H) = j$, so that~$i \le \min(H) \le A'(H) < A(H) = j$.
If~$A'(H) \ne i$, then~$A'(K) = A'(H) \in I$ (since~$A'(H) \in K$ and~$A(K) = j$) and $A'(I) \le A(I) = \min(I) = i \in K$ (since~$j \notin I$), contradicting the acyclicity of~$A'$.
We conclude that~$A'(H) = i$, so that~$A'$ is indeed obtained from~$A$ by flipping $j$ to~$i$.

Finally, as~$A(K) = j$ while~$A_j(K) = \min(K) < j$, we have~$A \not\le A_j$ for all~$j \in \cJ_\II$ by \cref{prop:sourceOrderI}.
\end{proof}

\begin{example}
\label{rem:oneMoreIrreducible}
Following on \cref{rem:alwaysFlippable}, the join irreducible acyclic orientations of~$\II = \{1, 2, 3, 12, 23, 123\}$ illustrated in \cref{fig:Tamari}\,(left) are
\[
A_2 = \acyclicOrientation{3}{1/2/2,2/3/2,1/3/2}
\qquad\quad
A_3 = \acyclicOrientation{3}{1/2/1,2/3/3,1/3/1}
\qquad\text{and}\qquad
A = \acyclicOrientation{3}{1/2/1,2/3/3,1/3/3}
\]
\end{example}

\begin{proposition}
If~$\II$ is an interval hypergraph such that $P_\II$ is a distributive lattice, then~$\II$ is distributive.
\end{proposition}

\begin{proof}
If~$\II$ is not closed under intersection, then~$P_\II$ is not even a lattice by \cref{prop:latticeForward}.
If~$\II$ is closed under intersection but not distributive, consider the join irreducible acyclic orientation~$A$ of \cref{lem:oneMoreIrreducible}.
As~$A \not\le A_j$ for all~$j \in \cJ_\II$, and~$\max(P_\II) = \bigJoin_{j \in \cJ_\II} A_j = A \join \bigJoin_{j \in \cJ_\II} A_j$, we obtain that~$P_\II$ is not distributive.
\end{proof}

\begin{corollary}
For an internal hypergraph~$\II$, the poset~$P_\II$ is a distributive lattice if and only if it is a Cartesian product of chains.
\end{corollary}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Schr\"oder hypergraphs}
\label{subsec:SchroderHypergraphs}

As an illustration of this section, we now consider a special family of distributive hypergraphs which were already considered in~\cite{Defant-fertilitopes}.

\begin{definition}
Let~$S$ be a \defn{Schr\"oder tree} (\ie a rooted plane tree where each internal node has at least two children) with~$n$ leaves labeled by~$[n]$ from left to right.
Label each node of~$S$ by the set of leaves of its subtree.
We say that the hypergraph~$\II_S$ formed by all singletons and the labels of the nodes of~$S$ is a \defn{Schr\"oder hypergraph}.
\end{definition}

\begin{example}
All but the top left interval hypergraphs of \cref{fig:distributiveLattices} are Schr\"oder hypergraphs:
\[
	\begin{array}{c|ccc}
		\raisebox{1cm}{$S$}
		& 
		\tree{[.1234 [.123 [.{\phantom{1}} ] [.{\phantom{1}} ] [.{\phantom{1}} ] ] [.{\phantom{1}} ] ]}
		& 
		\tree{[.1234 [.12 [.{\phantom{1}} ] [.{\phantom{1}} ] ] [.34 [.{\phantom{1}} ] [.{\phantom{1}} ] ] ]}
		& 
		\tree{[.1234 [.123 [.12 [.{\phantom{1}} ] [.{\phantom{1}} ] ] [.{\phantom{1}} ] ] [.{\phantom{1}} ] ]}
		\\[-.3cm]
		\hline
		\\[-.3cm]
		\II_S
		&
		\{1,2,3,4,123,1234\}
		&
		\{1,2,3,4,12,34,1234\}
		&
		\{1,2,3,4,12,123,1234\}
	\end{array}
\]
\end{example}

\begin{example}
For instance, for the left comb~$C$, the Schr\"oder hypergraph~$\II_C$ consists of all singletons and all initial intervals. The hypergraphic polytope~$\triangle_{\II_C}$ is the Pitman--Stanley polytope~\cite{PitmanStanley}.
\end{example}

\begin{proposition}
\label{prop:characterizationSchroder}
An interval hypergraph~$\II$ is a Schr\"oder hypergraph if and only if~$I \subseteq J$ or~$I \supseteq J$ or~$I \cap J = \varnothing$ for all~$I,J \in \II$.
\end{proposition}

\begin{proof}
Consider first two nodes~$i$ and~$j$ of a Schr\"oder tree~$S$, and let~$I$ and~$J$ be the corresponding labels.
Then~$I \subseteq J$ if~$i$ is a descendant of~$j$, $I \supseteq J$ if~$i$ is a ancestor of~$j$, and~$I \cap J = \varnothing$ otherwise.

Conversely, consider an interval hypergraph~$\II$ where any two hyperedges are nested or disjoint. Then the inclusion poset on~$\II$ is a Schr\"oder tree~$S$ with~$\II_S = \II$.
\end{proof}

\begin{remark}
\cref{prop:characterizationSchroder} implies that Schr\"oder hypergraphs are building sets, so that Schr\"oder hypergraphic polytopes are nestohedra~\cite{FeichtnerSturmfels,Postnikov}.
In fact, the latter were already considered in the literature under the name \defn{fertilotopes}~\cite{Defant-fertilitopes}.
\end{remark}

\begin{corollary}
Any Schr\"oder hypergraph is a distributive interval hypergraph, hence the Schr\"oder hypergraphic posets are distributive lattices.
\end{corollary}

\begin{proof}
The distributivity condition of \cref{def:distributive} is clearly fulfilled as any~$I \subseteq J$ or~$I \supseteq J$ or~$I \cap J = \varnothing$ for all~$I,J \in \II$.
\end{proof}

\begin{proposition}
Given a Schr\"oder tree~$S$, the poset of join irreducible acyclic orientations on~$\II_S$ is isomorphic to a disjoint union of chains.
More precisely, it has one chain for each node~$n$ of~$S$, whose elements are the leaves of~$n$ and the leftmost leaves of the children of~$n$, except the leftmost leaf below~$n$.
\end{proposition}

\begin{proof}
This description is a specialization of the description of the join irreducible poset of distributive interval hypergraphic posets from \cref{subsec:someJoinIrreducibles}.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Semidistributive interval hypergraphic lattices}
\label{sec:semidistributive}

In this section, we prove \cref{thm:semidistributiveLatticeI} which we first repeat:
%characterizing the interval hypergraphs $\II$ for which $P_\II$ are semidistributive lattices.

\begin{definition}
\label{def:semidistributive}
We say that an interval hypergraph~$\II$ is \defn{join semidistributive} if it is closed under intersection and
for all~$[r,r'], [s,s'], [t,t'], [u,u'] \in \II$ such that ${r < s \le r' < s'}$, $r < t \le s' < t'$, $u < \min(s, t)$ and~$s' < u'$, there is~$[v,v'] \in \II$ such that~$v < s$ and~${s' < v' < t'}$.
%        if p0[0] < p1[0] <= p0[1] < p1[1] and p0[0] < p2[0] <= p1[1] < p2[1] and all(inter[0] >= p1[0] or inter[1] <= p0[1] or inter[1] >= p2[1] for inter in intervals) and any(inter[0] < min(p1[0], p2[0]) and p1[1] < inter[1] for inter in intervals):
%            return False
\end{definition}

\begin{definition}
A lattice~$(L, \le , \join, \meet)$ is \defn{join semidistributive} if
\[
a \join b = a \join c
\qquad\text{implies}\qquad
a \join (b \meet c) = a \join b
\]
for all~$a,b,c \in L$.
Equivalently, $L$ is join semidistributive if and only if for any cover relation~$a \lessdot b$ in~$L$, the set~$\set{c \in L}{a \join c = b}$ admits a unique minimal element~$k_{a \lessdot b}$.
The meet semidistributivity is defined dually.
A lattice~$L$ is \defn{semidistributive} if it is both meet and join semidistributive.
\end{definition}

\begin{remark}
\label{rem:semidistributiveCriterion}
In general, the set~$\set{c \in L}{a \join c = b}$ might have more than one minimal element.
Note however that any minimal element of~$\set{c \in L}{a \join c = b}$ is always join irreducible.
Indeed, Assume that~$a \join c = b$ and~$c = d \join e$.
Then~$a \ne a \join d$ or~$a \ne a \join e$ since~$a < b = a \join c = a \join (d \join e) = (a \join d) \join (a \join e)$.
Moreover, $a \join d \le b$ and~$a \join e \le b$ since~$a \le b$ and~$d \le c \le b$ and~$e \le c \le b$.
As~$a \lessdot b$ is a cover relation of~$L$, we conclude that $a \join d = b$ or~$a \join e = b$ so that~$c$ is not minimal.
\end{remark}

\begin{remark}
Although we will not insist on this aspect in this paper, the join semidistributivity is equivalent to the existence of canonical join representations.
A \defn{join representation} of~${b \in L}$ is a subset~$J \subseteq L$ such that~$b = \bigJoin J$.
Such a representation is \defn{irredundant} if~$b \ne \bigJoin J'$ for any strict subset~$J' \subsetneq J$.
The irredundant join representations of~$b \in L$ are ordered by~$J \le J'$ if and only if for any~$j \in J$ there is~${j' \in J'}$~with~$j \le j'$.
The \defn{canonical join representation} of~$b$ is the minimal irredundant join representation of~$b$ for this order when it exists.
%Note that the canonical joinands form an antichain of join irreducible elements of~$L$.
The lattice~$L$ is semidistributive if and only if any element of~$L$ admits a canonical join representation.
Moreover, the canonical join representation of~$b$ is given by~$b = \bigJoin_{a \lessdot b} k_{a \lessdot b}$, where $a$ ranges over all elements of~$L$ covered by~$b$.
\end{remark}

\begin{theoremA}
For an interval hypergraph $\II$ on~$[n]$ with~$\{i\} \in \II$ for all~$i \in [n]$, the poset $P_\II$ is a join semidistributive lattice if and only if $\II$ is join semidistributive.
Under the symmetry of \cref{prop:antiIsomorphism}, a dual characterization holds for meet semidistributive.
\end{theoremA}

\begin{example}
\cref{fig:distributiveLattices} shows four distributive (hence semidistributive) interval hypergraphic lattices.
%
\cref{fig:semidistributiveLattices} shows two interval hypergraphic lattices which are semidistributive but not distributive.
%
\cref{fig:notSemidistributiveLattices} shows two interval hypergraphic lattices which are not semidistributive.
\end{example}

\begin{example}
The hypergraphic poset of~$\{ 1, 2, 3, 12, 23, 123 \}$ is a semidistributive (but not distributive) lattice (it is a pentagon).
In general, the hypergraphic poset of all intervals is the Tamari lattice, which is semidistributive but not distributive.
See \cref{fig:Tamari}.
\end{example}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{All join irreducible acyclic orientations}
\label{subsec:joinIrreducibles}

%
\begin{figure}
	\centerline{
		\begin{tabular}{c@{\qquad}c}
			\begin{tikzpicture}[scale=2.5]
				\node (a) at (3,0) {\acyclicOrientation{4}{1/3/1,2/3/2,2/4/2,1/4/1}};
				\node (b) at (1,1) {\acyclicOrientation{4}{1/3/2,2/3/2,2/4/2,1/4/2}};
				\node (c) at (3,1) {\acyclicOrientation{4}{1/3/1,2/3/3,2/4/3,1/4/1}};
				\node (d) at (4,1) {\acyclicOrientation{4}{1/3/1,2/3/2,2/4/4,1/4/1}};
				\node (e) at (1,2) {\acyclicOrientation{4}{1/3/3,2/3/3,2/4/3,1/4/3}};
				\node (f) at (3,2) {\acyclicOrientation{4}{1/3/1,2/3/2,2/4/4,1/4/4}};
				\node (g) at (4,2) {\acyclicOrientation{4}{1/3/1,2/3/3,2/4/4,1/4/1}};
				\node (h) at (2,3) {\acyclicOrientation{4}{1/3/2,2/3/2,2/4/4,1/4/4}};
				\node (i) at (3,3) {\acyclicOrientation{4}{1/3/1,2/3/3,2/4/4,1/4/4}};
				\node (j) at (2,4) {\acyclicOrientation{4}{1/3/3,2/3/3,2/4/4,1/4/4}};
				\draw (a)--(b);
				\draw (a)--(c);
				\draw (a)--(d);
				\draw (b)--(e);
				\draw (b)--(h);
				\draw (c)--(e);
				\draw (c)--(g);
				\draw (d)--(f);
				\draw (d)--(g);
				\draw (e)--(j);
				\draw (f)--(h);
				\draw (f)--(i);
				\draw (g)--(i);
				\draw (h)--(j);
				\draw (i)--(j);
			\end{tikzpicture}
			&
			\begin{tikzpicture}[scale=2.5]
				\node (a) at (2,0) {\acyclicOrientation{4}{2/3/2,3/4/3,1/4/1}};
				\node (b) at (1,1) {\acyclicOrientation{4}{2/3/2,3/4/3,1/4/2}};
				\node (c) at (2,1) {\acyclicOrientation{4}{2/3/3,3/4/3,1/4/1}};
				\node (d) at (3,1) {\acyclicOrientation{4}{2/3/2,3/4/4,1/4/1}};
				\node (e) at (1,2) {\acyclicOrientation{4}{2/3/3,3/4/3,1/4/3}};
				\node (f) at (2,2) {\acyclicOrientation{4}{2/3/2,3/4/4,1/4/2}};
				\node (g) at (3,2) {\acyclicOrientation{4}{2/3/3,3/4/4,1/4/1}};
				\node (h) at (2,3) {\acyclicOrientation{4}{2/3/2,3/4/4,1/4/4}};
				\node (i) at (2,4) {\acyclicOrientation{4}{2/3/3,3/4/4,1/4/4}};
				\draw (a)--(b);
				\draw (a)--(c);
				\draw (a)--(d);
				\draw (b)--(e);
				\draw (b)--(f);
				\draw (c)--(e);
				\draw (c)--(g);
				\draw (d)--(f);
				\draw (d)--(g);
				\draw (e)--(i);
				\draw (f)--(h);
				\draw (g)--(i);
				\draw (h)--(i);
			\end{tikzpicture}
			\\[.2cm]
			$\{1,2,3,4,123,23,234,1234\}$
			&
			$\{1,2,3,4,23,34,1234\}$
			\\
			semidistributive lattice,
			&
			semidistributive lattice,
			\\
			but not distributive
			&
			but not distributive
		\end{tabular}
	}
	\caption{Two interval hypergraphic lattices which are semidistributive but not distributive.}
	\label{fig:semidistributiveLattices}
\end{figure}
%
\begin{figure}
	\centerline{
		\begin{tabular}{c@{\qquad}c}
			\begin{tikzpicture}[scale=2.5]
				\node (a) at (3,0) {\acyclicOrientation{4}{1/2/1,2/3/2,3/4/3,1/4/1}};
				\node (b) at (1,1) {\acyclicOrientation{4}{1/2/1,2/3/3,3/4/3,1/4/1}};
				\node (c) at (3,1) {\acyclicOrientation{4}{1/2/1,2/3/2,3/4/4,1/4/1}};
				\node (d) at (4,1) {\acyclicOrientation{4}{1/2/2,2/3/2,3/4/3,1/4/2}};
				\node (e) at (1,2) {\acyclicOrientation{4}{1/2/1,2/3/3,3/4/4,1/4/1}};
				\node (f) at (2,2) {\acyclicOrientation{4}{1/2/1,2/3/3,3/4/3,1/4/3}};
				\node (g) at (3,2) {\acyclicOrientation{4}{1/2/1,2/3/2,3/4/4,1/4/4}};
				\node (h) at (4,2) {\acyclicOrientation{4}{1/2/2,2/3/2,3/4/4,1/4/2}};
				\node (i) at (1,3) {\acyclicOrientation{4}{1/2/1,2/3/3,3/4/4,1/4/4}};
				\node (j) at (3,3) {\acyclicOrientation{4}{1/2/2,2/3/3,3/4/3,1/4/3}};
				\node (k) at (4,3) {\acyclicOrientation{4}{1/2/2,2/3/2,3/4/4,1/4/4}};
				\node (l) at (3,4) {\acyclicOrientation{4}{1/2/2,2/3/3,3/4/4,1/4/4}};
				\draw (a)--(b);
				\draw (a)--(c);
				\draw (a)--(d);
				\draw (b)--(e);
				\draw (b)--(f);
				\draw (c)--(e);
				\draw (c)--(g);
				\draw (c)--(h);
				\draw (d)--(j);
				\draw (d)--(h);
				\draw (e)--(i);
				\draw (f)--(i);
				\draw (f)--(j);
				\draw (g)--(i);
				\draw (g)--(k);
				\draw (h)--(k);
				\draw (i)--(l);
				\draw (j)--(l);
				\draw (k)--(l);
			\end{tikzpicture}
			&
			\begin{tikzpicture}[scale=2.5]
				\node (a) at (2,0) {\acyclicOrientation{4}{1/2/1,2/3/2,2/4/2,1/4/1}};
				\node (b) at (1,1) {\acyclicOrientation{4}{1/2/1,2/3/3,2/4/3,1/4/1}};
				\node (c) at (2,1) {\acyclicOrientation{4}{1/2/2,2/3/2,2/4/2,1/4/2}};
				\node (d) at (3,1) {\acyclicOrientation{4}{1/2/1,2/3/2,2/4/4,1/4/1}};
				\node (e) at (1,2) {\acyclicOrientation{4}{1/2/1,2/3/3,2/4/3,1/4/3}};
				\node (f) at (2,2) {\acyclicOrientation{4}{1/2/1,2/3/3,2/4/4,1/4/1}};
				\node (g) at (3,2) {\acyclicOrientation{4}{1/2/1,2/3/2,2/4/4,1/4/4}};
				\node (h) at (1,3) {\acyclicOrientation{4}{1/2/2,2/3/3,2/4/3,1/4/3}};
				\node (i) at (2,3) {\acyclicOrientation{4}{1/2/1,2/3/3,2/4/4,1/4/4}};
				\node (j) at (3,3) {\acyclicOrientation{4}{1/2/2,2/3/2,2/4/4,1/4/4}};
				\node (k) at (2,4) {\acyclicOrientation{4}{1/2/2,2/3/3,2/4/4,1/4/4}};
				\draw (a)--(b);
				\draw (a)--(c);
				\draw (a)--(d);
				\draw (b)--(e);
				\draw (b)--(f);
				\draw (c)--(h);
				\draw (c)--(j);
				\draw (d)--(f);
				\draw (d)--(g);
				\draw (e)--(h);
				\draw (e)--(i);
				\draw (f)--(i);
				\draw (g)--(i);
				\draw (g)--(j);
				\draw (h)--(k);
				\draw (i)--(k);
				\draw (j)--(k);
			\end{tikzpicture}
			\\[.2cm]
			$\{1,2,3,4,12,23,34,1234\}$
			&
			$\{1,2,3,4,12,23,234,1234\}$
			\\
			lattice but neither join
			&
			meet semidistributive lattice,
			\\
			nor meet semidistributive
			&
			but not join semidistributive
		\end{tabular}
	}
	\caption{Two interval hypergraphic lattices which are not semidistributive.}
	\label{fig:notSemidistributiveLattices}
\end{figure}

In this section, we assume that~$\II$ is an interval hypergraph closed under intersection so that the hypergraph poset~$P_\II$ is a lattice  by \cref{prop:latticeBackward}, and we describe all the join irreducible elements of~$P_\II$. % that is, the acyclic orientations~$A$ of~$\II$ which cover a single acyclic orientation~$A_\star$.

%\begin{notation}
%Define~$\cIJ_\II$ to be the set of pairs~$(i,j)$ where~$1 \le i < j \le n$ are such that there exists~$I \in \II$ with~$\{i,j\} \subseteq I$ and
%\[
%i = \max \Big( {[\min(I), j[} \; \ssm \!\!\!\!\!\!\!\! \bigcup_{\substack{J \in \II \\ J \subseteq {[\min(I), j[}}} \!\!\!\!\!\!\!\! J \ssm \{\min(J)\} \Big).
%\]
%\end{notation}
%
%\begin{notation}
%For~$(i,j) \in \cIJ_\II$, let~$J_{ij}$ be the inclusion minimal set in~$\smash{\II_{ij} \eqdef \bigset{I \in \II}{\{i,j\} \subseteq I}}$ ($J_{ij}$ exists since $\II$ is closed under intersection) and let~$\mu_{ij} \eqdef \min(J_{ij}) = \max\bigset{\min(I)}{I \in \II_{ij}}$ and~$\nu_{ij} \eqdef \max(J_{ij}) = \min\bigset{\max(I)}{I \in \II_{ij}}$.
%By definition~$\mu_{ij} \le i < j \le \nu_{ij}$ since~${i,j} \subseteq J_j$.
%\end{notation}

\begin{notation}
For~$1 \le i < j \le n$ such that there exists~$I \in \II$ with~$\{i,j\} \subseteq I$, we denote by~$J_{ij}$ the inclusion minimal set in~$\smash{\II_{ij} \eqdef \bigset{I \in \II}{\{i,j\} \subseteq I}}$ ($J_{ij}$ exists since $\II$ is closed under intersection) and set~$\mu_{ij} \eqdef \min(J_{ij}) = \max\bigset{\min(I)}{I \in \II_{ij}}$ and~$\nu_{ij} \eqdef \max(J_{ij}) = \min\bigset{\max(I)}{I \in \II_{ij}}$.
By definition~$\mu_{ij} \le i < j \le \nu_{ij}$ since~${i,j} \subseteq J_j$.
\end{notation}

\begin{notation}
Define~$\cIJ_\II$ to be the set of pairs~$(i,j)$ where~$1 \le i < j \le n$ are such that there exists~$I \in \II$ with~$\{i,j\} \subseteq I$ and
\[
i = \max \Big( {[\mu_{ij}, j[} \; \ssm \!\!\!\! \bigcup_{\substack{J \in \II \\ J \subseteq {[\mu_{ij}, j[}}} \!\!\!\! J \ssm \{\min(J)\} \Big).
\]
\end{notation}

\begin{notation}
\label{not:joinIrreducibles}
For~$(i,j) \in \cIJ_\II$, consider the acyclic orientation~$A_{ij} \eqdef \Or_{(\mu_{ij}, \mu_{ij}+1, \ldots, j)}$, obtained as the image by the surjection map~$\Or$ of \cref{def:surjection} of the cycle permutation
\[
(\mu_{ij}, \mu_{ij}+1, \dots, j) = 12 \cdots (\mu_{ij}-1)j\,\mu_{ij} \cdots (j-1) (j+1) \cdots n
\]
obtained from the identity permutation by placing~$j$ just before $\mu_{ij}$.
Note that that for all $J \in \II$
\[
A_{ij}(J) =
\begin{cases}
	j & \text{if } j \in J \text{ and } \min(J) \ge \mu_{ij},\\
	\min(J) & \text{otherwise.}
\end{cases}
\]
\end{notation}

\begin{notation}
For $(i,j), (k,\ell) \in \cIJ_\II$, we write $(i,j) \preccurlyeq (k,\ell)$ if and only $j \le \ell$ and~$\ell \in J_{ij}$ and~$\mu_{ij} \ge \mu_{k\ell}$.
Note in particular that~$i \ge k$ and~$j = \ell$ implies $(i,j) \preccurlyeq (k,\ell)$.
\end{notation}

\begin{example}
Following \cref{rem:oneMoreIrreducible}, for the interval hypergraph~$\II \eqdef \{1, 2, 3, 12, 23, 123\}$ illustrated in \cref{fig:Tamari}\,(left), we have~$\cIJ_\II = \{(1,2), (2,3), (1,3)\}$, the join irreducible acyclic orientations are %~$A_{12} = A_2$, $A_{23} = A_3$ and~$A_{13} = A$.
\[
A_{12} = A_2 = \acyclicOrientation{3}{1/2/2,2/3/2,1/3/2}
\qquad\quad
A_{23} = A_3 = \acyclicOrientation{3}{1/2/1,2/3/3,1/3/1}
\qquad\text{and}\qquad
A_{13} = \acyclicOrientation{3}{1/2/1,2/3/3,1/3/3}
\]
and we have~$A_{23} < A_{13}$.
\end{example}

\begin{example}
For the hypergraph~$\II \eqdef \{1, 2, 3, 12, 23, 34, 123, 234, 1234\}$ illustrated in \cref{fig:Tamari}\,(right), we have~$\cIJ_\II = \{(1,2), (2,3), (3,4), (1,3), (2,4), (1,4)\}$, the join irreducible acyclic orientations~are
\begin{gather*}
A_{12} = \raisebox{-.4cm}{\acyclicOrientation{4}{1/2/2,2/3/2,3/4/3,1/3/2,2/4/2,1/4/2}}
\qquad\quad
A_{23} = \raisebox{-.4cm}{\acyclicOrientation{4}{1/2/1,2/3/3,3/4/3,1/3/1,2/4/3,1/4/1}}
\qquad\quad
A_{34} = \raisebox{-.4cm}{\acyclicOrientation{4}{1/2/1,2/3/2,3/4/4,1/3/1,2/4/2,1/4/1}}
\\[.3cm]
A_{13} = \raisebox{-.4cm}{\acyclicOrientation{4}{1/2/1,2/3/3,3/4/3,1/3/3,2/4/3,1/4/3}}
\qquad\quad
A_{24} = \raisebox{-.4cm}{\acyclicOrientation{4}{1/2/1,2/3/2,3/4/4,1/3/1,2/4/4,1/4/1}}
\qquad\quad
A_{14} = \raisebox{-.4cm}{\acyclicOrientation{4}{1/2/1,2/3/2,3/4/4,1/3/1,2/4/4,1/4/4}}
\end{gather*}
and we have~$A_{23} < A_{13}$ and~$A_{34} < A_{24} < A_{14}$.
\end{example}

\begin{example}
For the hypergraph~$\II \eqdef \{1, 2, 3, 4, 123, 23, 234, 1234\}$ illustrated in \cref{fig:semidistributiveLattices}\,(left), we have~$\cIJ_\II = \{(1,2), (2,3), (2,4), (1,4)\}$, the join irreducible acyclic orientations~are
\begin{gather*}
A_{12} = \raisebox{-.2cm}{\acyclicOrientation{4}{1/3/2,2/3/2,2/4/2,1/4/2}}
\qquad
A_{23} = \raisebox{-.2cm}{\acyclicOrientation{4}{1/3/1,2/3/3,2/4/3,1/4/1}}
\qquad
A_{24} = \raisebox{-.2cm}{\acyclicOrientation{4}{1/3/1,2/3/2,2/4/4,1/4/1}}
\qquad
A_{14} = \raisebox{-.2cm}{\acyclicOrientation{4}{1/3/1,2/3/2,2/4/4,1/4/4}}
\end{gather*}
and we have~$A_{24} < A_{14}$.
\end{example}

\begin{example}
For the hypergraph~$\II \eqdef \{1, 2, 3, 4, 23, 34, 1234\}$ illustrated in \cref{fig:semidistributiveLattices}\,(right), we have~$\cIJ_\II = \{(1,2), (2,3), (3,4), (2,4)\}$, the join irreducible acyclic orientations~are
\begin{gather*}
A_{12} = \raisebox{-.2cm}{\acyclicOrientation{4}{2/3/2,3/4/3,1/4/2}}
\qquad
A_{23} = \raisebox{-.2cm}{\acyclicOrientation{4}{2/3/3,3/4/3,1/4/1}}
\qquad
A_{34} = \raisebox{-.2cm}{\acyclicOrientation{4}{2/3/2,3/4/4,1/4/1}}
\qquad
A_{24} = \raisebox{-.2cm}{\acyclicOrientation{4}{2/3/2,3/4/4,1/4/4}}
\end{gather*}
and we have~$A_{12} < A_{24}$ and~$A_{34} < A_{24}$.
\end{example}

\begin{example}
For the hypergraph~$\II \eqdef \{1, 2, 3, 4, 12, 23, 34, 1234\}$ illustrated in \cref{fig:notSemidistributiveLattices}\,(left), we have~$\cIJ_\II = \{(1,2), (2,3), (3,4), (1,3), (1,4)\}$, the join irreducible acyclic orientations~are
\begin{gather*}
A_{12} = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/2,2/3/2,3/4/3,1/4/2}}
\qquad\quad
A_{23} = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/3,3/4/3,1/4/1}}
\qquad\quad
A_{34} = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/2,3/4/4,1/4/1}}
\\
A_{13} = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/3,3/4/3,1/4/3}}
\qquad\quad
A_{14} = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/2,3/4/4,1/4/4}}
\end{gather*}
and we have~$A_{23} < A_{13}$ and~$A_{34} < A_{14}$.
\end{example}

\begin{example}
For the hypergraph~$\II \eqdef \{1, 2, 3, 4, 12, 23, 234, 1234\}$ illustrated in \cref{fig:notSemidistributiveLattices}\,(right), we have~$\cIJ_\II = \{(1,2), (2,3), (3,4), (1,3), (1,4)\}$, the join irreducible acyclic orientations~are
\begin{gather*}
A_{12} = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/2,2/3/2,2/4/2,1/4/2}}
\qquad\quad
A_{23} = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/3,2/4/3,1/4/1}}
\qquad\quad
A_{13} = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/3,2/4/3,1/4/3}}
\\
A_{24} = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/2,2/4/4,1/4/1}}
\qquad\quad
A_{14} = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/2,2/4/4,1/4/4}}
\end{gather*}
and we have~$A_{23} < A_{13}$ and~$A_{24} < A_{14}$.
\end{example}

\begin{lemma}
\label{lem:distinctIrreducibles2}
For $(i,j) \ne (k,\ell) \in \cIJ_\II$, we have $A_{ij} \ne A_{k\ell}$.
\end{lemma}

\begin{proof}
Assume that~$A_{ij} = A_{k\ell}$.
As~$j = A_{ij}(J_{ij}) = A_{k\ell}(J_{i,j}) \in \{\ell, \mu_{ij}\}$ and~$\mu_{ij} < j$, we obtain that~$j = \ell = A_{k\ell}(J_{ij})$ hence that~$\mu_{ij} \ge \mu_{k\ell}$.
By symmetry, we have~$\mu_{ij} = \mu_{k\ell}$.
As $j = \ell$ and $\mu_{ij} = \mu_{k\ell}$, we obtain that~$i = k$ by definition of~$\cIJ_\II$
We conclude that~$(i,j) = (k,\ell)$.
\end{proof}

\begin{lemma}
\label{lem:irrorder2}
For $(i,j), (k,\ell) \in \cIJ_\II$, we have $A_{ij} \le A_{k\ell} \iff (i,j) \preccurlyeq (k,\ell)$.
In particular~$j = \ell$ implies that $A_{ij}$ and~$A_{k\ell}$ are comparable in~$P_\II$.
\end{lemma}

\begin{proof}
By \cref{prop:sourceOrderI} we have~$A_i \le A_j$ if and only if~$A_i(I) \le A_j(I)$ for all~$I \in \II$.

For the forward direction, assume that~$A_{ij} \le A_{k\ell}$.
As~$j = A_{ij}(J_{ij}) \le A_{k\ell}(J_{ij}) \in \{\ell, \mu_{ij}\}$ and~$\mu_{ij} < j$, we obtain that~$j \le \ell$ and~$A_{k\ell}(J_{ij}) = \ell$, hence~$\ell \in J_{ij}$ and~$\mu_{ij} \ge \mu_{k\ell}$.

For the backward direction, assume that~$j \le \ell$, $\ell \in J_{ij}$ and~$\mu_{ij} \ge \mu_{k\ell}$.
Assume by means of contradiction that there is~$I \in \II$ such that~$A_{ij}(I) > A_{k\ell}(I)$.
As $A_{ij}(I) \in \{j, \min(I)\}$ and~$A_{k\ell} \in \{\ell, \min(I)\}$, and~$j \le \ell$, we must have~$A_{ij}(I) = j$ and~$A_{k\ell}(I) = \min(I)$.
As~$A_{ij}(I) = j$, we have~$j \in I$ and~$\mu_{ij} \le \min(I)$, hence~$\{i,j\} \subseteq [\mu_{i,j},j] \subseteq I$ so that~$\ell \in J_{ij} \subseteq I$ by minimality of~$J_{ij}$.
As~$A_{k\ell}(I) \ne \ell$ and~$\ell \in I$, we obtain that~$\min(I) < \mu_{k\ell}$.
We thus obtain that~$\mu_{ij} \le \min(I) < \mu_{k\ell}$ contradicting our assumption that~$\mu_{ij} \ge \mu_{k\ell}$.
\end{proof}

\begin{proposition}
\label{prop:AijJoinIrreducible}
For any~$(i,j) \in \cIJ_\II$, the acyclic orientation~$A_{ij}$ is join irreducible.
\end{proposition}

\begin{proof}
Consider an increasing flip~\flip{A}{k}{\ell}{A_{ij}}.
By definition, there is~$I \in \II$ such that~$\{k,\ell\} \subseteq I$ and~$A(I) = k$ while~$A_{ij}(I) = \ell$.
As $A_{ij}(I) \in \{j, \min(I)\}$ and~$A_{ij}(I) = \ell > k \ge \min(I)$, we obtain that~$j = \ell$.
\vincent{todo: prove that~$i = k$...}
\end{proof}

\begin{proposition}
\label{prop:joinIrreducibles}
If~$\II$ is an interval hypergraph closed under intersection, then the map~${(i,j) \mapsto A_{ij}}$ is a bijection from~$\cIJ_\II$ to the join irreducible acyclic orientations of~$\II$.
\end{proposition}

\begin{proof}
\vincent{todo}
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{If~$\II$ is semidistributive then $P_\II$ is semidistributive}
\label{subsec:semidistributiveLatticeBackward}

We now prove the backward direction of \cref{thm:semidistributiveLatticeI}.

\begin{proposition}
\label{prop:semidistributiveBackward}
If~$\II$ is a join (resp.~meet) semidistributive interval hypergraph, then $P_\II$ is a join (resp.~meet) semidistributive lattice.
\end{proposition}

\begin{proof}
We prove the result for join semidistributivity, the result for meet semidistributivity follows by the symmetry of~\cref{prop:antiIsomorphism}.

Assume by means of contradiction that~$\II$ is a semidistributive interval hypergraph for which~$P_\II$ is not join semidistributive.
By \cref{rem:semidistributiveCriterion}, there exist a cover relation~$\flip{A}{p}{q}{B}$ of~$P_\II$ and some~$(i,j), (k,\ell) \in \cIJ_\II$ such that~$A_{ij}$ and~$A_{k\ell}$ are both minimal in~$P_\II$ with~$A \join A_{ij} = B = A \join A_{k\ell}$.
Assume by symmetry that~$j \le \ell$.
As~$A_{ij} \not\le A_{k\ell}$, we obtain by \cref{lem:irrorder2} that~$j < \ell$, and that~$\ell \notin J_{ij}$ or~$\mu_{ij} < \mu_{k\ell}$.

As~$A_{ij} \not\le A$ but~$A_{ij} \le B$, there is~$U \eqdef [u,u'] \in \II$ such that~$A(U) < A_{ij}(U) \le B(U)$ by \cref{prop:sourceOrderI}.
Since~$A$ and~$B$ only differ by the flip of~$p$ to~$q$, this implies that~${A(U) = p}$ while~${B(U) = q}$.
Moreover, by definition of~$A_{ij}$, we must have~$A_{ij}(U) = j$, hence~$j \in U$ and~${\mu_{ij} \le u}$.
We conclude that~$\mu_{ij} \le u \le p < j \le q \le u'$.
Similarly, ${\mu_{k\ell} \le u \le p < \ell \le q \le u'}$.

Observe that for any~$V \in \II$ such that~$A(V) \in {]p,q]}$, we have
\begin{itemize}
\item $p < \min(V)$ as otherwise~$A(U) = p \in V \ssm \{A(V)\}$ while~$A(V) \in {]p,q]} \subseteq U \ssm \{A(U)\}$ would contradict the acyclicity of~$A$,
\item if~$j \in V$, then~$A(V) = B(V) \ge A_{ij}(V) = j$.
\end{itemize}

Since~$\flip{A}{p}{q}{B}$ is a cover relation of~$P_\II$, \cref{prop:isCoverI} implies that there is~$S \eqdef [s,s'] \in \II$ such that~$A(S) \in {]p,q]}$ and~$j \in S \ssm \{A(S)\}$.
From the observation above, we have~$p < s$ and~$A(S) \ge j$.
We claim that we can moreover assume that~$s' < \ell$.
Indeed, suppose that~$s' \ge \ell$.
As~$\mu_{k\ell} \le p < s \le j < \ell \le s'$, we obtain that~$k < s \le j < \ell$.
Hence, there exists~$I \in \II$ such that~$j \in I \subseteq {[k,\ell[}$.
As~$\II$ is closed under intersection, we can replace~$S$ by~$S \cap I$ which proves the~claim.
Hence, we have found~$S \eqdef [s,s'] \in \II$ with~$p < s \le j \le A(S) \le s' < \ell \le q$, and we choose such an~$S$ so that~$s$ is minimal.

As~$A(S) \in S \subseteq {]p,q[}$, \cref{prop:isCoverI} implies that there is~$T \eqdef [t,t'] \in \II$ such that~${A(T) \in {]p,q]}}$ and~$A(S) \in T \ssm \{A(T)\}$.
We have~$A(T) \ge j$, as otherwise~${j \in [A(T), A(S)] \subseteq T}$ and~$A(T) < j$ would contradict the observation above.
We deduce that~$A(T) > s'$ as otherwise~$A(T) \in [j, s'] \subseteq S$ and~$A(S) \in T \ssm \{A(T)\}$ would contradict the acyclicity of~$A$.
Hence, we have found~$T \eqdef [t,t'] \in \II$ with~$p < t \le s' < t'$, and we choose such a~$T$ so that~$t'$ is minimal.

As~$\mu_{ij} \le p < s$ and~$j \in S$, we have~$i < s$, from which we deduce that there is~$R \eqdef [r,r'] \in \II$ such that~$R \subseteq {[\mu_{i,j},j [}$ and~$s \in R \ssm \{r\}$.
As~$r' < j \le s'$, we have~$r < s \le r' < s'$, and we choose such an~$R$ so that~$r$ is minimal.
Assume for a moment that~$t \le r$.
Then~$t < s$, which by minimality of~$s$ in our choice of~$S$ implies that~$\ell \in T$.
If~$\ell \notin J_{ij}$, then~$J_{ij} \cap T$ contradicts the minimality of~$t'$ in our choice of~$T$.
Hence, $\ell \in J_{ij}$ which implies that~$\mu_{ij} < \mu_{k\ell}$.
We conclude that~$i < k < j < \ell$, as~$\mu_{k\ell} \le p < t$ and~$\ell \in T$.
As~$\II$ is closed under intersection, $i < k < j < \ell$ implies that~$(i,j) \in \cIJ_\II$.
As~$i < k$, we have~$A_{kj} < A_{ij} \le B$.
Moreover, $A_{kj}(J_{kj}) = j > \mu_{kj} = A(J_{kj})$, so that~$A \not\le A_{kj}$.
Hence, $A_{kj} \join A = B$ and~$A_{kj} < A_{ij}$ contradicting the minimality of~$A_{ij}$.
We conclude that~$r < t$.

We have thus found~$R \eqdef [r,r']$, $S \eqdef [s,s']$, $T \eqdef [t,t']$ and~$U \eqdef [u,u']$ in~$\II$ with~$r < s \le r' < s'$, $r < t \le s' < t'$, and~$u \le p < \min(s,t)$ and~$s' < q \le u'$.
As~$\II$ is join semidistributive, there is~$V \eqdef [v,v'] \in \II$ such that~$v < s$ and~$s' < v' < t'$.
As~$\II$ is closed under intersection, it contains~$T \cap V = [\max(v,t), v']$.
But~$\max(v,t) \le s' < v' < t'$ which contradicts the minimality of~$t'$ in our choice of~$T$.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{If~$P_\II$ is semidistributive then~$\II$ is semidistributive}
\label{subsec:semidistributiveLatticeForward}

We now prove the forward direction of \cref{thm:semidistributiveLatticeI}.

\begin{proposition}
\label{prop:semidistributiveForward}
If~$\II$ is an interval hypergraph such that $P_\II$ is a join (resp.~meet) semidistributive lattice, then~$\II$ is join (resp.~meet) semidistributive.
\end{proposition}

%\begin{proof}
%\vincent{This is an old idea of proof, but there is a bug in the middle.}
%We prove the result for join semidistributivity, the result for meet semidistributivity follows by the symmetry of~\cref{prop:antiIsomorphism}.
%
%First, we can assume that~$\II$ is closed under intersection, otherwise $P_\II$ is not even a lattice by \cref{prop:latticeForward}.
%Assume that there is~$[a,a'], [b,b'], [c,c'], [d,d'] \in \II$ such that $a < b \le a' < b'$, $a < c \le b' < c'$, $d < \min(b, c)$ and~$b' < d'$, and there is no~$[e,e'] \in \II$ such that~$e < b$ and~$a' < e' < c'$.
%Let~$j \eqdef a'+1$ and~$k \eqdef b'+1$.
%As~$\II$ is closed under intersection, we have~$[b,a'] \in \II$ so that~$(b,j) \in \cIJ_\II$.
%Similarly, we have~$(c,k) \in \cIJ_\II$ (because $[c,b'] \in \II$ if~$b \le c$, and~$[c,a'], [b,b'] \in \II$ if~$c < b$).
%Let
%\[
%i \eqdef \max \Big( [d,j[ \ssm \!\!\!\!\! \bigcup_{\substack{M \in \II \\ M \subseteq [d,j[}} \!\!\!\!\! M \ssm \{\min(M)\} \Big) = \max \Big( [d,k[ \ssm \!\!\!\!\! \bigcup_{\substack{M \in \II \\ M \subseteq [d,k[}} \!\!\!\!\! M \ssm \{\min(M)\} \Big),
%\]
%so that~$(i,j) \in \cIJ_\II$ and~$(i,k) \in \cIJ_\II$.
%(The equality holds since $j \in [b,b'] \subseteq [d,k[$ and $\II$ is closed under intersection.
%
%Note that~$j \ne k$ (since~$a' < b'$), and~$i \le \min(a,d) < \min(b,c)$ (since~$\II$ is closed under intersection).
%Hence, $(b,j), (i,j), (c,k), (i,k)$ are four distinct elements of~$\cIJ_\II$.
%Consider now the four corresponding join irreducible acyclic orientations~$A_{bj}, A_{ij}, A_{ck}$ and~$A_{ik}$ as defined in \cref{not:joinIrreducibles}.
%%Moreover, let~$A$ be defined as ...
%%\vincent{todo: define properly~$A$.}
%
%By \cref{lem:irrorder2}, we obtain that
%\[
%A_{bj} < A_{ij}
%\quad\text{and}\quad
%A_{ck} < A_{ik}.
%\]
%Moreover, since
%\begin{align*}
%& A_{bj}([b,b']) = A_{i,j}([b,b']) = j > b = A_{ck}([b,b']) = A_{ik}([b,b']) \\
%\text{and}\quad &
%\max \big( A_{bj}([c,c']), A_{ij}([c,c']) \big) \le j < k = A_{ck}([c,c']) = A_{ik}([c,c']),
%\end{align*}
%there is no other comparisons among~$A_{bj}, A_{ij}, A_{ck}$ and~$A_{ik}$.
%
%Moreover, we claim that~$A \eqdef A_{bj} \join A_{ik} \ge A_{ij}$.
%By \cref{prop:sourceOrderI}, we just need to prove that~$A([e,e']) \ge A_{ij}([e,e'])$ for all~$[e,e'] \in \II$.
%By definition, we have~$A_{ij}([e,e']) \in \{e,j\}$, and we have nothing to prove if~$A_{ij}([e,e']) = e$.
%Assume thus that~$A_{ij}([e,e']) = j$, and let us prove that~$A([e,e']) \ge j$.
%As~$A_{ij}([e,e']) = j$, we have~$j \in [e,e']$ and~$e \ge \mu_{ij} \ge \mu_{ik}$.
%If~$e' \ge k$, then~$A([e,e']) \ge A_{ik}([e,e']) = k > j$.
%If~$b \le e$, then~$A([e,e']) \ge A_{bj}([e,e']) = j$.
%Hence, we obtain that~$e < b$ and~$a' < j \le e' < k \le c'$, contradicting our assumption.
%
%Since~$A_{bj} < A_{ij}$, we obtain from our claim that~$A_{bj} \join A_{ik} = A_{ij} \join A_{ik}$.
%Similarly, we prove that~$A_{ij} \join A_{ck} = A_{ij} \join A_{ik}$.
%\Vincent{I have a problem here with $\{12, 234, 45, 12345\}$... See \cref{exm:problemProof}.}
%%sage: intervals = ((1,2),(2,4),(4,5),(1,5))                                                                                                                                                                                                   
%%sage: HP = HypergraphicalPolytopes(interval_hypergraph([1,n], intervals))                                                                                                                                                                     
%%sage: pos = HP.hypergraphical_poset()                                                                                                                                                                                                         
%%sage: lat = LatticePoset(pos)                                                                                                                                                                                                                 
%%sage: lat.is_semidistributive()                                                                                                                                                                                                               
%%False
%%sage: is_quasi_schroder_hypergraph(tuple(tuple(i) for i in intervals))                                                                                                                                                                        
%%False
%%sage: ll = lat.relabel(lambda v: tuple(vector(v)-vector([2,2,2,2,2])))                                                                                                                                                                        
%%sage: ll.join((1,0,2,1,0), (2,1,0,0,1))                                                                                                                                                                                                       
%%(1, 0, 2, 0, 1)
%%sage: ll.join((1,1,0,0,2), (2,0,1,1,0))                                                                                                                                                                                                       
%%(1, 0, 1, 0, 2)
%We conclude that
%\[
%A_{bj} \join A_{ik} = A_{ij} \join A_{ck}
%\]
%admits two incomparable join representations, so that~$P_\II$ is not join semidistributive.
%\end{proof}
%
%\begin{example}
%For the hypergraph~$\II \eqdef \{1, 2, 3, 4, 12, 23, 34, 1234\}$ illustrated in \cref{fig:notSemidistributiveLattices}\,(right), we have
%\[
%\begin{array}{c|c|c|c|c|c|c|c|c|c|c}
%a & a' & b & b' & c & c' & d & d' & i & j & k \\
%\hline
%1 & 2 & 2 & 3 & 3 & 4 & 1 & 4 & 1 & 3 & 4
%\end{array}
%\]
%and
%\[
%\begin{array}{c@{}c@{}c@{}c@{}c@{}c@{}c}
%A_{23} && A_{14} & & A_{13} && A_{34} \\
%\raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/3,3/4/3,1/4/1}} & \join & \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/2,3/4/4,1/4/4}}
%& = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/3,3/4/4,1/4/4}} = &
%\raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/3,3/4/3,1/4/3}} & \join & \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/2,3/4/4,1/4/1}}
%\\
%~
%\end{array}
%\]
%and we have~$A_{23} < A_{13}$ and~$A_{34} < A_{14}$ but no other comparisons among~$A_{23}, A_{13}, A_{34}, A_{14}$, so that~$A$ admits two incomparable join representations.
%\end{example}
%
%\begin{example}
%For the hypergraph~$\II \eqdef \{1, 2, 3, 4, 12, 23, 234, 1234\}$ illustrated in \cref{fig:notSemidistributiveLattices}\,(right), we have
%\[
%\begin{array}{c|c|c|c|c|c|c|c|c|c|c}
%a & a' & b & b' & c & c' & d & d' & i & j & k \\
%\hline
%1 & 2 & 2 & 3 & 2 & 4 & 1 & 4 & 1 & 3 & 4
%\end{array}
%\]
%and
%\[
%\begin{array}{c@{}c@{}c@{}c@{}c@{}c@{}c}
%A_{23} && A_{14} & & A_{13} && A_{24} \\
%\raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/3,2/4/3,1/4/1}} & \join & \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/2,2/4/4,1/4/4}}
%& = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/3,2/4/4,1/4/4}} = &
%\raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/3,2/4/3,1/4/3}} & \join & \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/2,2/4/4,1/4/1}}
%\\
%~
%\end{array}
%\]
%and we have~$A_{23} < A_{13}$ and~$A_{24} < A_{14}$ but no other comparisons among~$A_{23}, A_{13}, A_{24}, A_{14}$, so that~$A$ admits two incomparable join representations.
%\end{example}
%
%\begin{example}
%\label{exm:problemProof}
%For the hypergraph~$\II \eqdef \{1, 2, 3, 4, 12, 234, 45, 12345\}$, we have
%\[
%\begin{array}{c|c|c|c|c|c|c|c|c|c|c}
%a & a' & b & b' & c & c' & d & d' & i & j & k \\
%\hline
%1 & 2 & 2 & 4 & 4 & 5 & 1 & 5 & 1 & 3 & 5
%\end{array}
%\]
%and
%\[
%\begin{array}{c@{}c@{}c@{}c@{}c@{}c@{}c}
%A_{23} && A_{15} & & A_{13} && A_{45} \\
%\raisebox{-.2cm}{\acyclicOrientation{5}{1/2/1,2/4/3,4/5/4,1/5/1}} & \join & \raisebox{-.2cm}{\acyclicOrientation{5}{1/2/1,2/4/2,4/5/5,1/5/5}}
%& = \raisebox{-.2cm}{\acyclicOrientation{5}{1/2/1,2/4/3,4/5/5,1/5/5}} \ne \raisebox{-.2cm}{\acyclicOrientation{5}{1/2/1,2/4/3,4/5/5,1/5/3}} = &
%\raisebox{-.2cm}{\acyclicOrientation{5}{1/2/1,2/4/3,4/5/4,1/5/3}} & \join & \raisebox{-.2cm}{\acyclicOrientation{5}{1/2/1,2/4/2,4/5/5,1/5/1}}
%\\
%~
%\end{array}
%\]
%so the proof idea above seems incorrect.
%However, for
%\[
%X = \raisebox{-.2cm}{\acyclicOrientation{5}{1/2/1,2/4/4,4/5/5,1/5/1}}
%\qquad
%Y = A_{13} = \raisebox{-.2cm}{\acyclicOrientation{5}{1/2/1,2/4/3,4/5/4,1/5/3}}
%\quad\text{and}\quad
%Z = A_{15} = \raisebox{-.2cm}{\acyclicOrientation{5}{1/2/1,2/4/2,4/5/5,1/5/5}} 
%\]
%we have 
%\[
%X \join Y = X \join Z = \raisebox{-.2cm}{\acyclicOrientation{5}{1/2/1,2/4/4,4/5/5,1/5/5}} \ne X = X \join \raisebox{-.2cm}{\acyclicOrientation{5}{1/2/1,2/4/2,4/5/4,1/5/1}} = X \join (Y \meet Z)
%\]
%so maybe we should use this approach of proof.
%\end{example}

\begin{proof}
We prove the result for join semidistributivity, the result for meet semidistributivity follows by the symmetry of~\cref{prop:antiIsomorphism}.

First, we can assume that~$\II$ is closed under intersection, otherwise $P_\II$ is not even a lattice by \cref{prop:latticeForward}.
Assume now that there is~$[r,r'], [s,s'], [t,t'], [u,u'] \in \II$ such that $r < s \le r' < s'$, $r < t \le s' < t'$, $u < \min(s, t)$ and~$s' < u'$, and there is no~$[v,v'] \in \II$ such that~$v < s$ and~${s' < v' < t'}$.
Let
\[
j \eqdef \max \Big( [u,t'[ \ssm \!\!\!\!\! \bigcup_{\substack{J \in \II \\ J \subseteq [u,t'[}} \!\!\!\!\! J \ssm \{\min(J)\} \Big)
\quad\text{and}\quad
i \eqdef \mu_{jt'} \eqdef \max\set{\min(I)}{\{j,t'\} \subseteq I \in \II}.
\]
Note that $i \le j < s < s' < t'$.
We further assume below that~$i < j$, the argument for~$i = j$ is similar and even slightly simpler.

Consider the three permutations
\begin{align*}
\pi_A & \eqdef 1 \cdots (i-1) \, j \, i \cdots (j-1) \, (j+1) \cdots (s-1) \, t' \, s' \, s \cdots (s'-1) \, (s'+1) \cdots (t'-1) \, (t'+1) \cdots n \\
\pi_B & \eqdef 1 \cdots (i-1) \, s' \, i \cdots (s'-1) \, (s'+1) \cdots n \\
\pi_C & \eqdef 1 \cdots (i-1) \, t' \, i \cdots (t'-1) \, (t'+1) \cdots n
\end{align*}
(written in one line notation), and let~$A \eqdef \Or_{\pi_A}$, $B \eqdef \Or_{\pi_B}$ and $C \eqdef \Or_{\pi_C}$ be the corresponding acyclic orientations of~$\II$.

\para{Claim 1:} $A \join B = A \join C$.
%
Note that~$\pi_A = \projDown_A$.
Indeed, $\pi_A$ has only $3$ descents $ji$, $t's'$ and~$s's$.
Let~$\tau$, $\sigma$ and $\rho$ denote the permutations obtained from~$\pi_A$ by exchanging $ji$, $t's'$ and $s's$, respectively.
Then
\[
\Or_{\tau}(J_{jt'}) = i \ne j = X(J_{jt'}),
\;\;
\Or_{\sigma}([t,t']) = s' \ne t' = X([t,t'])
\;\;\text{and}\;\;
\Or_{\rho}([s,s']) = s \ne s' = X([s,s']).
\]
Hence, $\pi_A$ is indeed the minimal permutation for~$A$.
Similarly, $\pi_B = \projDown_B$ and $\pi_C = \projDown_C$.

We therefore obtain from \cref{prop:latticeBackward} that
$A \join B = \Or_{\pi_A \join \pi_B}$ and $A \join C = \Or_{\pi_A \join \pi_C}$.
%\[
%A \join B = \Or_{\pi_A \join \pi_B}
%\qquad\text{and}\qquad
%A \join C = \Or_{\pi_A \join \pi_C}.
%\]
As
\begin{align*}
\pi_A \join \pi_B & = 1 \cdots (i-1) \, t' \, s' \, j \, i \cdots (j-1) \, (j+1) \cdots (s'-1) \, (s'+1) \cdots (t'-1) \, (t'+1) \cdots n \\
\pi_A \join \pi_C & = 1 \cdots (i-1) \, t' \, j \, i \cdots (j-1) \, (j+1) \cdots (s-1) \, s' \, s \cdots (s'-1) \, (s'+1) \cdots (t'-1) \, (t'+1) \cdots n
\end{align*}
%(still in one line notation), 
and there is no~$[v,v'] \in \II$ such that~$v < s$ and~$s' < v' < s'$ by assumption, we have~$A \join B = A \join C$.

\para{Claim 2:} $A \ge B \meet C$.
%
For any interval~$I$, we have
\[
B(I) = \begin{cases} s' & \text{if $s' \in I$ and~$i \le \min(I)$,} \\ \min(I) & \text{otherwise} \end{cases}
\quad\text{and}\quad
C(I) = \begin{cases} t' & \text{if $t' \in I$ and~$i \le \min(I)$,} \\ \min(I) & \text{otherwise} \end{cases}
\]
Hence, $(B \meet C)(I) = \min(I)$ except maybe if~$[s',t'] \subseteq I$ and~$i \le \min(I)$.
For such~$I$, we actually have that
\begin{itemize}
\item $(B \meet C)(I) \le j$ since $B(I) = s'$ and~$C(J) = \min(J)$ for all~$J \subseteq [u,t'[$ and using the definition of~$j$,
\item $A(I) = j$ since~$j \in I$ and~$i \le \min(I)$.
\end{itemize}
Hence, we obtain that~$A(I) \ge (B \meet C)(I)$ for all~$I \in \II$ so that~$A \ge B \meet C$ by \cref{prop:sourceOrderI}.

\para{Claim 3:} $A \join B = A \join C \ne A = A \join (B \meet C)$.
%
The first equality holds by Claim 1.
The last equality holds by Claim 2.
The inequality holds since~$A(J_{jt'}) = j$ while~$(B \meet C)(J_{jt'}) \ge C(J_{jt'}) = t'$.
We conclude that~$P_\II$ is not semidistributive.
\end{proof}

\begin{example}
For the hypergraph~$\II \eqdef \{1, 2, 3, 4, 12, 23, 34, 1234\}$ illustrated in \cref{fig:notSemidistributiveLattices}\,(right), we have
\[
\begin{array}{c|c|c|c|c|c|c|c|c|c}
r & r' & s & s' & t & t' & u & u' & i & j \\
\hline
1 & 2 & 2 & 3 & 3 & 4 & 1 & 4 & 1 & 1
\end{array}
\]
and
\[
A = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/3,3/4/4,1/4/1}}
\qquad
B = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/3,3/4/3,1/4/3}}
\qquad
C = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/2,3/4/4,1/4/4}}
\]
so that
\[
A \join B = A \join C = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/3,3/4/4,1/4/1}} \ne C = C \join \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/2,3/4/3,1/4/1}} = A \join (B \meet C).
\]
\end{example}

\begin{example}
For the hypergraph~$\II \eqdef \{1, 2, 3, 4, 12, 23, 234, 1234\}$ illustrated in \cref{fig:notSemidistributiveLattices}\,(right), we have
\[
\begin{array}{c|c|c|c|c|c|c|c|c|c}
r & r' & s & s' & t & t' & u & u' & i & j \\
\hline
1 & 2 & 2 & 3 & 2 & 4 & 1 & 4 & 1 & 1
\end{array}
\]
and
\[
A = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/3,2/4/4,1/4/1}}
\qquad
B = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/3,2/4/3,1/4/3}}
\qquad
C = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/2,2/4/4,1/4/4}}
\]
so that
\[
A \join B = A \join C = \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/2,2/4/2,1/4/1}} \ne A = A \join \raisebox{-.2cm}{\acyclicOrientation{4}{1/2/1,2/3/3,2/4/4,1/4/1}} = A \join (B \meet C).
\]
\end{example}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Quotient interval hypergraphic lattices}
\label{sec:quotient}

In this section, we prove \cref{thm:quotientLatticeI} which we first repeat:
%characterizing the interval hypergraphs $\II$ for which $P_\II$ are semidistributive lattices.

\begin{definition}
\label{def:subinterval}
We say that an interval hypergraph~$\II$ is \defn{closed under initial} (resp.~\defn{final}) \defn{subintervals} if~$[i,k] \in \II$ implies~$[i,j] \in \II$ (resp.~$[j,k] \in \II$) for any~$i < j < k$.
\end{definition}

\vincent{recall basic definitions and properties of lattice quotients of the weak order.}

\begin{theoremA}
For an interval hypergraph $\II$ on~$[n]$ with~$\{i\} \in \II$ for all~$i \in [n]$, the poset $P_\II$ is a join (resp.~meet) semilattice quotient of the weak order on permutations if and only if it is closed under initial (resp.~final) subintervals.
\end{theoremA}

\vincent{Conversely, it seems I had a characterization of the quotients we obtain in terms of arcs... I can't remember it at the moment.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Some open questions}
\label{sec:openQuestions}

Understand the operation of addition/deletion of an inclusion maximal interval.

When semidistributive:
\begin{itemize}
\item is there a clean interval doubling construction?
\item understand canonical join representations.
\item understand forcing order on join irreducibles, and describe all lattice quotients.
\end{itemize}

There is a natural edge labeling of $P_\II$. Is it an interesting labeling? (EL-labeling for instance?)

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\section*{Acknowledgments}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\bibliographystyle{alpha}
\bibliography{IH_lattices}
\label{sec:biblio}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{document}
